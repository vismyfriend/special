import{p as L,u as T,b as l,i as M,E as V,d as j,o as n,f as r,h as v,s as J,t as h,l as C,F as S,q as A,n as H}from"./index.d0d9e3fe.js";import{s as K}from"./short-words-data.61a3d329.js";import{u as O}from"./example-store.8a11597f.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";const U={class:"game-wrapper",style:{backgroundImage:"url(/background.jpg)"}},X={class:"progress-container"},Y={key:0,class:"progress-text"},Z={key:0,class:"row"},W={class:"col"},ee=["onClick"],se={key:0,class:"hint"},ae={class:"col"},te=["onClick"],le={__name:"GameFindPairsHard",setup(ie){const N=L(),R=T(),_=O(),y=s=>s.sort(()=>Math.random()-.5),g=l(),o=l(),i=l([]),u=l([]),w=l(0),b=l(0),P=l(5),d=l(0),G=M(()=>{var s;return((s=o.value)==null?void 0:s.length)||0}),B=M(()=>`${d.value/G.value*100}%`),m=l(0),F=()=>{const s=Math.round(d.value/G.value*100);m.value<s?(m.value+=1,requestAnimationFrame(F)):m.value=s};V(d,F);const D=(s,a)=>y(s).slice(0,a),p=s=>{var e;let a=(e=o.value)==null?void 0:e.map(t=>{const f={id:t.id,lang:t[s],active:!1,visible:!0};return s==="eng"&&t.hint&&(f.hint=t.hint),f});return a=a.slice(b.value,P.value),y(a)},k=s=>{switch(s){case"left":i.value.forEach(a=>a.active=!1);break;case"right":u.value.forEach(a=>a.active=!1);break;default:i.value.forEach(a=>a.active=!1),u.value.forEach(a=>a.active=!1);break}},I=(s,a)=>{let e,t;if(a==="left"){if(k(a),e=i.value.find(c=>c.id===s),e.active=!0,t=u.value.find(c=>c.active),!t)return}else if(k(a),t=u.value.find(c=>c.id===s),t.active=!0,e=i.value.find(c=>c.active),!e)return;e.id===t.id?q(t,e):(x.value++,$(e,t)),k()},$=(s,a)=>{s.pulseWrong=!0,a.pulseWrong=!0,setTimeout(()=>{s.pulseWrong=!1,a.pulseWrong=!1},600)},q=(s,a)=>{s.pulse=!0,a.pulse=!0,d.value++,setTimeout(()=>{s.visible=!1,a.visible=!1,s.pulse=!1,a.pulse=!1,i.value.every(f=>!f.visible)&&E()},500),i.value.every(t=>!t.visible)&&E()},x=l(0),E=()=>{P.value+=5,b.value+=5,b.value<o.value.length?(u.value=p("ru"),i.value=p("eng")):z()},z=()=>{_.setLastGameResults(w.value,x.value),_.setGameName("FindPairsHard"),_.setWordSet(g.value),N.push("/leader-board/")};return j(()=>{g.value=R.params.missionName,o.value=K[g.value],o.value=D(o.value,20),u.value=p("ru"),i.value=p("eng"),setInterval(()=>{w.value+=10},10)}),(s,a)=>(n(),r("div",U,[v("div",X,[v("div",{class:"progress-bar",style:J({width:B.value})},null,4),d.value>0?(n(),r("div",Y,h(m.value)+"%",1)):C("",!0)]),o.value?(n(),r("div",Z,[v("div",W,[(n(!0),r(S,null,A(i.value,e=>(n(),r("div",{class:H(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>I(e.id,"left")},[v("div",null,[v("div",null,h(e.lang),1),e.hint?(n(),r("div",se,h(e.hint),1)):C("",!0)])],10,ee))),128))]),v("div",ae,[(n(!0),r(S,null,A(u.value,e=>(n(),r("div",{class:H(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>I(e.id,"right")},h(e.lang),11,te))),128))])])):C("",!0)]))}};var ce=Q(le,[["__scopeId","data-v-a45b2b34"]]);export{ce as default};
