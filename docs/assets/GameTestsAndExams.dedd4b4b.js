import{u as O,r as f,o as P,b as n,c,e as s,t as i,F as k,q as b,j as m,s as Q,y as R,w as C,B as D,n as w}from"./index.afd9a2de.js";import{T as z}from"./TestsAndExamsData.37ebbf68.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";const Y={key:0,class:"exercise-container"},H={class:"exercise-header"},J={class:"task-title"},W={key:0,class:"task-image-container"},X=["src","alt"],Z={key:1,controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},x=["src"],q={key:2,class:"true-false-container"},ee={class:"true-false-table"},te={class:"radio-label"},se=["name","onUpdate:modelValue"],le={class:"radio-label"},oe=["name","onUpdate:modelValue"],ae={key:3,class:"multiple-choice-container"},re={class:"question-text"},ne={class:"options-container"},ce=["name","value","onUpdate:modelValue"],ue={class:"option-text"},ie={class:"check-script-wrapper"},de=["onClick"],pe={key:0,class:"script-toggle-wrapper"},ve=["onClick"],fe={key:4,class:"text-script-content"},_e={__name:"GameTestsAndExams",setup(me){const M=O(),h=f(null),u=f([]),d=f([]),g=f(null),y=f([]),E=f(""),_=f([]),S=t=>{const o=[...t];for(let l=o.length-1;l>0;l--){const e=Math.floor(Math.random()*(l+1));[o[l],o[e]]=[o[e],o[l]]}return o},U=t=>t.map(o=>{if(o.taskID!=="multiple_choice")return{...o};const e=S([...o.questions]).map(a=>{a.options[a.correctAnswer];const r=S(Object.entries(a.options)),p={};let v="A";return r.forEach(([A,$],j)=>{const L=String.fromCharCode(65+j);p[L]=$,A===a.correctAnswer&&(v=L)}),{...a,options:p,correctAnswer:v}});return{...o,questions:e}});P(()=>{E.value=M.params.missionName,h.value=z[E.value]||null,h.value&&(_.value=U(h.value.tasks),u.value=_.value.map(t=>Array(t.questions.length).fill(null)),d.value=_.value.map(()=>!1),y.value=_.value.map(()=>null)),V()});const T=t=>t===100?{letter:"A+",class:"grade-Aplus"}:t>=85?{letter:"A",class:"grade-A"}:t>=75?{letter:"B+",class:"grade-Bplus"}:t>=60?{letter:"B-",class:"grade-Bminus"}:t>=40?{letter:"C",class:"grade-C"}:t>=20?{letter:"D",class:"grade-D"}:t>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},F=t=>{g.value=g.value===t?null:t},V=()=>{document.addEventListener("contextmenu",t=>{if(t.target.classList.contains("audio-player"))return t.preventDefault(),!1}),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"&&t.preventDefault()})},G=t=>{d.value[t]=!0;const o=_.value[t];let l=0;o.questions.forEach((a,r)=>{u.value[t][r]===a.correctAnswer&&l++});const e=Math.round(l/o.questions.length*100);y.value[t]=e},B=(t,o,l,e)=>{if(!d.value[t])return"";const a=u.value[t][o];return l===e?a===l?"correct-selected":"correct-not-selected":a===l?"incorrect-selected":""},K=(t,o,l,e)=>{if(!d.value[t])return"";const a=u.value[t][o];return l===e?a===l?"option-correct-selected":"option-correct-not-selected":a===l?"option-incorrect-selected":""},N=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(t,o)=>h.value?(n(),c("div",Y,[s("div",H,[s("h2",null,i(h.value.mainDescription),1),o[0]||(o[0]=s("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1))]),(n(!0),c(k,null,b(_.value,(l,e)=>(n(),c("div",{key:e,class:"task-container",style:Q({backgroundColor:N[e%7]})},[s("h3",J,i(l.taskDescription),1),l.taskPicture?(n(),c("div",W,[s("img",{src:l.taskPicture,alt:"Image for task "+(e+1),class:"task-image"},null,8,X)])):m("",!0),l.audio?(n(),c("audio",Z,[s("source",{src:l.audio,type:"audio/mp3"},null,8,x),o[1]||(o[1]=R(" Your browser does not support the audio element. "))])):m("",!0),l.taskID==="true_false"?(n(),c("div",q,[s("table",ee,[o[2]||(o[2]=s("thead",null,[s("tr",null,[s("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),s("th",{class:"true-header"},"True"),s("th",{class:"false-header"},"False")])],-1)),s("tbody",null,[(n(!0),c(k,null,b(l.questions,(a,r)=>(n(),c("tr",{key:r},[s("td",null,i(a.text),1),s("td",null,[s("label",te,[C(s("input",{type:"radio",name:"task"+e+"q"+r,value:"true","onUpdate:modelValue":p=>u.value[e][r]=p},null,8,se),[[D,u.value[e][r]]]),s("span",{class:w(["radio-custom",B(e,r,"true",a.correctAnswer)])},null,2)])]),s("td",null,[s("label",le,[C(s("input",{type:"radio",name:"task"+e+"q"+r,value:"false","onUpdate:modelValue":p=>u.value[e][r]=p},null,8,oe),[[D,u.value[e][r]]]),s("span",{class:w(["radio-custom",B(e,r,"false",a.correctAnswer)])},null,2)])])]))),128))])])])):l.taskID==="multiple_choice"?(n(),c("div",ae,[(n(!0),c(k,null,b(l.questions,(a,r)=>(n(),c("div",{key:r,class:"question-container"},[s("p",re,i(r+1)+") "+i(a.text),1),s("div",ne,[(n(!0),c(k,null,b(a.options,(p,v)=>(n(),c("label",{key:v,class:w(["option-label",[K(e,r,v,a.correctAnswer),u.value[e][r]===v&&!d.value[e]?"option-selected":""]])},[C(s("input",{type:"radio",name:"task"+e+"q"+r,value:v,"onUpdate:modelValue":A=>u.value[e][r]=A,class:"option-input"},null,8,ce),[[D,u.value[e][r]]]),s("span",ue,i(v)+" : "+i(p),1)],2))),128))])]))),128))])):m("",!0),s("div",ie,[s("button",{class:"check-button",onClick:a=>G(e)}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C - check ",8,de),s("div",{class:w(["score-display",[{"score-visible":d.value[e]},d.value[e]?T(y.value[e]).class:""]])},i(d.value[e]?`${y.value[e]}% (${T(y.value[e]).letter})`:""),3),l.textScript?(n(),c("div",pe,[s("button",{class:"toggle-script-btn",onClick:a=>F(e)},i(g.value===e?"\u0421\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0441\u0442":"Explain it to me"),9,ve)])):m("",!0)]),g.value===e?(n(),c("div",fe,[s("p",null,i(l.textScript),1)])):m("",!0)],4))),128))])):m("",!0)}};var ke=I(_e,[["__scopeId","data-v-33396998"]]);export{ke as default};
