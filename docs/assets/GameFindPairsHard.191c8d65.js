import{p as q,u as z,r as i,f as M,C as L,o as T,b as r,c as n,e as v,s as V,t as h,j as b,F as E,q as S,n as A}from"./index.7e4bc44d.js";import{s as J}from"./short-words-data.db73cbb7.js";import{u as K}from"./example-store.69cb1dd1.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const Q={class:"game-wrapper",style:{backgroundImage:"url(/background.jpg)"}},U={class:"progress-container"},X={key:0,class:"progress-text"},Y={key:0,class:"row"},Z={class:"col"},W=["onClick"],ee={key:0,class:"hint"},se={class:"col"},ae=["onClick"],te={__name:"GameFindPairsHard",setup(le){const H=q(),N=z(),k=K(),C=s=>s.sort(()=>Math.random()-.5),y=i(),o=i(),l=i([]),u=i([]),w=i(0),_=i(0),P=i(5),d=i(0),G=M(()=>{var s;return((s=o.value)==null?void 0:s.length)||0}),R=M(()=>`${d.value/G.value*100}%`),m=i(0),F=()=>{const s=Math.round(d.value/G.value*100);m.value<s?(m.value+=1,requestAnimationFrame(F)):m.value=s};L(d,F);const B=(s,a)=>C(s).slice(0,a),p=s=>{var e;let a=(e=o.value)==null?void 0:e.map(t=>{const f={id:t.id,lang:t[s],active:!1,visible:!0};return s==="eng"&&t.hint&&(f.hint=t.hint),f});return a=a.slice(_.value,P.value),C(a)},g=s=>{switch(s){case"left":l.value.forEach(a=>a.active=!1);break;case"right":u.value.forEach(a=>a.active=!1);break;default:l.value.forEach(a=>a.active=!1),u.value.forEach(a=>a.active=!1);break}},I=(s,a)=>{let e,t;if(a==="left"){if(g(a),e=l.value.find(c=>c.id===s),e.active=!0,t=u.value.find(c=>c.active),!t)return}else if(g(a),t=u.value.find(c=>c.id===s),t.active=!0,e=l.value.find(c=>c.active),!e)return;e.id===t.id?$(t,e):D(e,t),g()},D=(s,a)=>{s.pulseWrong=!0,a.pulseWrong=!0,setTimeout(()=>{s.pulseWrong=!1,a.pulseWrong=!1},600)},$=(s,a)=>{s.pulse=!0,a.pulse=!0,d.value++,setTimeout(()=>{s.visible=!1,a.visible=!1,s.pulse=!1,a.pulse=!1,l.value.every(f=>!f.visible)&&x()},500),l.value.every(t=>!t.visible)&&x()},x=()=>{P.value+=5,_.value+=5,_.value<o.value.length?(u.value=p("ru"),l.value=p("eng")):j()},j=()=>{k.setLastGameResults(w.value,20),k.setGameName("FindPairsHard"),H.push("/leader-board/")};return T(()=>{y.value=N.params.missionName,o.value=J[y.value],o.value=B(o.value,20),u.value=p("ru"),l.value=p("eng"),setInterval(()=>{w.value+=10},10)}),(s,a)=>(r(),n("div",Q,[v("div",U,[v("div",{class:"progress-bar",style:V({width:R.value})},null,4),d.value>0?(r(),n("div",X,h(m.value)+"%",1)):b("",!0)]),o.value?(r(),n("div",Y,[v("div",Z,[(r(!0),n(E,null,S(l.value,e=>(r(),n("div",{class:A(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>I(e.id,"left")},[v("div",null,[v("div",null,h(e.lang),1),e.hint?(r(),n("div",ee,h(e.hint),1)):b("",!0)])],10,W))),128))]),v("div",se,[(r(!0),n(E,null,S(u.value,e=>(r(),n("div",{class:A(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>I(e.id,"right")},h(e.lang),11,ae))),128))])])):b("",!0)]))}};var ue=O(te,[["__scopeId","data-v-6380adaa"]]);export{ue as default};
