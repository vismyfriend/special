import{u as K,r as m,o as j,b as r,c as n,e,t as c,F as g,q as y,j as f,s as G,y as I,w as A,B as E,n as D}from"./index.77bd8098.js";import{L as O}from"./ListeningExerciseData.abadfe08.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";const H={key:0,class:"exercise-container"},J={class:"exercise-header"},Q={class:"header-bottom"},X={class:"task-counter"},Z={key:0,class:"useful-words-container"},q={class:"useful-words"},x={class:"useful-words-content"},ee={class:"english-word"},se={class:"translation"},te={key:0,class:"comma"},le={class:"task-title"},ae={key:1,class:"task-image-container"},oe=["src","alt"],re={key:2,controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},ne=["src"],ue={key:3,class:"true-false-container"},ce={class:"true-false-table"},ie={class:"radio-label"},de=["name","onUpdate:modelValue"],ve={class:"radio-label"},_e=["name","onUpdate:modelValue"],pe={key:4,class:"multiple-choice-container"},fe={class:"question-text"},me={class:"options-container"},he=["name","value","onUpdate:modelValue"],ke={class:"option-text"},be={class:"task-footer"},ge={class:"task-controls"},ye=["onClick"],we=["onClick"],Ce={key:0,class:"text-script-content"},De={class:"task-navigation"},Ae=["disabled"],Ee=["disabled"],Le={__name:"ListeningExercise",setup(Te){const F=K(),u=m(null),v=m([]),_=m([]),w=m(null),h=m([]),L=m(""),p=m(0),N=()=>{p.value<u.value.tasks.length-1&&(p.value++,window.scrollTo({top:0,behavior:"smooth"}))},V=()=>{p.value>0&&(p.value--,window.scrollTo({top:0,behavior:"smooth"}))},T=t=>t===100?{letter:"A+",class:"grade-Aplus"}:t>=85?{letter:"A",class:"grade-A"}:t>=75?{letter:"B+",class:"grade-Bplus"}:t>=60?{letter:"B-",class:"grade-Bminus"}:t>=40?{letter:"C",class:"grade-C"}:t>=20?{letter:"D",class:"grade-D"}:t>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},M=t=>{w.value=w.value===t?null:t};j(()=>{L.value=F.params.missionName,u.value=O[L.value]||null,u.value&&(v.value=u.value.tasks.map(t=>Array(t.questions.length).fill(null)),_.value=u.value.tasks.map(()=>!1),h.value=u.value.tasks.map(()=>null)),P()});const P=()=>{document.addEventListener("contextmenu",t=>{if(t.target.classList.contains("audio-player"))return t.preventDefault(),!1}),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"&&t.preventDefault()})},B=t=>t?t.split(",").map(o=>{const[l,s]=o.split("-").map(i=>i.trim());return{english:l,russian:s}}):[],W=t=>{_.value[t]=!0;const o=u.value.tasks[t];let l=0;o.questions.forEach((i,C)=>{v.value[t][C]===i.correctAnswer&&l++});const s=Math.round(l/o.questions.length*100);h.value[t]=s},S=(t,o,l,s)=>{if(!_.value[t])return"";const i=v.value[t][o];return l===s?i===l?"correct-selected":"correct-not-selected":i===l?"incorrect-selected":""},$=(t,o,l,s)=>{if(!_.value[t])return"";const i=v.value[t][o];return l===s?i===l?"option-correct-selected":"option-correct-not-selected":i===l?"option-incorrect-selected":""},R=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(t,o)=>u.value?(r(),n("div",H,[e("div",J,[e("h2",null,c(u.value.mainDescription),1),e("div",Q,[o[0]||(o[0]=e("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1)),e("div",X,c(p.value+1)+"/"+c(u.value.tasks.length),1)])]),(r(!0),n(g,null,y(u.value.tasks,(l,s)=>{var i,C,U;return r(),n("div",{key:s,class:"task-container",style:G({backgroundColor:R[s%7],display:s===p.value?"block":"none"})},[(U=(C=(i=u.value)==null?void 0:i.tasks)==null?void 0:C[s])!=null&&U.usefulWords?(r(),n("div",Z,[e("div",q,[o[2]||(o[2]=e("span",{class:"useful-words-title"},"Useful words:",-1)),e("div",x,[(r(!0),n(g,null,y(B(u.value.tasks[s].usefulWords),(d,a)=>(r(),n("div",{key:a,class:"word-pair"},[e("span",ee,c(d.english),1),o[1]||(o[1]=e("span",{class:"separator"},"-",-1)),e("span",se,c(d.russian),1),a<B(u.value.tasks[s].usefulWords).length-1?(r(),n("span",te,",")):f("",!0)]))),128))])])])):f("",!0),e("h3",le,c(l.taskDescription),1),l.taskPicture?(r(),n("div",ae,[e("img",{src:l.taskPicture,alt:"Image for task "+(s+1),class:"task-image"},null,8,oe)])):f("",!0),l.audio?(r(),n("audio",re,[e("source",{src:l.audio,type:"audio/mp3"},null,8,ne),o[3]||(o[3]=I(" Your browser does not support the audio element. "))])):f("",!0),l.taskID==="true_false"?(r(),n("div",ue,[e("table",ce,[o[4]||(o[4]=e("thead",null,[e("tr",null,[e("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),e("th",{class:"true-header"},"True"),e("th",{class:"false-header"},"False")])],-1)),e("tbody",null,[(r(!0),n(g,null,y(l.questions,(d,a)=>(r(),n("tr",{key:a},[e("td",null,c(d.text),1),e("td",null,[e("label",ie,[A(e("input",{type:"radio",name:"task"+s+"q"+a,value:"true","onUpdate:modelValue":k=>v.value[s][a]=k},null,8,de),[[E,v.value[s][a]]]),e("span",{class:D(["radio-custom",S(s,a,"true",d.correctAnswer)])},null,2)])]),e("td",null,[e("label",ve,[A(e("input",{type:"radio",name:"task"+s+"q"+a,value:"false","onUpdate:modelValue":k=>v.value[s][a]=k},null,8,_e),[[E,v.value[s][a]]]),e("span",{class:D(["radio-custom",S(s,a,"false",d.correctAnswer)])},null,2)])])]))),128))])])])):l.taskID==="multiple_choice"?(r(),n("div",pe,[(r(!0),n(g,null,y(l.questions,(d,a)=>(r(),n("div",{key:a,class:"question-container"},[e("p",fe,c(a+1)+") "+c(d.text),1),e("div",me,[(r(!0),n(g,null,y(d.options,(k,b)=>(r(),n("label",{key:b,class:D(["option-label",[$(s,a,b,d.correctAnswer),v.value[s][a]===b&&!_.value[s]?"option-selected":""]])},[A(e("input",{type:"radio",name:"task"+s+"q"+a,value:b,"onUpdate:modelValue":z=>v.value[s][a]=z,class:"option-input"},null,8,he),[[E,v.value[s][a]]]),e("span",ke,c(b)+" : "+c(k),1)],2))),128))])]))),128))])):f("",!0),e("div",be,[e("div",ge,[l.textScript?(r(),n("button",{key:0,class:"toggle-script-btn",onClick:d=>M(s)},c(w.value===s?"\u0421\u043A\u0440\u044B\u0442\u044C \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438"),9,ye)):f("",!0),e("div",{class:D(["score-display",[{"score-visible":_.value[s]},_.value[s]?T(h.value[s]).class:""]])},c(_.value[s]?`${h.value[s]}% (${T(h.value[s]).letter})`:""),3),e("button",{class:"check-button",onClick:d=>W(s)}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C ",8,we)]),w.value===s?(r(),n("div",Ce,[e("p",null,c(l.textScript),1)])):f("",!0),e("div",De,[e("button",{class:"nav-button prev-button",onClick:V,disabled:p.value===0}," \u2190 ",8,Ae),e("button",{class:"nav-button next-button",onClick:N,disabled:p.value===u.value.tasks.length-1}," \u2192 ",8,Ee)])])],4)}),128))])):f("",!0)}};var Fe=Y(Le,[["__scopeId","data-v-bf6eb11e"]]);export{Fe as default};
