import{b as u,y as D,d as K,E as Q,o as p,f as m,h as n,x as A,F as R,q as U,l as C,n as w,t as h,j as f,v as W,s as ee,m as x,H as q}from"./index.b9e1b7ad.js";import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";const ae={class:"weather-generator"},ne={key:1,class:"precipitation-layer"},le={key:2,class:"fog-layer"},oe={class:"panel-content"},ie={class:"mode-toggle"},se={class:"layers-control"},re={class:"slider-group opacity-slider"},ue={class:"opacity-value"},de={class:"toggle-switch"},ve={key:0,class:"toggle-switch"},pe={class:"slider-group"},me={class:"slider-group"},ce={class:"slider-group"},he={class:"slider-group"},fe={class:"stats"},ye={__name:"rain",setup(ge){const r=u(80),s=u(0),l=u(1.5),o=u(1),i=u(!1),M=u(!0),g=u(1),c=u({precipitation:!0,fog:!1}),y=u([]);let O=0,k=null,b=null;const I=(t=!1)=>{const e=Math.random();let a;e<.3?a=.3:e<.7?a=.6:a=.9;const d=(.8+Math.random()*1.5)*l.value,v=1+Math.random()*1.5;return{id:O++,x:Math.random()*100,y:t?Math.random()*100:-5,size:d,speed:(1.5+Math.random()*3)*o.value*(.8+v*.2),opacity:a,length:15+Math.random()*35*v,windShift:(Math.random()-.5)*10,tiltOffset:(Math.random()-.5)*5}},P=(t=!1)=>({id:O++,x:Math.random()*100,y:t?Math.random()*100:-2,size:(1+Math.random()*2.5)*l.value,speed:(.5+Math.random()*1.5)*o.value,opacity:.4+Math.random()*.4,windShift:(Math.random()-.5)*15,rotation:Math.random()*360,drift:.5+Math.random()*1.5,driftSpeed:.5+Math.random()*1,phase:Math.random()*Math.PI*2}),S=u([]);let T=0;const B=()=>{const t=Math.random();let e,a,d,v;return t<.2?(e=1+Math.random()*1,a=.15+Math.random()*.2,d=2+Math.random()*3,v=.3+Math.random()*.3):t<.6?(e=1.5+Math.random()*1.5,a=.3+Math.random()*.3,d=1.5+Math.random()*2,v=.4+Math.random()*.4):(e=2+Math.random()*2,a=.5+Math.random()*.4,d=1+Math.random()*1.5,v=.5+Math.random()*.5),{id:T++,x:Math.random()*100,y:Math.random()*100,size:e,baseOpacity:a,twinkleSpeed:d,twinklePhase:Math.random()*Math.PI*2,twinkleAmplitude:v,color:Math.random()>.8?Math.random()>.5?"#fff9e6":"#e6f0ff":"white",glowSize:e*(2+Math.random()*2)}},H=(t=150)=>{const e=[];for(let a=0;a<t;a++)e.push(B());S.value=e},F=()=>{if(g.value<=0){b=requestAnimationFrame(F);return}const t=Date.now()/1e3;S.value=S.value.map(e=>{const a=Math.sin(t*e.twinkleSpeed+e.twinklePhase),d=Math.max(.1,e.baseOpacity-e.twinkleAmplitude),v=Math.min(1,e.baseOpacity+e.twinkleAmplitude),J=d+(a+1)*.5*(v-d);return{...e,currentOpacity:J}}),b=requestAnimationFrame(F)},L=t=>({left:`${t.x}%`,top:`${t.y}%`,width:`${t.size}px`,height:`${t.size}px`,backgroundColor:t.color,borderRadius:"50%",boxShadow:`0 0 ${t.glowSize}px ${t.color}`,opacity:t.currentOpacity||t.baseOpacity,transform:"translateZ(0)",willChange:"opacity",transition:"box-shadow 0.2s ease",position:"absolute"}),_=()=>{const t=[],e=i.value?P:I;for(let a=0;a<r.value;a++)t.push(e(!0));y.value=t},V=()=>{y.value=y.value.map(t=>{if(i.value){let e=t.y+t.speed*.15,a=t.x+s.value*.02+t.windShift*.01;return a+=Math.sin(Date.now()*.002*t.driftSpeed+t.phase)*.1*t.drift,e>110&&(e=-5,a=Math.random()*100),a<-5&&(a=105),a>105&&(a=-5),{...t,y:e,x:a,rotation:t.rotation+.5}}else{let e=t.y+t.speed*.4,a=t.x-s.value*.03;return a+=t.windShift*.005,e>110&&(e=-5,a=Math.random()*100),a<-5&&(a=105),a>105&&(a=-5),{...t,y:e,x:a}}}),k=requestAnimationFrame(V)},N=t=>{if(i.value)return{left:`${t.x}%`,top:`${t.y}%`,width:`${t.size*2}px`,height:`${t.size*2}px`,opacity:t.opacity,background:"white",borderRadius:"50%",boxShadow:"0 0 15px rgba(255, 255, 255, 0.5)",transform:`rotate(${t.rotation}deg) translateZ(0)`,filter:"blur(1px)",willChange:"transform, top, left",position:"absolute"};{const e=s.value+(t.tiltOffset||0);return{left:`${t.x}%`,top:`${t.y}%`,width:`${t.size}px`,height:`${t.length}px`,opacity:t.opacity,background:`linear-gradient(to bottom,
        rgba(200, 220, 255, 0.1) 0%,
        rgba(140, 180, 255, ${t.opacity*.4}) 30%,
        rgba(140, 180, 255, ${t.opacity*.8}) 70%,
        rgba(200, 220, 255, ${t.opacity}) 100%)`,borderRadius:"50% 50% 0 0",boxShadow:t.opacity>.7?"0 2px 8px rgba(140, 180, 255, 0.4)":"none",transform:`rotate(${e}deg) translateZ(0)`,filter:"blur(0.3px)",willChange:"transform, top, left",position:"absolute"}}},$=()=>{i.value=!1,c.value.fog=!1,_()},z=()=>{i.value=!0,c.value.fog=!0,_()},Z=()=>{$(),r.value=40,s.value=0,l.value=1,o.value=.8},E=()=>{$(),r.value=80,s.value=5,l.value=1.5,o.value=1},X=()=>{$(),r.value=150,s.value=-5,l.value=2,o.value=1.3},Y=()=>{z(),r.value=30,s.value=0,l.value=2,o.value=.5},j=()=>{z(),r.value=60,s.value=3,l.value=2.5,o.value=.8},G=()=>{z(),r.value=100,s.value=-8,l.value=3,o.value=1.2};return D([r,i],()=>{_()}),D([l,o],()=>{y.value=y.value.map(t=>{if(i.value)return{...t,size:(1+Math.random()*2.5)*l.value,speed:(.5+Math.random()*1.5)*o.value};{const e=(.8+Math.random()*1.5)*l.value,a=1+Math.random()*1.5;return{...t,size:e,length:15+Math.random()*35*a,speed:(1.5+Math.random()*3)*o.value*(.8+a*.2),tiltOffset:(Math.random()-.5)*5}}})}),K(()=>{H(150),_(),k=requestAnimationFrame(V),b=requestAnimationFrame(F)}),Q(()=>{k&&cancelAnimationFrame(k),b&&cancelAnimationFrame(b)}),(t,e)=>(p(),m("div",ae,[n("div",{class:w(["weather-scene",{"snow-mode":i.value}])},[g.value>0?(p(),m("div",{key:0,class:"stars-layer",style:A({opacity:g.value})},[(p(!0),m(R,null,U(S.value,a=>(p(),m("div",{key:a.id,class:"star",style:A(L(a))},null,4))),128))],4)):C("",!0),c.value.precipitation?(p(),m("div",ne,[(p(!0),m(R,null,U(y.value,a=>(p(),m("div",{key:a.id,class:w(["precipitation-drop",{"snow-flake":i.value}]),style:A(N(a))},null,6))),128))])):C("",!0),i.value&&c.value.fog?(p(),m("div",le)):C("",!0)],2),n("div",{class:w(["control-panel",{"panel-hidden":!M.value}])},[n("button",{class:"toggle-panel",onClick:e[0]||(e[0]=a=>M.value=!M.value)},h(M.value?"\u25C0":"\u25B6"),1),f(n("div",oe,[e[13]||(e[13]=n("h3",null,"\u0421\u043E\u0437\u0434\u0430\u0439 \u0441\u0432\u043E\u044E \u043F\u043E\u0433\u043E\u0434\u0443",-1)),n("div",ie,[n("button",{onClick:$,class:w({active:!i.value})}," \u{1F327} \u0414\u043E\u0436\u0434\u044C ",2),n("button",{onClick:z,class:w({active:i.value})}," \u{1F328} \u0421\u043D\u0435\u0433 ",2)]),n("div",se,[e[11]||(e[11]=n("h4",null,"\u0421\u043B\u043E\u0438:",-1)),n("div",re,[n("label",null,[e[8]||(e[8]=ee("\u2B50 \u0417\u0432\u0435\u0437\u0434\u044B ")),n("span",ue,h(Math.round(g.value*100))+"%",1)]),f(n("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),min:"0",max:"1",step:"0.01",class:"opacity-range"},null,512),[[x,g.value,void 0,{number:!0}]])]),n("label",de,[f(n("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>c.value.precipitation=a)},null,512),[[q,c.value.precipitation]]),e[9]||(e[9]=n("span",{class:"toggle-label"},"\u{1F327} \u041E\u0441\u0430\u0434\u043A\u0438",-1))]),i.value?(p(),m("label",ve,[f(n("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>c.value.fog=a)},null,512),[[q,c.value.fog]]),e[10]||(e[10]=n("span",{class:"toggle-label"},"\u{1F32B} \u0422\u0443\u043C\u0430\u043D",-1))])):C("",!0)]),n("div",pe,[n("label",null,"\u0418\u043D\u0442\u0435\u043D\u0441\u0438\u0432\u043D\u043E\u0441\u0442\u044C: "+h(r.value),1),f(n("input",{type:"range","onUpdate:modelValue":e[4]||(e[4]=a=>r.value=a),min:"20",max:"200",step:"1"},null,512),[[x,r.value,void 0,{number:!0}]])]),n("div",me,[n("label",null,"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: "+h(o.value.toFixed(1))+"x",1),f(n("input",{type:"range","onUpdate:modelValue":e[5]||(e[5]=a=>o.value=a),min:"0.3",max:"2.5",step:"0.1"},null,512),[[x,o.value,void 0,{number:!0}]])]),n("div",ce,[n("label",null,"\u0412\u0435\u0442\u0435\u0440: "+h(s.value)+"\xB0",1),f(n("input",{type:"range","onUpdate:modelValue":e[6]||(e[6]=a=>s.value=a),min:"-45",max:"45",step:"1"},null,512),[[x,s.value,void 0,{number:!0}]])]),n("div",he,[n("label",null,"\u0420\u0430\u0437\u043C\u0435\u0440: "+h(l.value.toFixed(1)),1),f(n("input",{type:"range","onUpdate:modelValue":e[7]||(e[7]=a=>l.value=a),min:"0.5",max:"3.5",step:"0.1"},null,512),[[x,l.value,void 0,{number:!0}]])]),n("div",{class:"presets"},[e[12]||(e[12]=n("h4",null,"\u041F\u0440\u0435\u0441\u0435\u0442\u044B:",-1)),n("div",{class:"preset-buttons"},[n("button",{onClick:Z},"\u{1F327} \u041B\u0435\u0433\u043A\u0438\u0439"),n("button",{onClick:E},"\u{1F327} \u0421\u0440\u0435\u0434\u043D\u0438\u0439"),n("button",{onClick:X},"\u{1F327} \u041B\u0438\u0432\u0435\u043D\u044C"),n("button",{onClick:Y},"\u{1F328} \u041B\u0435\u0433\u043A\u0438\u0439"),n("button",{onClick:j},"\u{1F328} \u0421\u0440\u0435\u0434\u043D\u0438\u0439"),n("button",{onClick:G},"\u{1F328} \u041C\u0435\u0442\u0435\u043B\u044C")])]),n("div",fe,[n("span",null,"\u0427\u0430\u0441\u0442\u0438\u0446: "+h(y.value.length),1),n("span",null,"\u0420\u0435\u0436\u0438\u043C: "+h(i.value?"\u0421\u043D\u0435\u0433":"\u0414\u043E\u0436\u0434\u044C"),1)])],512),[[W,M.value]])],2)]))}};var we=te(ye,[["__scopeId","data-v-836a23d4"]]);export{we as default};
