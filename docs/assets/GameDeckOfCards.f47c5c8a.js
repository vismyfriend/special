import{_ as V}from"./nextCard.51641b46.js";import{p as Q,u as Z,b as s,i as I,E as j,d as H,o as m,f,h as e,t as r,l as T,n as M,F as J,q as X,x as $}from"./index.b9e1b7ad.js";import{q as Y}from"./questions-data.22f0f768.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";const ae={key:0,class:"game-container"},te={key:0,class:"modal-overlay"},se={class:"modal-content"},le={class:"side-buttons"},ne=["disabled"],oe={class:"deck-of-cards"},re={class:"card-content"},ue={class:"card-text"},ie={class:"word"},ce={class:"language-switcher-container"},ve={class:"timer-text"},de={class:"remaining-cards",ref:"remainingCardsContainer"},_e={class:"card-content"},me={class:"card-text"},fe={class:"word"},ge={class:"translation"},he={__name:"GameDeckOfCards",setup(pe){Q();const E=Z();/iPhone|iPad|iPod/i.test(navigator.userAgent);const k=s([]),a=s(null);let c=[];const g=s([]),l=s(0);s(!1);const u=s("en"),G=()=>{u.value=u.value==="en"?"ru":"en"},N=I(()=>a.value?u.value==="en"?a.value.eng:a.value.ru:""),B=I(()=>a.value?u.value==="en"?a.value.ru:a.value.eng:""),C=s(!1),D=s(""),L=t=>{D.value=t,C.value=!0},O=()=>{C.value=!1},v=s(!1);let y=null;const W=()=>{y&&clearTimeout(y),v.value=!0,y=setTimeout(()=>{v.value=!1},8e3)},w=s(!1),q=()=>{w.value=!0,p(),setTimeout(()=>{w.value=!1},300)},n=s(null),o=s(0),d=s(!1),z=()=>{if(d.value){clearInterval(n.value),n.value=null,o.value=0,d.value=!1,l.value=0;return}l.value=0,p(),o.value=77,d.value=!0,n.value=setInterval(()=>{!d.value||(o.value-=1,o.value<=0&&(clearInterval(n.value),n.value=null,d.value=!1,o.value=0,L(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.

\u0412\u044B \u043F\u0435\u0440\u0435\u0432\u0435\u043B\u0438 ${l.value} \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u2728`),l.value=0))},1e3)},A=t=>t.sort(()=>Math.random()-.5);let h=!1;const p=async()=>{if(h)return;if(h=!0,a.value&&!a.value.isIntro&&l.value++,c.length===1){U(),h=!1;return}a.value&&!a.value.isIntro&&(v.value=!0,await new Promise(_=>setTimeout(_,500)),g.value.push(a.value));const t=c.pop();a.value=t,v.value=!1,h=!1},P=()=>{if(g.value.length===0)return;const t=g.value.pop();a.value&&c.push(a.value),a.value=t},U=()=>{L(`\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.

\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043D\u043E: ${l.value} \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u{1F3AF}`),l.value=0},b=I(()=>c),R=t=>{const i=t*4,F=10*Math.cos(i*Math.PI/180),K=10*Math.sin(i*Math.PI/180);return{"--x":`${F}px`,"--y":`${K}px`,"--angle":`${i}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:t}},S=t=>{t.key==="ArrowDown"?p():t.key==="ArrowUp"&&P()};return j(()=>{clearInterval(n.value),n.value=null,window.removeEventListener("keydown",S)}),H(()=>{const t=E.params.missionName;k.value=Y[t]||[],c=A([...k.value]),a.value={ru:"\u043D\u0430\u0436\u0438\u043C\u0430\u0439 \u043D\u0430 \u043A\u043E\u043B\u043E\u0434\u0443",eng:"Click the deck",isIntro:!0},window.addEventListener("keydown",S)}),(t,_)=>k.value.length?(m(),f("div",ae,[C.value?(m(),f("div",te,[e("div",se,[e("p",null,r(D.value),1),e("button",{onClick:O},"OK")])])):T("",!0),e("div",le,[e("button",{onClick:P,class:"game-btn",disabled:g.value.length===0}," Ctrl + Z ",8,ne)]),e("div",oe,[e("div",{class:"wordCard",onClick:W},[e("div",re,[e("div",ue,[e("div",ie,r(N.value),1),e("div",{class:M(["translation",{blurred:!v.value&&!a.value.isIntro}])},r(B.value),3)])])]),e("div",ce,[e("button",{class:M(["lang-switcher-btn",{"lang-switcher-active":u.value==="ru"}]),onClick:G},r(u.value==="en"?"EN":"RU"),3),e("div",{class:"timer-block",onClick:z,role:"button"},[e("span",ve,r(o.value>0?`${o.value} seconds`:"Start"),1)])]),e("div",de,[(m(!0),f(J,null,X(b.value,(x,i)=>(m(),f("div",{class:"remaining-card",onClick:p,key:i,style:$(R(i)),role:"button"},[e("div",_e,[e("div",me,[e("div",fe,r(x.eng),1),e("div",ge,r(x.ru),1)])])],4))),128)),b.value.length>0?(m(),f("div",{key:0,class:M(["card-back-cover",{tapped:w.value}]),style:$(R(b.value.length-1)),onClick:q},_[0]||(_[0]=[e("img",{src:V,alt:"Card Back",role:"button"},null,-1)]),6)):T("",!0)],512)])])):T("",!0)}};var be=ee(he,[["__scopeId","data-v-5b2c60ee"]]);export{be as default};
