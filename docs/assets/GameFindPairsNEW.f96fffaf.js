import{p as B,u as R,r as a,f as z,C as I,o as L,b as u,c,e as f,s as D,t as g,j as N,F as M,q as Q,n as V}from"./index.4aa8e4f7.js";import{s as $}from"./short-words-data.69ed1a1d.js";import{u as j}from"./example-store.bc71481c.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";const J={class:"progress-container"},K={key:0,class:"progress-text"},O={key:0,class:"game-container"},U={class:"wordCard"},X={class:"answers-container"},Y=["onClick"],Z={__name:"GameFindPairsNEW",setup(ee){const W=B(),E=R(),w=j(),y=a(),o=a([]),h=a({}),p=a([]),i=a(null),l=a(!1),v=a(0),d=a([]),S=a(12),A=a(0),n=a(0),T=e=>{const s=()=>{const t=e-n.value;Math.abs(t)>1?(n.value+=Math.sign(t),requestAnimationFrame(s)):n.value=e};requestAnimationFrame(s)},b=z(()=>`${n.value}%`);I(A,e=>{const s=Math.round(e/S.value*100);T(s)});let k=null,m=[];const F=e=>e.sort(()=>Math.random()-.5),P=()=>{if(m.length===0){console.error("\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u0433\u0440\u044B.");return}if(v.value>=m.length){G();return}const e=m[v.value];h.value=e;const s=e.eng;p.value=q(s),i.value=null,l.value=!1,d.value=Array(p.value.length).fill(!1)},q=e=>{const s=o.value.map(_=>_.eng),t=[...new Set(s)];if(t.length<4)return t;const r=t.filter(_=>_!==e).slice(0,3);return r.push(e),F(r)};let C=0;const x=(e,s)=>{i.value=e;const t=h.value.eng;l.value=e===t,l.value?(A.value++,setTimeout(()=>{v.value++,v.value<o.value.length?P():G()},800)):(C+=1,d.value[s]=!0,setTimeout(()=>{},500))},G=()=>{const s=Date.now()-k;w.setLastGameResults(s,C),w.setGameName("FindPairsEasy"),W.push("/leader-board/")};return L(()=>{y.value=E.params.missionName,o.value=$[y.value]||[],m=F([...o.value]).slice(0,12),k=Date.now(),P()}),(e,s)=>(u(),c(M,null,[f("div",J,[f("div",{class:"progress-bar",style:D({width:b.value})},null,4),n.value>0?(u(),c("div",K,g(n.value)+"%",1)):N("",!0)]),o.value?(u(),c("div",O,[f("div",U,g(h.value.ru),1),f("div",X,[(u(!0),c(M,null,Q(p.value,(t,r)=>(u(),c("div",{class:V(["wordCard",{active:i.value===t&&!l.value,correct:l.value&&i.value===t,fade:d.value[r]}]),key:r,onClick:_=>x(t,r),style:D({opacity:d.value[r]?0:1})},g(t),15,Y))),128))])])):N("",!0)],64))}};var ne=H(Z,[["__scopeId","data-v-0052785d"]]);export{ne as default};
