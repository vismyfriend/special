import{u as z,r as n,o as F,G as R,b as d,c as m,e,j as k,t as l,i as V,F as j}from"./index.290d3acc.js";import{q as A}from"./questions-data.e4548d5f.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";const K={key:0,class:"modal-overlay"},U={key:1,class:"game-container"},J={key:0,class:"modal-overlay"},Q={class:"modal-content"},X={class:"word"},Y={class:"translation"},Z={class:"counter-row"},ee=1e3,te={__name:"GameExplainTheWord",setup(ne){const T=z(),M=/iPhone|iPad|iPod/i.test(navigator.userAgent),g=n([]),p=n([]),E=n([]),o=n({}),r=n(!1),f=n(""),i=n(0),w=n(!1),_=n(null),C=n(!0),u=n(!1),y=n(0),D=n(0),N=()=>{r.value=!1},x=t=>{f.value=`${t}

Next: ${y.value} \u0440\u0430\u0437
Skip: ${D.value} \u0440\u0430\u0437`,r.value=!0},S=()=>{y.value+=1,h()},I=()=>{D.value+=1,h()},W=()=>{b()},P=t=>t.sort(()=>Math.random()-.5),h=()=>{if(p.value.length===0){x("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}o.value&&!o.value.isIntro&&E.value.push(o.value),o.value=p.value.pop()},b=()=>{E.value.length!==0&&(o.value&&p.value.push(o.value),o.value=E.value.pop())},q=()=>{if(w.value){clearInterval(_.value),i.value=0,w.value=!1;return}h(),i.value=10,w.value=!0,_.value=setInterval(()=>{i.value-=1,i.value<=0&&(clearInterval(_.value),w.value=!1,x("\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!"))},1e3)},L=n("portrait"),v=()=>{L.value=window.innerWidth>window.innerHeight?"landscape":"portrait"};let O=0;const c=t=>{const a=Date.now();if(a-O<ee)return;v();let s=0;L.value==="portrait"?s=t.beta:s=-t.gamma,s>30&&(h(),O=a),s<-30&&(b(),O=a)},B=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(t=>{t==="granted"&&(window.addEventListener("deviceorientation",c),u.value=!0)}):(window.addEventListener("deviceorientation",c),u.value=!0))},G=()=>{C.value=!1},$=async()=>{if(C.value=!1,v(),window.DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&(window.addEventListener("deviceorientation",c),u.value=!0,f.value=`\u2705 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,r.value=!0)}catch(t){console.warn("Permission denied",t)}else window.addEventListener("deviceorientation",c),u.value=!0,f.value=`\u2705 \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,r.value=!0};return F(()=>{const t=T.params.missionName;g.value=A[t]||[],p.value=P([...g.value]),o.value={ru:"\u041E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},v(),window.addEventListener("resize",v)}),R(()=>{clearInterval(_.value),window.removeEventListener("deviceorientation",c),window.removeEventListener("resize",v)}),(t,a)=>(d(),m(j,null,[C.value?(d(),m("div",K,[e("div",{class:"modal-content"},[a[1]||(a[1]=e("p",null,"\u0412\u044B \u0438\u0433\u0440\u0430\u0435\u0442\u0435 \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043B\u0438 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430?",-1)),e("button",{onClick:$},"\u{1F4F1} \u0421 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E"),e("button",{onClick:G},"\u{1F4BB} \u0421 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430")])])):k("",!0),g.value.length?(d(),m("div",U,[r.value?(d(),m("div",J,[e("div",Q,[e("p",null,l(f.value),1),e("button",{onClick:N},"OK")])])):k("",!0),e("div",{class:"word-card",onClick:a[0]||(a[0]=(...s)=>t.toggleTranslation&&t.toggleTranslation(...s))},[e("div",X,l(o.value.eng),1),e("div",Y,l(o.value.ru),1)]),e("div",{class:"timer",onClick:q},l(i.value>0?`${i.value} \u0441\u0435\u043A`:"\u0421\u0442\u0430\u0440\u0442"),1),e("div",{class:"button-row"},[e("button",{onClick:W},"\u2190 Back"),e("button",{onClick:S},"\u2192 Next"),e("button",{onClick:I},"\u23ED Skip")]),e("div",Z,[e("span",null,"Next: "+l(y.value),1),e("span",null,"Skip: "+l(D.value),1)]),!u.value&&V(M)?(d(),m("button",{key:1,onClick:B}," \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):k("",!0)])):k("",!0)],64))}};var se=H(te,[["__scopeId","data-v-6df14c18"]]);export{se as default};
