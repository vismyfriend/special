import{_ as ce}from"./wiresPic.9de30a4c.js";import{p as ie,u as ve,r as l,f as de,C as D,o as me,b as h,c as g,e as c,F as I,q as j,s as Q,t as k,E as $,n as fe,j as q}from"./index.90379313.js";import{u as he}from"./example-store.e9a7165c.js";import{s as ge}from"./short-words-data.502c6366.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";const _e={class:"progress-container"},ye={class:"progress-bar"},we={class:"game-visual-wrapper"},ke={class:"game-container"},Ce={class:"answers-container"},be=["onClick"],Ae={class:"textOnCard"},Le={key:0,class:"hint"},Me={key:0,class:"error-text"},Re=["data-is-word"],Te={__name:"GameFindPairsWires",setup(Pe){const H=ie(),J=ve(),W=he(),L=l(),F=l([]),_=l({}),M=l([]),R=l(null),C=l(!1),d=l(0),T=l([]),N=l(0),K=l(0),x=l(0),y=l(0),p=l([]),m=l(null),i=l([]),B=l(null),w=l([]),f=l([]);de(()=>`${y.value}%`);const U=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},Z=t=>{const a=y.value,s=performance.now(),r=o=>{const v=o-s,n=Math.min(v/500,1);y.value=a+(t-a)*n,n<1&&requestAnimationFrame(r)};requestAnimationFrame(r)};D([x,f],([t,e])=>{const a=e.length;if(a===0){y.value=0;return}const s=t/a*100;Z(Math.min(s,100))},{immediate:!0});const P=l([]),O=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],E=["YES!","Great","Awesome","Super","Correct"],b=l([]),ee=()=>{const t=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return t[Math.floor(Math.random()*t.length)]},G=()=>{if(!m.value||!B.value||i.value.length===0)return;const t=B.value;t.innerHTML="";const e=t.getBoundingClientRect(),a=m.value.getBoundingClientRect();i.value.forEach(s=>{if(!s)return;const r=s.getBoundingClientRect(),o=a.right-a.width/4-e.left,v=a.top+a.height/2-e.top,n=r.left+r.width/4-e.left,A=r.top+r.height/2-e.top,u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1",o),u.setAttribute("y1",v),u.setAttribute("x2",n),u.setAttribute("y2",A),u.setAttribute("stroke",ee()),u.setAttribute("stroke-width","3"),u.setAttribute("stroke-linecap","round"),t.appendChild(u)})};D(_,async()=>{await $(),G()}),D(()=>M.value,async()=>{await $(),G()});const Y=t=>t.sort(()=>Math.random()-.5),te=t=>{const e=F.value,a=e.find(n=>n.eng===t),s=e.filter(n=>n.eng!==t),v=[...Array.from(new Set(s.map(n=>n.eng))).map(n=>s.find(A=>A.eng===n)).slice(0,3),a];return Y(v)},z=async()=>{if(d.value>=f.value.length&&w.value.length===0){ae();return}d.value>=f.value.length&&w.value.length>0&&(f.value=[...f.value,...w.value],w.value=[]);const t=f.value[d.value];_.value=t;const e=t.eng;M.value=te(e),R.value=null,C.value=!1,T.value=Array(M.value.length).fill(!1),await $(),G()};let S=[],V=0;const se=(t,e)=>{R.value=t;const a=_.value.eng;C.value=t===a;const s=!p.value[d.value]&&p.value[d.value]!==!1;if(C.value){s?p.value[d.value]=!0:p.value[d.value]=!1,x.value++;const r=Math.random()>.5;b.value[e]=r?E[Math.floor(Math.random()*E.length)]:t,i.value[e]&&i.value[e].classList.add("correct-pulse"),m.value&&(m.value.classList.remove("pulsing"),m.value.classList.add("correct-pulse")),setTimeout(()=>{b.value[e]=""},1200),setTimeout(()=>{i.value[e]&&i.value[e].classList.remove("correct-pulse"),m.value&&(m.value.classList.remove("correct-pulse"),m.value.classList.add("pulsing"))},1200),setTimeout(()=>{d.value++,z()},800)}else s&&(p.value[d.value]=!1),w.value.some(o=>o.ru===_.value.ru)||w.value.push(_.value),i.value.forEach(o=>{o&&o.classList.add("shake")}),i.value.forEach(o=>{if(!o)return;const v=i.value[e].getBoundingClientRect(),n=v.left+v.width/2,A=v.top+v.height/2,u=o.getBoundingClientRect(),oe=u.left+u.width/2,le=u.top+u.height/2,re=(oe-n)*.6,ne=(le-A)*.6,ue=(Math.random()-.5)*20;o.style.setProperty("--dx",`${re}px`),o.style.setProperty("--dy",`${ne}px`),o.style.setProperty("--angle",`${ue}deg`),o.classList.add("explode"),o.classList.add("shake"),setTimeout(()=>{o.classList.remove("explode"),o.classList.remove("shake")},600)}),setTimeout(()=>{i.value.forEach(o=>{o&&o.classList.remove("shake")})},500),V+=1,P.value[e]=O[Math.floor(Math.random()*O.length)],T.value[e]=!0,setTimeout(()=>{P.value[e]=""},1500)},ae=()=>{const t=Date.now()-X;W.setLastGameResults(t,V),W.setGameName("FindPairsEasy"),W.setWordSet(L.value),H.push("/leader-board/")};let X=null;return me(()=>{L.value=J.params.missionName,F.value=ge[L.value]||[],console.log(L.value),S=Y([...F.value]).slice(0,12),N.value=S.length,K.value=N.value,f.value=[...S],X=Date.now(),z(),p.value=Array(f.value.length).fill(null)}),(t,e)=>(h(),g(I,null,[c("div",_e,[c("div",ye,[(h(!0),g(I,null,j(p.value,(a,s)=>(h(),g("div",{key:s,class:"progress-segment",style:Q({width:`${100/f.value.length}%`,"background-color":a===!0?"#34aefa":a===!1?"#f36f78":"transparent"})},null,4))),128))]),c("div",{class:"progress-text",style:Q({opacity:y.value>75?0:1})},k(Math.round(y.value))+"% ",5)]),c("div",we,[(h(),g("svg",{class:"lines-overlay",ref_key:"svgLines",ref:B,style:{width:"100%",height:"100%"}},null,512)),c("div",ke,[c("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:m},k(_.value.ru),513),c("div",Ce,[(h(!0),g(I,null,j(M.value,(a,s)=>(h(),g("div",{key:s,style:{position:"relative"}},[c("div",{class:fe(["wordCard",{active:R.value===a.eng&&!C.value,correct:C.value&&R.value===a.eng,fade:T.value[s]}]),onClick:r=>se(a.eng,s),ref_for:!0,ref:r=>i.value[s]=r,style:Q({opacity:T.value[s]?0:1})},[c("div",null,[c("div",Ae,k(a.eng),1),a.hint?(h(),g("div",Le,k(a.hint),1)):q("",!0)])],14,be),P.value[s]?(h(),g("div",Me,k(P.value[s]),1)):q("",!0),b.value[s]?(h(),g("div",{key:1,class:"positive-text","data-is-word":!E.includes(b.value[s])},k(b.value[s]),9,Re)):q("",!0)]))),128))])])]),c("div",{class:"image-container"},[e[0]||(e[0]=c("img",{src:ce,alt:"Wire Cutter",class:"cutter-image"},null,-1)),c("button",{class:"action-button",onClick:U},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Se=pe(Te,[["__scopeId","data-v-7b9c383c"]]);export{Se as default};
