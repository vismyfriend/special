import{p as ee,u as te,r,f as se,C as x,o as ae,b as d,c as v,e as c,s as $,t as w,j as q,F as z,q as oe,E as B,n as re}from"./index.7ec98dab.js";import{u as ne}from"./example-store.a8d08e05.js";import{s as le}from"./short-words-data.d4fc36e7.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";const ie={class:"progress-container"},ue={key:0,class:"progress-text"},de={class:"game-visual-wrapper"},ve={class:"game-container"},he={class:"answers-container"},fe=["onClick"],me={key:0,class:"error-text"},ge={__name:"GameFindPairsWires",setup(pe){const I=ee(),Q=te(),F=ne(),W=r(),k=r([]),f=r({}),m=r([]),g=r(null),h=r(!1),A=r(0),p=r([]),V=r(12),E=r(0),i=r(0),C=r(null),l=r([]),b=r(null),X=se(()=>`${i.value}%`),Y=t=>{const s=()=>{const a=t-i.value;Math.abs(a)>1?(i.value+=Math.sign(a),requestAnimationFrame(s)):i.value=t};requestAnimationFrame(s)};x(E,t=>{const s=Math.round(t/V.value*100);Y(s)});const _=r([]),G=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],j=()=>{const t=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return t[Math.floor(Math.random()*t.length)]},R=()=>{if(!C.value||!b.value||l.value.length===0)return;const t=b.value;t.innerHTML="";const s=t.getBoundingClientRect(),a=C.value.getBoundingClientRect();l.value.forEach(e=>{if(!e)return;const o=e.getBoundingClientRect(),L=a.right-a.width/4-s.left,M=a.top+a.height/2-s.top,u=o.left+o.width/4-s.left,P=o.top+o.height/2-s.top,n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",L),n.setAttribute("y1",M),n.setAttribute("x2",u),n.setAttribute("y2",P),n.setAttribute("stroke",j()),n.setAttribute("stroke-width","3"),n.setAttribute("stroke-linecap","round"),t.appendChild(n)})};x(f,async()=>{await B(),R()}),x(()=>m.value,async()=>{await B(),R()});const T=t=>t.sort(()=>Math.random()-.5),H=t=>{const s=k.value.map(o=>o.eng),a=[...new Set(s)];if(a.length<4)return a;const e=a.filter(o=>o!==t).slice(0,3);return e.push(t),T(e)},D=async()=>{if(y.length===0||A.value>=y.length){K();return}const t=y[A.value];f.value=t;const s=t.eng;m.value=H(s),g.value=null,h.value=!1,p.value=Array(m.value.length).fill(!1),await B(),R()};let y=[],S=0;const J=(t,s)=>{g.value=t;const a=f.value.eng;h.value=t===a,h.value?(E.value++,setTimeout(()=>{A.value++,D()},800)):(l.value.forEach(e=>{e&&e.classList.add("shake")}),l.value.forEach(e=>{if(!e)return;const o=l.value[s].getBoundingClientRect(),L=o.left+o.width/2,M=o.top+o.height/2,u=e.getBoundingClientRect(),P=u.left+u.width/2,n=u.top+u.height/2,O=(P-L)*.6,U=(n-M)*.6,Z=(Math.random()-.5)*20;e.style.setProperty("--dx",`${O}px`),e.style.setProperty("--dy",`${U}px`),e.style.setProperty("--angle",`${Z}deg`),e.classList.add("explode"),e.classList.add("shake"),setTimeout(()=>{e.classList.remove("explode"),e.classList.remove("shake")},600)}),setTimeout(()=>{l.value.forEach(e=>{e&&e.classList.remove("shake")})},500),S+=1,_.value[s]=G[Math.floor(Math.random()*G.length)],p.value[s]=!0,setTimeout(()=>{_.value[s]=""},1500))},K=()=>{const t=Date.now()-N;F.setLastGameResults(t,S),F.setGameName("FindPairsEasy"),I.push("/leader-board/")};let N=null;return ae(()=>{W.value=Q.params.missionName,k.value=le[W.value]||[],y=T([...k.value]).slice(0,12),N=Date.now(),D()}),(t,s)=>(d(),v(z,null,[c("div",ie,[c("div",{class:"progress-bar",style:$({width:X.value})},null,4),i.value>0?(d(),v("div",ue,w(i.value)+"%",1)):q("",!0)]),c("div",de,[(d(),v("svg",{class:"lines-overlay",ref_key:"svgLines",ref:b,style:{width:"100%",height:"100%"}},null,512)),c("div",ve,[c("div",{class:"wordCard main-word",ref_key:"leftWord",ref:C},w(f.value.ru),513),c("div",he,[(d(!0),v(z,null,oe(m.value,(a,e)=>(d(),v("div",{key:e,style:{position:"relative"}},[c("div",{class:re(["wordCard",{active:g.value===a&&!h.value,correct:h.value&&g.value===a,fade:p.value[e]}]),onClick:o=>J(a,e),ref_for:!0,ref:o=>l.value[e]=o,style:$({opacity:p.value[e]?0:1})},w(a),15,fe),_.value[e]?(d(),v("div",me,w(_.value[e]),1)):q("",!0)]))),128))])])])],64))}};var Ae=ce(ge,[["__scopeId","data-v-4791e9e2"]]);export{Ae as default};
