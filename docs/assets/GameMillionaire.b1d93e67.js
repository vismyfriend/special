import{p as pe,u as ge,b as l,i as ae,E as _e,d as Me,o as u,f as d,h as a,F as z,q as U,s as Q,t as v,l as y,z as $,x as te,D as be,n as oe}from"./index.a60f5100.js";import{u as we}from"./example-store.4911356d.js";import{M as ye}from"./MillionaireData.9f9ad06c.js";import{_ as Ae}from"./plugin-vue_export-helper.21dcd24c.js";const ke={class:"game-container"},xe={class:"progress-container"},Ce={class:"progress-bar"},Pe={class:"question-container"},Oe={class:"question-card"},Fe={key:0,class:"audio-player"},Te=["src"],De={class:"question-text"},Ge=["src"],je={class:"hints-container"},Ee=["disabled"],Re=["disabled"],Ne=["disabled"],Qe={class:"options-container"},We=["onClick"],Se={class:"option-label"},qe={class:"option-text"},Le={key:0,class:"error-text"},Be={key:1,class:"positive-text"},Ve={class:"modal-body"},ze={class:"friend-avatar"},Ue={class:"friend-message"},$e={class:"friend-suggestion"},Ie={class:"friend-answer"},Ye={class:"confidence-level"},He={class:"confidence-value"},Je={class:"modal-body"},Xe={class:"audience-results"},Ze={class:"option-label-small"},Ke={class:"result-bar-container"},es={class:"result-percentage"},ss={__name:"GameMillionaire",setup(as){const ne=pe(),le=ge(),W=we(),T=l(""),I=l([]),r=l({}),D=l(null),C=l(!1),h=l(0),P=l({}),A=l(0),_=l([]),M=l({}),S=l(null),G=l(!1),b=l(!1),j=l(!1),E=l(!1),O=l([]),q=l(!1),L=l(!1),w=l({}),B=ae(()=>!1),k=l({name:"",avatar:"",confidence:0,message:"",suggestedAnswer:"",answerText:""}),R=l(""),N=l(""),Y=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#.k!","damn!","crap!"],H=["YES!","Great","Awesome","Super","Correct","\u0439\u0435\u0441!","yep!","yup","nice!","right!"],x=l([]),p=l([]),J=l(0),X=l(0);let Z=null;ae(()=>`${A.value}%`);const re=t=>{const o=A.value,s=performance.now(),i=n=>{const g=n-s,m=Math.min(g/500,1);A.value=o+(t-o)*m,m<1&&requestAnimationFrame(i)};requestAnimationFrame(i)};_e([J,p],([t,e])=>{const o=e.length;if(o===0){A.value=0;return}const s=t/o*100;re(Math.min(s,100))},{immediate:!0});const ie=()=>{S.value&&S.value.play()},ce=()=>{G.value=!0},ue=()=>{G.value=!1},de=()=>{if(b.value)return;b.value=!0;const t=Object.keys(r.value.options),e=r.value.correctAnswer,i=[...t.filter(n=>n!==e)].sort(()=>Math.random()-.5).slice(0,2);O.value=t.filter(n=>n===e||!i.includes(n))},ve=()=>{if(j.value)return;j.value=!0;const t=Object.keys(r.value.options),e=r.value.correctAnswer,o=t.filter(c=>c!==e),s=Math.floor(Math.random()*27)+51;let i=100-s;const n=[];if(o.length>0){for(let c=0;c<o.length-1;c++){const f=i-(o.length-c-1);if(f<=0)n.push(0);else{const se=Math.floor(Math.random()*f)+1;n.push(se),i-=se}}n.push(Math.max(0,i))}w.value={},w.value[e]=s;const g=[...n].sort(()=>Math.random()-.5);o.forEach((c,f)=>{w.value[c]=g[f]||0});const m=Object.values(w.value).reduce((c,f)=>c+f,0);if(m!==100){const c=100-m;w.value[e]+=c}L.value=!0},fe=()=>{if(E.value)return;E.value=!0;const t={Vincent:{behavior:"alwaysCorrect",confidence:99,avatar:"\u{1F468}\u200D\u{1F4BC}",messages:["\u042F \u0430\u0431\u0441\u043E\u043B\u044E\u0442\u043D\u043E \u0443\u0432\u0435\u0440\u0435\u043D \u0432 \u044D\u0442\u043E\u043C!","\u0421\u0442\u043E \u043F\u0440\u043E\u0446\u0435\u043D\u0442\u043E\u0432 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442!","\u042D\u0442\u043E \u0442\u043E\u0447\u043D\u043E \u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442!","\u042F \u0438\u0437\u0443\u0447\u0430\u043B \u044D\u0442\u043E\u0442 \u0432\u043E\u043F\u0440\u043E\u0441 - \u043E\u0442\u0432\u0435\u0442 \u0432\u0435\u0440\u043D\u044B\u0439","\u0413\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u0443\u044E \u0441\u0432\u043E\u0435\u0439 \u0440\u0435\u043F\u0443\u0442\u0430\u0446\u0438\u0435\u0439!"]},Russel:{behavior:"random",confidence:50,avatar:"\u{1F468}\u200D\u{1F52C}",messages:["\u0425\u043C... \u0414\u0443\u043C\u0430\u044E, \u044D\u0442\u043E \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442","\u041C\u0430\u043C\u043E\u0439 \u043A\u043B\u044F\u043D\u0443\u0441\u044C, \u0432\u0440\u043E\u0434\u0435 \u0431\u044B \u044D\u0442\u043E\u0442!","\u0412\u043E\u043E\u0431\u0449\u0435 \u043D\u0430\u0443\u0433\u0430\u0434, \u043D\u043E \u043F\u0443\u0441\u0442\u044C \u0431\u0443\u0434\u0435\u0442 \u0442\u0430\u043A","\u0415\u0441\u043B\u0438 \u0447\u0435\u0441\u0442\u043D\u043E, \u044F \u043D\u0435 \u043E\u0447\u0435\u043D\u044C \u0443\u0432\u0435\u0440\u0435\u043D...","\u041C\u043E\u043D\u0435\u0442\u043A\u0443 \u043F\u043E\u0434\u0431\u0440\u043E\u0441\u0438\u043B - \u0432\u044B\u043F\u0430\u043B \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442"]},Oleg:{behavior:"alwaysWrong",confidence:Math.floor(Math.random()*91)+10,avatar:"\u{1F935}",messages:["\u042F \u0433\u0434\u0435-\u0442\u043E \u044D\u0442\u043E \u0441\u043B\u044B\u0448\u0430\u043B!","\u0422\u043E\u0447\u043D\u043E \u043F\u043E\u043C\u043D\u044E - \u044D\u0442\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442!","\u041C\u043D\u0435 \u043A\u0430\u0436\u0435\u0442\u0441\u044F, \u043C\u044B \u044D\u0442\u043E \u043F\u0440\u043E\u0445\u043E\u0434\u0438\u043B\u0438","\u042F \u0431\u044B \u043F\u043E\u0441\u0442\u0430\u0432\u0438\u043B \u043D\u0430 \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442","\u041D\u0435 \u0441\u043E\u043C\u043D\u0435\u0432\u0430\u0439\u0441\u044F, \u0431\u0435\u0440\u0438 \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442!"]},Rachel:{behavior:"random",confidence:Math.floor(Math.random()*71)+25,avatar:"\u{1F469}\u200D\u{1F4BB}",messages:["\u041C\u043D\u0435 \u043A\u0430\u0436\u0435\u0442\u0441\u044F, \u044D\u0442\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442","\u0414\u0443\u043C\u0430\u044E, \u0441\u0442\u043E\u0438\u0442 \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442","\u041F\u043E-\u043C\u043E\u0435\u043C\u0443, \u043C\u044B \u043D\u0430 \u0432\u0435\u0440\u043D\u043E\u043C \u043F\u0443\u0442\u0438","\u042D\u0442\u043E \u0432\u044B\u0433\u043B\u044F\u0434\u0438\u0442 \u043B\u043E\u0433\u0438\u0447\u043D\u044B\u043C","\u042F \u0441\u043A\u043B\u043E\u043D\u044F\u044E\u0441\u044C \u043A \u044D\u0442\u043E\u043C\u0443 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0443"]},Alex:{behavior:"random",confidence:Math.floor(Math.random()*71)+25,avatar:"\u{1F468}\u200D\u{1F393}",messages:["\u042F \u043D\u0435 \u0441\u043E\u0432\u0441\u0435\u043C \u0443\u0432\u0435\u0440\u0435\u043D, \u043D\u043E \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439","\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u044D\u0442\u043E \u0442\u043E\u0442 \u0441\u0430\u043C\u044B\u0439 \u043E\u0442\u0432\u0435\u0442","\u041D\u0430\u0432\u0435\u0440\u043D\u043E\u0435, \u0441\u0442\u043E\u0438\u0442 \u0440\u0438\u0441\u043A\u043D\u0443\u0442\u044C \u0441 \u044D\u0442\u0438\u043C","\u0415\u0441\u043B\u0438 \u0431\u044B \u044F \u0431\u044B\u043B \u043D\u0430 \u0442\u0432\u043E\u0435\u043C \u043C\u0435\u0441\u0442\u0435...","\u041C\u043E\u0439 \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u0439 \u0433\u043E\u043B\u043E\u0441 \u0433\u043E\u0432\u043E\u0440\u0438\u0442 \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442"]},Patrick:{behavior:"random",confidence:Math.floor(Math.random()*71)+25,avatar:"\u{1F468}\u200D\u{1F3EB}",messages:["\u0414\u0430\u0432\u0430\u0439 \u0440\u0438\u0441\u043A\u043D\u0435\u043C \u0441 \u044D\u0442\u0438\u043C \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u043E\u043C!","\u042F \u0431\u044B \u0432\u044B\u0431\u0440\u0430\u043B \u0438\u043C\u0435\u043D\u043D\u043E \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442","\u041F\u043E\u0445\u043E\u0436\u0435, \u044D\u0442\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435","\u0421\u043C\u0435\u043B\u043E \u0431\u0435\u0440\u0438 \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442!","\u041C\u043E\u0439 \u0432\u044B\u0431\u043E\u0440 \u043F\u0430\u043B \u043D\u0430 \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442"]},Maria:{behavior:"random",confidence:Math.floor(Math.random()*51)+40,avatar:"\u{1F469}\u200D\u{1F3A8}",messages:["\u0418\u043D\u0442\u0443\u0438\u0446\u0438\u044F \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442 \u043C\u043D\u0435 \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442","\u0427\u0443\u0432\u0441\u0442\u0432\u0443\u044E, \u0447\u0442\u043E \u044D\u0442\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442","\u0427\u0442\u043E-\u0442\u043E \u043C\u043D\u0435 \u043D\u0440\u0430\u0432\u0438\u0442\u0441\u044F \u044D\u0442\u043E\u0442 \u0432\u044B\u0431\u043E\u0440","\u041F\u043E \u043E\u0449\u0443\u0449\u0435\u043D\u0438\u044F\u043C - \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442","\u041C\u043E\u0435 \u0448\u0435\u0441\u0442\u043E\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u043E \u0433\u043E\u0432\u043E\u0440\u0438\u0442 \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442"]},Blondinka:{behavior:"alwaysCorrect",confidence:Math.floor(Math.random()*51)+40,avatar:"\u{1F468}\u200D\u{1F4BB}",messages:["\u042F \u043F\u0440\u043E\u0432\u0435\u0440\u044F\u043B\u0430 - \u044D\u0442\u043E\u0442 \u043E\u0442\u0432\u0435\u0442 \u0432\u0435\u0440\u043D\u044B\u0439","\u0422\u043E\u0447\u043D\u043E \u043F\u043E\u043C\u043D\u044E \u0438\u0437 \u0443\u0447\u0435\u0431\u043D\u0438\u043A\u0430","\u042D\u0442\u043E \u0441\u0442\u043E\u043F\u0440\u043E\u0446\u0435\u043D\u0442\u043D\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442","\u041D\u0435 \u0441\u043E\u043C\u043D\u0435\u0432\u0430\u0439\u0441\u044F, \u044F \u0437\u043D\u0430\u044E \u044D\u0442\u043E","\u042F \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0441\u0442 \u0432 \u044D\u0442\u043E\u043C \u0432\u043E\u043F\u0440\u043E\u0441\u0435"]}},e=Object.keys(t),o=e[Math.floor(Math.random()*e.length)],s=t[o],i=s.messages[Math.floor(Math.random()*s.messages.length)];let n;const g=Object.keys(r.value.options),m=r.value.correctAnswer,c=g.filter(f=>f!==m);switch(s.behavior){case"alwaysCorrect":n=m;break;case"alwaysWrong":n=c[Math.floor(Math.random()*c.length)];break;case"random":n=g[Math.floor(Math.random()*g.length)];break}k.value={name:o,avatar:s.avatar,confidence:s.confidence,message:i,suggestedAnswer:n,answerText:r.value.options[n],behavior:s.behavior},q.value=!0},F=()=>{q.value=!1,L.value=!1},K=t=>{const e=[...t];for(let o=e.length-1;o>0;o--){const s=Math.floor(Math.random()*(o+1));[e[o],e[s]]=[e[s],e[o]]}return e},ee=t=>{if(!t.options)return t;const e=Object.entries(t.options),o=K(e),s={},i={};o.forEach(([g,m],c)=>{const f=["A","B","C","D"][c];s[f]=m,i[g]=f});const n=i[t.correctAnswer];return{...t,options:s,correctAnswer:n,originalCorrectAnswer:t.correctAnswer}},V=async()=>{if(b.value=!1,j.value=!1,E.value=!1,O.value=[],G.value=!1,F(),h.value>=p.value.length&&x.value.length===0){me();return}h.value>=p.value.length&&x.value.length>0&&(p.value=[...p.value,...x.value],x.value=[]);const t=p.value[h.value];r.value=ee(t),D.value=null,C.value=!1,P.value={},await be()},he=(t,e)=>{D.value=t;const o=r.value.correctAnswer;C.value=t===o;const s=!_.value[h.value]&&_.value[h.value]!==!1;if(C.value){s?_.value[h.value]=!0:_.value[h.value]=!1,J.value++;const i=Math.random()>.5;N.value=i?H[Math.floor(Math.random()*H.length)]:e,M.value[t]&&M.value[t].classList.add("correct-pulse"),setTimeout(()=>{N.value=""},1200),setTimeout(()=>{M.value[t]&&M.value[t].classList.remove("correct-pulse")},1200),setTimeout(()=>{h.value++,V()},800)}else s&&(_.value[h.value]=!1),x.value.some(n=>n.text===r.value.text)||x.value.push(r.value),Object.values(M.value).forEach(n=>{!n||n.classList.add("shake")}),X.value+=1,R.value=Y[Math.floor(Math.random()*Y.length)],P.value[t]=!0,setTimeout(()=>{Object.values(M.value).forEach(n=>{n&&n.classList.remove("shake")})},500),setTimeout(()=>{R.value="",P.value[t]=!1,h.value++,V()},1500)},me=()=>{const t=Date.now()-Z;W.setLastGameResults(t,X.value),W.setGameName("MillionaireGame"),W.setWordSet(T.value),ne.push({path:"/leader-board/",query:{missionName:T.value}})};return Me(()=>{T.value=le.params.missionName;const t=ye[T.value]||[],e=K(t);I.value=e.map(o=>ee(o)),p.value=[...I.value],Z=Date.now(),_.value=Array(p.value.length).fill(null),V()}),(t,e)=>(u(),d("div",ke,[a("div",xe,[a("div",Ce,[(u(!0),d(z,null,U(_.value,(o,s)=>(u(),d("div",{key:s,class:"progress-segment",style:Q({width:`${100/p.value.length}%`,"background-color":o===!0?"#34aefa":o===!1?"#f36f78":"transparent"})},null,4))),128))]),a("div",{class:"progress-text",style:Q({opacity:A.value>75?0:1})},v(Math.round(A.value))+"% ",5)]),a("div",Pe,[a("div",Oe,[r.value.audio?(u(),d("div",Fe,[a("audio",{ref_key:"audioPlayer",ref:S,src:r.value.audio,controls:"",onPlay:ce,onEnded:ue},null,40,Te),G.value?y("",!0):(u(),d("button",{key:0,class:"play-audio-button",onClick:ie}," \u{1F50A} \u041F\u0440\u043E\u0438\u0433\u0440\u0430\u0442\u044C \u0430\u0443\u0434\u0438\u043E "))])):y("",!0),a("div",De,v(r.value.text),1),r.value.questionPicture?(u(),d("img",{key:1,src:r.value.questionPicture,alt:"Question image",class:"question-image"},null,8,Ge)):y("",!0)])]),a("div",je,[a("button",{class:"hint-button fifty-fifty",onClick:de,disabled:b.value||B.value},e[2]||(e[2]=[a("div",{class:"hint-icon"},"50/50",-1),a("div",{class:"hint-text"},"fifty \u0444\u0418\u0444\u0442\u0438",-1)]),8,Ee),a("button",{class:"hint-button ask-audience",onClick:ve,disabled:j.value||B.value},e[3]||(e[3]=[a("div",{class:"hint-icon"},"\u{1F465}",-1),a("div",{class:"hint-text"},"\u0421\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0437\u0430\u043B",-1)]),8,Re),a("button",{class:"hint-button phone-friend",onClick:fe,disabled:E.value||B.value},e[4]||(e[4]=[a("div",{class:"hint-icon"},"\u{1F4DE}",-1),a("div",{class:"hint-text"},"\u0417\u0432\u043E\u043D\u043E\u043A \u0434\u0440\u0443\u0433\u0443",-1)]),8,Ne)]),a("div",Qe,[(u(!0),d(z,null,U(r.value.options,(o,s)=>(u(),d("div",{key:s,class:oe(["option-card",{active:D.value===s&&!C.value,correct:C.value&&D.value===s,fade:P.value[s]||b.value&&!O.value.includes(s),disabled:b.value&&!O.value.includes(s)}]),onClick:i=>he(s,o),ref_for:!0,ref:i=>M.value[s]=i,style:Q({opacity:P.value[s]||b.value&&!O.value.includes(s)?0:1})},[a("div",Se,v(s),1),a("div",qe,v(o),1)],14,We))),128))]),R.value?(u(),d("div",Le,v(R.value),1)):y("",!0),N.value?(u(),d("div",Be,v(N.value),1)):y("",!0),q.value?(u(),d("div",{key:2,class:"modal-overlay",onClick:F},[a("div",{class:"modal-content",onClick:e[0]||(e[0]=te(()=>{},["stop"]))},[a("div",{class:"modal-header"},[e[5]||(e[5]=a("h3",null,"\u0417\u0432\u043E\u043D\u043E\u043A \u0434\u0440\u0443\u0433\u0443",-1)),a("button",{class:"modal-close",onClick:F},"\xD7")]),a("div",Ve,[a("div",ze,v(k.value.avatar),1),a("p",Ue,[e[6]||(e[6]=$(" \u0412\u0430\u0448 \u0434\u0440\u0443\u0433 ")),a("strong",null,v(k.value.name),1),e[7]||(e[7]=$(" \u0434\u0443\u043C\u0430\u0435\u0442: "))]),a("div",$e,' "'+v(k.value.message)+'" ',1),a("div",Ie,v(k.value.answerText),1),a("div",Ye,[e[8]||(e[8]=$(" \u0423\u0432\u0435\u0440\u0435\u043D\u043D\u043E\u0441\u0442\u044C \u0434\u0440\u0443\u0433\u0430: ")),a("span",He,v(k.value.confidence)+"%",1)])])])])):y("",!0),L.value?(u(),d("div",{key:3,class:"modal-overlay",onClick:F},[a("div",{class:"modal-content",onClick:e[1]||(e[1]=te(()=>{},["stop"]))},[a("div",{class:"modal-header"},[e[9]||(e[9]=a("h3",null,"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043E\u043F\u0440\u043E\u0441\u0430 \u0437\u0430\u043B\u0430",-1)),a("button",{class:"modal-close",onClick:F},"\xD7")]),a("div",Je,[a("div",Xe,[(u(!0),d(z,null,U(r.value.options,(o,s)=>(u(),d("div",{key:s,class:"audience-result-item"},[a("div",Ze,v(s),1),a("div",Ke,[a("div",{class:oe(["result-bar",{correct:s===r.value.correctAnswer}]),style:Q({width:Math.max(0,w.value[s])+"%"})},null,6),a("span",es,v(Math.max(0,w.value[s]))+"%",1)])]))),128))]),e[10]||(e[10]=a("p",{class:"audience-note"},"\u0417\u0430\u043B \u043F\u0440\u043E\u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043B \u0437\u0430 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u044B \u043E\u0442\u0432\u0435\u0442\u043E\u0432",-1))])])])):y("",!0)]))}};var rs=Ae(ss,[["__scopeId","data-v-6960f15b"]]);export{rs as default};
