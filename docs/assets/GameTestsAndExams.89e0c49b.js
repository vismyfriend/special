import{u as ee,b as i,d as te,o as n,f as c,h as a,t as d,s as j,j as D,m as se,D as le,F as T,q as B,l as _,x as ae,I as U,n as E}from"./index.f0736790.js";import{T as oe}from"./TestsAndExamsData.267d8889.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";const ne={key:0,class:"exercise-container"},ce={class:"exercise-header"},ue={class:"seed-control"},ie={class:"seed-display"},de={class:"task-title"},ve={key:0,class:"task-image-container"},pe=["src","alt"],fe={key:1,controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},me=["src"],_e={key:2,class:"true-false-container"},he={class:"true-false-table"},ye={class:"radio-label"},Ae=["name","onUpdate:modelValue"],ge={class:"radio-label"},be=["name","onUpdate:modelValue"],ke={key:3,class:"multiple-choice-container"},Ce={class:"question-text"},we={class:"options-container"},Ee=["name","value","onUpdate:modelValue"],Se={class:"option-text"},De={key:0,class:"explain-container"},Te={key:0,class:"explanation-content"},Be=["onClick"],Me={class:"check-script-wrapper"},Ue=["onClick"],Ke={key:0,class:"script-toggle-wrapper"},Le=["onClick"],$e={key:4,class:"text-script-content"},Fe={__name:"GameTestsAndExams",setup(Ne){const O=ee(),h=i(null),v=i([]),p=i([]),S=i(null),b=i([]),K=i(""),m=i([]),y=i([]),A=i(""),k=i(""),M=i(!1),P=i(null);i(!0),i(!0);const Q=()=>Math.random().toString(36).slice(2,8),L=(t,r)=>{const s=[...t];let e=0;for(let l=0;l<r.length;l++)e=(e<<5)-e+r.charCodeAt(l),e|=0;for(let l=s.length-1;l>0;l--){const o=(e%(l+1)+l)%(l+1),u=Math.abs(o);[s[l],s[u]]=[s[u],s[l]]}return s},$=(t,r)=>t.map(s=>{if(s.taskID!=="multiple_choice")return{...s};const l=L([...s.questions],r+"questions").map(o=>{const u=L(Object.entries(o.options),r+"options"+o.text),C={},g={};u.forEach(([w,x],q)=>{const V=String.fromCharCode(65+q);C[V]=x,g[w]=V});let f;return Array.isArray(o.correctAnswer)?f=o.correctAnswer.map(w=>g[w]):f=g[o.correctAnswer],{...o,options:C,correctAnswer:f}});return{...s,questions:l}}),F=async()=>{k.value.trim()&&(A.value=k.value.trim()),M.value=!1,h.value&&(m.value=$(h.value.tasks,A.value),N())},z=()=>{navigator.clipboard.writeText(A.value)},N=()=>{v.value=m.value.map(t=>Array(t.questions.length).fill(null)),p.value=m.value.map(()=>!1),b.value=m.value.map(()=>null),y.value=m.value.map(t=>Array(t.questions.length).fill(!1))};te(()=>{K.value=O.params.missionName,h.value=oe[K.value]||null,A.value=Q(),k.value=A.value,h.value&&(m.value=$(h.value.tasks,A.value),N()),H()});const W=(t,r)=>{y.value[t]||(y.value[t]=[]),y.value[t][r]=!y.value[t][r]},R=t=>t===100?{letter:"A+",class:"grade-Aplus"}:t>=85?{letter:"A",class:"grade-A"}:t>=75?{letter:"B+",class:"grade-Bplus"}:t>=60?{letter:"B-",class:"grade-Bminus"}:t>=40?{letter:"C",class:"grade-C"}:t>=20?{letter:"D",class:"grade-D"}:t>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},Y=t=>{S.value=S.value===t?null:t},H=()=>{document.addEventListener("contextmenu",t=>{if(t.target.classList.contains("audio-player"))return t.preventDefault(),!1}),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"&&t.preventDefault()})},J=t=>{p.value[t]=!0;const r=m.value[t];let s=0;r.questions.forEach((l,o)=>{const u=v.value[t][o];Array.isArray(l.correctAnswer)?l.correctAnswer.includes(u)&&s++:u===l.correctAnswer&&s++});const e=Math.round(s/r.questions.length*100);b.value[t]=e},G=(t,r,s,e)=>{if(!p.value[t])return"";const l=v.value[t][r];return(Array.isArray(e)?e.includes(s):s===e)?l===s?"correct-selected":"correct-not-selected":l===s?"incorrect-selected":""},X=(t,r,s,e)=>{if(!p.value[t])return"";const l=v.value[t][r];return(Array.isArray(e)?e.includes(s):s===e)?l===s?"option-correct-selected":"option-correct-not-selected":l===s?"option-incorrect-selected":""},Z=(t,r,s)=>{if(!p.value[t])return"";const e=v.value[t][r];return(Array.isArray(s)?s.includes(e):e===s)?"explain-correct":"explain-incorrect"},I=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(t,r)=>h.value?(n(),c("div",ne,[a("div",ce,[a("h2",null,d(h.value.mainDescription),1),r[3]||(r[3]=a("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1)),a("div",ue,[a("div",ie,[r[2]||(r[2]=j(" \u041D\u043E\u043C\u0435\u0440 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430: ")),M.value?D((n(),c("input",{key:1,"onUpdate:modelValue":r[1]||(r[1]=s=>k.value=s),onKeyup:le(F,["enter"]),onBlur:F,class:"seed-input",ref_key:"seedInput",ref:P},null,544)),[[se,k.value]]):(n(),c("span",{key:0,class:"seed-value",onClick:r[0]||(r[0]=s=>M.value=!0)},d(A.value),1))]),a("button",{class:"seed-copy-btn",onClick:z,title:"Copy seed to clipboard"}," \u{1F4CB} ")])]),(n(!0),c(T,null,B(m.value,(s,e)=>(n(),c("div",{key:e,class:"task-container",style:ae({backgroundColor:I[e%7]})},[a("h3",de,d(s.taskDescription),1),s.taskPicture?(n(),c("div",ve,[a("img",{src:s.taskPicture,alt:"Image for task "+(e+1),class:"task-image"},null,8,pe)])):_("",!0),s.audio?(n(),c("audio",fe,[a("source",{src:s.audio,type:"audio/mp3"},null,8,me),r[4]||(r[4]=j(" Your browser does not support the audio element. "))])):_("",!0),s.taskID==="true_false"?(n(),c("div",_e,[a("table",he,[r[5]||(r[5]=a("thead",null,[a("tr",null,[a("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),a("th",{class:"true-header"},"True"),a("th",{class:"false-header"},"False")])],-1)),a("tbody",null,[(n(!0),c(T,null,B(s.questions,(l,o)=>(n(),c("tr",{key:o},[a("td",null,d(l.text),1),a("td",null,[a("label",ye,[D(a("input",{type:"radio",name:"task"+e+"q"+o,value:"true","onUpdate:modelValue":u=>v.value[e][o]=u},null,8,Ae),[[U,v.value[e][o]]]),a("span",{class:E(["radio-custom",G(e,o,"true",l.correctAnswer)])},null,2)])]),a("td",null,[a("label",ge,[D(a("input",{type:"radio",name:"task"+e+"q"+o,value:"false","onUpdate:modelValue":u=>v.value[e][o]=u},null,8,be),[[U,v.value[e][o]]]),a("span",{class:E(["radio-custom",G(e,o,"false",l.correctAnswer)])},null,2)])])]))),128))])])])):s.taskID==="multiple_choice"?(n(),c("div",ke,[(n(!0),c(T,null,B(s.questions,(l,o)=>{var u,C;return n(),c("div",{key:o,class:"question-container"},[a("p",Ce,d(o+1)+") "+d(l.text),1),a("div",we,[(n(!0),c(T,null,B(l.options,(g,f)=>(n(),c("label",{key:f,class:E(["option-label",[X(e,o,f,l.correctAnswer),v.value[e][o]===f&&!p.value[e]?"option-selected":""]])},[D(a("input",{type:"radio",name:"task"+e+"q"+o,value:f,"onUpdate:modelValue":w=>v.value[e][o]=w,class:"option-input"},null,8,Ee),[[U,v.value[e][o]]]),a("span",Se,d(f)+" : "+d(g),1)],2))),128))]),p.value[e]?(n(),c("div",De,[(u=y.value[e])!=null&&u[o]?(n(),c("div",Te,[a("p",null,d(l.explanation),1)])):_("",!0),a("button",{class:E(["explain-button",Z(e,o,l.correctAnswer)]),onClick:g=>W(e,o)},d((C=y.value[e])!=null&&C[o]?"Well, okay... ":"Explain it to me"),11,Be)])):_("",!0)])}),128))])):_("",!0),a("div",Me,[a("button",{class:"check-button",onClick:l=>J(e)}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C - check ",8,Ue),a("div",{class:E(["score-display",[{"score-visible":p.value[e]},p.value[e]?R(b.value[e]).class:""]])},d(p.value[e]?`${b.value[e]}% (${R(b.value[e]).letter})`:""),3),s.textScript?(n(),c("div",Ke,[a("button",{class:"toggle-script-btn",onClick:l=>Y(e)},d(S.value===e?"\u0421\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0441\u0442":"Explain it to me"),9,Le)])):_("",!0)]),S.value===e?(n(),c("div",$e,[a("p",null,d(s.textScript),1)])):_("",!0)],4))),128))])):_("",!0)}};var je=re(Fe,[["__scopeId","data-v-b857e7ee"]]);export{je as default};
