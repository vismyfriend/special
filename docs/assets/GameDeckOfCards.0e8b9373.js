import{p as U,u as z,r as i,f as M,G as F,o as V,b as v,c as m,e as t,t as _,n as P,F as Z,y as j,D as N,j as I,i as K}from"./index.44b95fb4.js";import{q as Q}from"./questions-data.0144a063.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";var J="/special/assets/card.ad34b223.png";const X={key:0,class:"game-container"},ee={class:"side-buttons"},te=["disabled"],ae={class:"deck-of-cards"},se={class:"card-content"},ne={class:"card-text"},oe={class:"word"},re={class:"timer-text"},ie={class:"remaining-cards",ref:"remainingCardsContainer"},le={class:"card-content"},ce={class:"card-text"},ue={class:"word"},de={class:"translation"},R=1e3,ve={__name:"GameDeckOfCards",setup(me){U();const G=z(),B=/iPhone|iPad|iPod/i.test(navigator.userAgent),w=i([]),s=i(null);let c=[];const f=i([]),k=i(!1),u=i(!1);let C=null;const W=()=>{C&&clearTimeout(C),u.value=!0,C=setTimeout(()=>{u.value=!1},3e3)},T=i(!1),$=()=>{T.value=!0,d(),setTimeout(()=>{T.value=!1},300)},l=i(null),n=i(0);M(()=>n.value>0?`You have ${n.value} seconds`:"Timer");const q=()=>{if(l.value){clearInterval(l.value),l.value=null,n.value=0;return}d(),n.value=77,l.value=setInterval(()=>{n.value-=1,n.value<=0&&(clearInterval(l.value),l.value=null,n.value=0,alert(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`))},1e3)},A=e=>e.sort(()=>Math.random()-.5),d=async()=>{if(c.length===0){H();return}s.value&&!s.value.isIntro&&(u.value=!0,await new Promise(a=>setTimeout(a,500)),f.value.push(s.value));const e=c.pop();s.value=e,u.value=!1},y=()=>{if(f.value.length===0)return;const e=f.value.pop();s.value&&c.push(s.value),s.value=e},H=()=>{alert("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},b=M(()=>c),E=e=>{const o=e*4,p=10*Math.cos(o*Math.PI/180),h=10*Math.sin(o*Math.PI/180);return{"--x":`${p}px`,"--y":`${h}px`,"--angle":`${o}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:e}},x=e=>{e.key==="ArrowDown"?d():e.key==="ArrowUp"&&y()};let g=0,D=!0,L=!0;const O=e=>{const{beta:a}=e,r=Date.now(),o=125,p=30,h=90;a>p&&a<h&&(L=!0),a<o&&a>h&&(D=!0),a>o&&r-g>R&&D?(navigator.vibrate&&navigator.vibrate(30),d(),g=r,D=!1):a<p&&r-g>R&&L&&(navigator.vibrate&&navigator.vibrate(30),y(),g=r,L=!1)},S=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",O),k.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",O),k.value=!0))};return F(()=>{window.removeEventListener("deviceorientation",O),window.removeEventListener("keydown",x)}),V(()=>{const e=G.params.missionName;w.value=Q[e]||[],c=A([...w.value]),s.value={ru:"\u0437\u0434\u0435\u0441\u044C \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0441\u043B\u043E\u0432\u043E",eng:"\u043E\u0431\u044A\u044F\u0441\u043D\u0438 \u0438\u043B\u0438 \u043F\u0435\u0440\u0435\u0432\u0435\u0434\u0438 \u0435\u0433\u043E",isIntro:!0},S(),window.addEventListener("keydown",x)}),(e,a)=>w.value.length?(v(),m("div",X,[t("div",ee,[t("button",{onClick:y,class:"game-btn",disabled:f.value.length===0}," Ctrl + Z ",8,te)]),t("div",ae,[t("div",{class:"wordCard",onClick:W},[t("div",se,[t("div",ne,[t("div",oe,_(s.value.ru),1),t("div",{class:P(["translation",{blurred:!u.value&&!s.value.isIntro}])},_(s.value.eng),3)])])]),t("div",{class:"timer-block",onClick:q,role:"button"},[t("span",re,_(n.value>0?`${n.value} seconds`:"Start"),1)]),t("div",ie,[(v(!0),m(Z,null,j(b.value,(r,o)=>(v(),m("div",{class:"remaining-card",onClick:d,key:o,style:N(E(o)),role:"button"},[t("div",le,[t("div",ce,[t("div",ue,_(r.ru),1),t("div",de,_(r.eng),1)])])],4))),128)),b.value.length>0?(v(),m("div",{key:0,class:P(["card-back-cover",{tapped:T.value}]),style:N(E(b.value.length-1)),onClick:$},a[0]||(a[0]=[t("img",{src:J,alt:"Card Back",role:"button"},null,-1)]),6)):I("",!0)],512)]),!k.value&&K(B)?(v(),m("button",{key:0,onClick:S,class:"enable-tilt-btn"}," \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 -> \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):I("",!0)])):I("",!0)}};var pe=Y(ve,[["__scopeId","data-v-417e94de"]]);export{pe as default};
