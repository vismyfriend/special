import{_ as ce}from"./wiresPic.4e724e13.js";import{p as ie,u as ve,r as l,i as de,I,o as me,b as h,c as f,e as u,F as N,q as H,s as Q,t as k,C as $,n as he,l as q}from"./index.722e8140.js";import{u as fe}from"./example-store.9e88228c.js";import{s as ge}from"./short-words-data.77713e74.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";const _e={class:"progress-container"},ye={class:"progress-bar"},we={class:"game-visual-wrapper"},ke={class:"game-container"},Ce={class:"answers-container"},be=["onClick"],Le={class:"textOnCard"},Ae={key:0,class:"hint"},Me={key:0,class:"error-text"},Re=["data-is-word"],Te={__name:"GameFindPairsWires",setup(Pe){const j=ie(),J=ve(),P=fe(),C=l(),W=l([]),p=l({}),A=l([]),M=l(null),b=l(!1),v=l(0),R=l([]),x=l(0),K=l(0),O=l(0),_=l(0),g=l([]),d=l(null),i=l([]),F=l(null),y=l([]),m=l([]);de(()=>`${_.value}%`);const U=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},Z=t=>{const s=_.value,a=performance.now(),r=o=>{const c=o-a,w=Math.min(c/500,1);_.value=s+(t-s)*w,w<1&&requestAnimationFrame(r)};requestAnimationFrame(r)};I([O,m],([t,e])=>{const s=e.length;if(s===0){_.value=0;return}const a=t/s*100;Z(Math.min(a,100))},{immediate:!0});const T=l([]),Y=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#.k!","damn!","crap!"],B=["YES!","Great","Awesome","Super","Correct","\u0439\u0435\u0441!","yep!","yup","nice!","right!"],L=l([]),ee=()=>{const t=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return t[Math.floor(Math.random()*t.length)]},G=()=>{if(!d.value||!F.value||i.value.length===0)return;const t=F.value;t.innerHTML="";const e=t.getBoundingClientRect(),s=d.value.getBoundingClientRect();i.value.forEach(a=>{if(!a)return;const r=a.getBoundingClientRect(),o=s.right-s.width/4-e.left,c=s.top+s.height/2-e.top,w=r.left+r.width/4-e.left,D=r.top+r.height/2-e.top,n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",o),n.setAttribute("y1",c),n.setAttribute("x2",w),n.setAttribute("y2",D),n.setAttribute("stroke",ee()),n.setAttribute("stroke-width","3"),n.setAttribute("stroke-linecap","round"),t.appendChild(n)})};I(p,async()=>{await $(),G()}),I(()=>A.value,async()=>{await $(),G()});const E=t=>t.sort(()=>Math.random()-.5),te=t=>{const e=W.value,s=e.find(c=>c.eng===t),a=e.filter(c=>c.eng!==t),o=E([...a]).slice(0,3);return E([...o,s])},z=async()=>{if(v.value>=m.value.length&&y.value.length===0){ae();return}v.value>=m.value.length&&y.value.length>0&&(m.value=[...m.value,...y.value],y.value=[]);const t=m.value[v.value];p.value=t;const e=t.eng;A.value=te(e),M.value=null,b.value=!1,R.value=Array(A.value.length).fill(!1),await $(),G()};let S=[],V=0;const se=(t,e)=>{M.value=t;const s=p.value.eng;b.value=t===s;const a=!g.value[v.value]&&g.value[v.value]!==!1;if(b.value){a?g.value[v.value]=!0:g.value[v.value]=!1,O.value++;const r=Math.random()>.5;L.value[e]=r?B[Math.floor(Math.random()*B.length)]:t,i.value[e]&&i.value[e].classList.add("correct-pulse"),d.value&&(d.value.classList.remove("pulsing"),d.value.classList.add("correct-pulse")),setTimeout(()=>{L.value[e]=""},1200),setTimeout(()=>{i.value[e]&&i.value[e].classList.remove("correct-pulse"),d.value&&(d.value.classList.remove("correct-pulse"),d.value.classList.add("pulsing"))},1200),setTimeout(()=>{v.value++,z()},800)}else a&&(g.value[v.value]=!1),y.value.some(o=>o.ru===p.value.ru)||y.value.push(p.value),i.value.forEach(o=>{o&&o.classList.add("shake")}),i.value.forEach(o=>{if(!o)return;const c=i.value[e].getBoundingClientRect(),w=c.left+c.width/2,D=c.top+c.height/2,n=o.getBoundingClientRect(),oe=n.left+n.width/2,le=n.top+n.height/2,re=(oe-w)*.6,ne=(le-D)*.6,ue=(Math.random()-.5)*20;o.style.setProperty("--dx",`${re}px`),o.style.setProperty("--dy",`${ne}px`),o.style.setProperty("--angle",`${ue}deg`),o.classList.add("explode"),o.classList.add("shake"),setTimeout(()=>{o.classList.remove("explode"),o.classList.remove("shake")},600)}),setTimeout(()=>{i.value.forEach(o=>{o&&o.classList.remove("shake")})},500),V+=1,T.value[e]=Y[Math.floor(Math.random()*Y.length)],R.value[e]=!0,setTimeout(()=>{T.value[e]=""},1500)},ae=()=>{const t=Date.now()-X;P.setLastGameResults(t,V),P.setGameName("FindPairsEasy"),P.setWordSet(C.value),j.push({path:"/leader-board/",query:{missionName:C.value}})};let X=null;return me(()=>{C.value=J.params.missionName,W.value=ge[C.value]||[],console.log(C.value),S=E([...W.value]).slice(0,12),x.value=S.length,K.value=x.value,m.value=[...S],X=Date.now(),z(),g.value=Array(m.value.length).fill(null)}),(t,e)=>(h(),f(N,null,[u("div",_e,[u("div",ye,[(h(!0),f(N,null,H(g.value,(s,a)=>(h(),f("div",{key:a,class:"progress-segment",style:Q({width:`${100/m.value.length}%`,"background-color":s===!0?"#34aefa":s===!1?"#f36f78":"transparent"})},null,4))),128))]),u("div",{class:"progress-text",style:Q({opacity:_.value>75?0:1})},k(Math.round(_.value))+"% ",5)]),u("div",we,[(h(),f("svg",{class:"lines-overlay",ref_key:"svgLines",ref:F,style:{width:"100%",height:"100%"}},null,512)),u("div",ke,[u("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:d},k(p.value.ru),513),u("div",Ce,[(h(!0),f(N,null,H(A.value,(s,a)=>(h(),f("div",{key:a,style:{position:"relative"}},[u("div",{class:he(["wordCard",{active:M.value===s.eng&&!b.value,correct:b.value&&M.value===s.eng,fade:R.value[a]}]),onClick:r=>se(s.eng,a),ref_for:!0,ref:r=>i.value[a]=r,style:Q({opacity:R.value[a]?0:1})},[u("div",null,[u("div",Le,k(s.eng),1),s.hint?(h(),f("div",Ae,k(s.hint),1)):q("",!0)])],14,be),T.value[a]?(h(),f("div",Me,k(T.value[a]),1)):q("",!0),L.value[a]?(h(),f("div",{key:1,class:"positive-text","data-is-word":!B.includes(L.value[a])},k(L.value[a]),9,Re)):q("",!0)]))),128))])])]),u("div",{class:"image-container"},[e[0]||(e[0]=u("img",{src:ce,alt:"Wire Cutter",class:"cutter-image"},null,-1)),u("button",{class:"action-button",onClick:U},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Se=pe(Te,[["__scopeId","data-v-148b8c2e"]]);export{Se as default};
