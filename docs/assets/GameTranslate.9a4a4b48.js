import{u as G,r as s,I,o as $,H as F,b as d,c as m,e as o,t as g,l as y,F as R,q as V,B as q,n as A}from"./index.9c1d9b30.js";import{s as K}from"./short-words-data.acd88992.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const P={key:0,class:"game-container"},U={key:0,class:"modal-overlay"},Z={class:"modal-content"},j={class:"game-content-wrapper"},J={class:"main-content"},Q={class:"hint-container"},X=["onClick"],Y={__name:"GameTranslate",setup(ee){const b=G(),p=s([]),i=s([]),h=s([]),e=s({}),_=s(!1),w=s(""),r=s(!1),W=s(0);s(0);const c=s([]),f=s(null),u=()=>{q(()=>{var T;const t=(T=f.value)==null?void 0:T.parentNode,a=f.value;if(!t||!a)return;const l=window.innerWidth<=600;let n=l?36:58;const x=l?.85:.8,H=l?5:10;for(a.style.fontSize=`${n}px`,a.style.lineHeight=x,a.style.padding=`${H}px`;(a.scrollWidth>t.clientWidth||a.scrollHeight>t.clientHeight)&&n>12;)n-=1,a.style.fontSize=`${n}px`,l&&n<24&&(n-=.5)})},C=()=>{W.value+=1,M()},L=()=>{N()},E=t=>t.sort(()=>Math.random()-.5),M=()=>{if(i.value.length===0){B("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}if(e.value&&!e.value.isIntro&&h.value.push({...e.value,isShowingTranslation:r.value}),e.value=i.value.pop(),r.value){const t=e.value.eng,a=e.value.ru;e.value.eng=a,e.value.ru=t}v(),u()},N=()=>{if(h.value.length===0)return;e.value&&i.value.push(e.value);const t=h.value.pop();if(e.value={eng:t.eng,ru:t.ru},t.isShowingTranslation){const a=e.value.eng,l=e.value.ru;e.value.eng=l,e.value.ru=a,r.value=!0}else r.value=!1;v()},S=()=>{const t=e.value.eng,a=e.value.ru;e.value.eng=a,e.value.ru=t,r.value=!r.value,v()},z=t=>{c.value[t]=!0},v=()=>{e.value.ru&&(c.value=Array(e.value.ru.length).fill(!1))},B=t=>{w.value=t,_.value=!0},D=()=>{_.value=!1},k=t=>{t.touches&&t.touches.length>1&&(t.preventDefault(),t.stopPropagation())};return I(()=>e.value.eng,()=>{u()}),$(()=>{u(),window.addEventListener("resize",u);const t=b.params.missionName;p.value=K[t]||[],i.value=E([...p.value]),e.value={eng:"\u041B\u0438\u0441\u0442\u0430\u0439 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434\u0438",ru:"\u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",isIntro:!0},v(),document.addEventListener("dblclick",k),document.addEventListener("touchstart",k,{passive:!1});const a=document.createElement("meta");a.name="viewport",a.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",document.head.appendChild(a)}),F(()=>{window.removeEventListener("resize",u)}),(t,a)=>p.value.length?(d(),m("div",P,[_.value?(d(),m("div",U,[o("div",Z,[o("p",null,g(w.value),1),o("button",{onClick:D},"OK")])])):y("",!0),o("div",j,[o("button",{class:"nav-button prev-button",onClick:L},"\u2039"),o("div",J,[o("div",{class:"word-card",onClick:S},[o("div",{class:"word",ref_key:"wordText",ref:f},g(e.value.eng),513)]),o("div",Q,[(d(!0),m(R,null,V(e.value.ru.split(""),(l,n)=>(d(),m("div",{class:A(["hint-box",{revealed:c.value[n]}]),key:n,onClick:x=>z(n)},g(c.value[n]?l:"?"),11,X))),128))])]),o("button",{class:"nav-button next-button",onClick:C},"\u203A")])])):y("",!0)}};var se=O(Y,[["__scopeId","data-v-a793393a"]]);export{se as default};
