import{u as J,r as l,o as Z,D as W,f as m,b as u,c as o,e as s,t as n,y as F,F as ee,q as se,j as f,w as te,k as ae,C as ne,n as L}from"./index.f9d501bb.js";import{N as le}from"./NewFuturisticStyle.39089f56.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";const oe={key:0,class:"futuristic-container"},re={key:0,class:"results-screen"},ie={class:"results-stats"},ce={class:"stat correct-stat"},ve={class:"stat-value"},de={class:"stat attempts-stat"},pe={class:"stat-value"},fe={class:"success-rate"},he={class:"rate-value"},_e={key:1},me={class:"neon-header"},ge={class:"glowing-text"},we={key:0,class:"data-chip"},ke={class:"word-grid"},be={class:"cyber-word"},ye={class:"cyber-translation"},Ce={class:"task-card"},Ee={class:"task-id"},Ae={class:"cyber-title"},Te={key:0,class:"media-frame"},xe=["src"],Se={class:"question-input-container"},Ie={class:"question-text"},Ne={key:0,class:"result-display"},Re={key:1,class:"explanation-text"},Le={class:"explanation-content"},Qe={key:0,class:"correct-answer-text"},Oe={class:"answer-highlight"},Pe={class:"buttons-container"},Me=["disabled"],De={__name:"GameTagQuestions",setup(qe){const U=J(),v=l(null),S=l(null),d=l(0),r=l(""),a=l(!1),g=l(!1),I=l(!1),C=l(0),Q=l(0),N=l(0),w=l([]),E=l(0),k=l(""),y=l(!1);Z(()=>{const t=U.params.missionName;v.value=le[t]||null,R()});const R=()=>{W(()=>{S.value&&S.value.focus()})},A=m(()=>{var t,e;return((e=(t=v.value)==null?void 0:t.tasks[0])==null?void 0:e.questions[d.value])||{}}),T=m(()=>{var t,e;return((e=(t=v.value)==null?void 0:t.tasks[0])==null?void 0:e.questions.length)||0}),V=m(()=>a.value?x.value?"input-correct":"input-incorrect":""),z=m(()=>x.value?"correct-answer":"incorrect-answer"),O=m(()=>d.value===T.value-1),B=m(()=>T.value?Math.round(C.value/T.value*100):0),G=t=>t?t.split(",").map(e=>{const[p,i]=e.split("-").map(c=>c.trim());return{english:p,russian:i}}):[],P=()=>j(r.value,A.value.correctAnswer),b=()=>{if(!r.value.trim()){y.value=!0,setTimeout(()=>{y.value=!1},2e3);return}if(!r.value.trim()){alert("Please enter your answer");return}if(a.value&&r.value===k.value)return;if(E.value>=2){alert("You have used all attempts for this question");return}a.value=!0,E.value++,N.value++,k.value=r.value;const t=P();w.value[d.value]||(w.value[d.value]={wasCorrect:!1,incorrectAttempts:0}),t?w.value[d.value].wasCorrect||(w.value[d.value].wasCorrect=!0,C.value++):(w.value[d.value].incorrectAttempts++,Q.value++)},M=t=>t?t.toLowerCase().trim().replace(/\s+/g," ").replace(/['’‘`"“”]/g,"").replace(/[.,!?;:]$/g,"").replace(/[-–—]/g," ").replace(/\s+/g," ").trim():"",X=(t,e)=>{if(["he","she","is","are","was","were","do","does","have","has","should","could","would"].includes(e.toLowerCase()))return t.toLowerCase()===e.toLowerCase();if(t.length===e.length){let i=0;for(let c=0;c<t.length;c++)if(t[c]!==e[c]&&(i++,i>1))return!1;return!0}if(Math.abs(t.length-e.length)===1){const i=t.length>e.length?t:e,c=t.length>e.length?e:t;for(let h=0,_=0;h<i.length;h++)if(i[h]===c[_])_++;else if(h!==_)return!1;return!0}return!1},j=(t,e)=>{const p=M(t),i=M(e);if(p===i)return!0;const c=p.split(" "),h=i.split(" ");if(c.length!==h.length)return!1;for(let _=0;_<h.length;_++){const D=c[_],q=h[_];if(D!==q&&!X(D,q))return!1}return!0},x=m(()=>a.value?P():!1),H=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&b(),d.value++,r.value="",a.value=!1,g.value=!1,E.value=0,k.value="",R()},K=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&b(),I.value=!0},Y=()=>{g.value=!g.value},$=()=>{d.value=0,r.value="",a.value=!1,g.value=!1,I.value=!1,C.value=0,Q.value=0,N.value=0,E.value=0,k.value="",w.value=[],R()};return(t,e)=>v.value?(u(),o("div",oe,[I.value?(u(),o("div",re,[e[4]||(e[4]=s("h2",{class:"glowing-text"},"MISSION COMPLETE",-1)),s("div",ie,[s("div",ce,[s("span",ve,n(C.value),1),e[1]||(e[1]=s("span",{class:"stat-label"},"CORRECT ANSWERS",-1))]),s("div",de,[s("span",pe,n(N.value),1),e[2]||(e[2]=s("span",{class:"stat-label"},"TOTAL ATTEMPTS",-1))])]),s("div",fe,[e[3]||(e[3]=F(" SUCCESS RATE: ")),s("span",he,n(B.value)+"%",1)]),s("button",{onClick:$,class:"cyber-button restart-btn"}," RESTART MISSION ")])):(u(),o("div",_e,[s("div",me,[s("h2",ge,n(v.value.mainDescription),1),e[5]||(e[5]=s("p",{class:"cyber-description"},"training protocol - \u0443\u0442\u043E\u0447\u043D\u044F\u044E\u0449\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",-1))]),v.value.tasks[0].usefulWords?(u(),o("div",we,[e[7]||(e[7]=s("div",{class:"chip-header"},"hints = \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",-1)),s("div",ke,[(u(!0),o(ee,null,se(G(v.value.tasks[0].usefulWords),(p,i)=>(u(),o("div",{key:i,class:"word-pair"},[s("span",be,n(p.english),1),e[6]||(e[6]=s("span",{class:"cyber-separator"},"::",-1)),s("span",ye,n(p.russian),1)]))),128))])])):f("",!0),s("div",Ce,[s("div",Ee,n(d.value+1)+"/"+n(T.value),1),s("h3",Ae,n(v.value.tasks[0].taskDescription),1),v.value.tasks[0].taskPicture?(u(),o("div",Te,[s("img",{src:v.value.tasks[0].taskPicture,class:"holographic-img"},null,8,xe)])):f("",!0),s("div",Se,[s("div",Ie,n(A.value.text),1),te(s("input",{ref_key:"answerInput",ref:S,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p),onKeyup:ne(b,["enter"]),class:L(["cyber-input",V.value])},null,34),[[ae,r.value]]),a.value?(u(),o("div",Ne,[s("span",{class:L(z.value)},n(x.value?"\u2713 CORRECT":"\u2717 INCORRECT \u043C\u043E\u0436\u043D\u043E \u043B\u0438\u0431\u043E \u0438\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C/\u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u043E\u0439 \u043E\u0442\u0432\u0435\u0442 \u0438\u043B\u0438 \u043D\u0430\u0436\u0430\u0442\u044C next"),3)])):f("",!0),g.value&&a.value?(u(),o("div",Re,[s("div",Le,n(A.value.explanation),1),x.value?f("",!0):(u(),o("div",Qe,[e[8]||(e[8]=F(" Correct answer: ")),s("span",Oe,n(A.value.correctAnswer),1)]))])):f("",!0),s("div",Pe,[a.value?f("",!0):(u(),o("button",{key:0,onClick:b,class:L(["cyber-button verify-btn",{warning:y.value}]),disabled:y.value},n(y.value?"PLEASE \u0445\u043E\u0442\u044C \u0447\u0442\u043E-\u0442\u043E \u0432\u043F\u0438\u0448\u0438":"VERIFY"),11,Me)),a.value?(u(),o("button",{key:1,onClick:Y,class:"holographic-btn"},n(g.value?"HIDE EXPLANATION":"PLEASE, EXPLAIN"),1)):f("",!0),a.value&&!O.value?(u(),o("button",{key:2,onClick:H,class:"cyber-button next-btn"}," NEXT QUESTION ")):f("",!0),a.value&&O.value?(u(),o("button",{key:3,onClick:K,class:"cyber-button finish-btn"}," FINISH MISSION ")):f("",!0)])])])]))])):f("",!0)}};var ze=ue(De,[["__scopeId","data-v-7b1b43bd"]]);export{ze as default};
