import{p as H,u as O,b as i,i as h,d as U,o as a,f as o,h as n,l as r,t as v,F as W,q as w,n as T}from"./index.50dd3d51.js";import{s as V}from"./short-pictures-data.8e9f7b6f.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";const q={key:0,class:"game-container"},z={key:0,class:"modal-overlay"},A={class:"modal-content"},K=["innerHTML"],J={class:"game-content-wrapper"},Q={class:"main-content"},X=["src","alt"],Y={key:1,class:"text-content"},Z={key:2,class:"emoji-content"},ee={class:"emoji"},te={key:3,class:"text-content"},se={key:4,class:"translation-overlay"},ae={key:0,class:"multiple-choice-answers"},oe={class:"options-container"},ne=["onClick"],le={key:1,class:"hint-container"},ue=["onClick"],ie={__name:"GamePictures",setup(re){H();const L=O(),_=i([]),m=i([]),p=i([]),t=i({}),f=i(!1),y=i(""),c=i(!1),d=i([]),u=h(()=>{var s,l;if((s=t.value)!=null&&s.multipleChoice)return"multipleChoice";if(!((l=t.value)!=null&&l.taskPicture))return"text";const e=t.value.taskPicture;return typeof e=="string"&&(e.startsWith("http")||e.startsWith("/")||e.includes("assets"))?"image":/\p{Emoji}/u.test(e)?"emoji":"text"}),M=h(()=>{var e;return(e=t.value)!=null&&e.multipleChoice?t.value.multipleChoice.split(",").map(C=>{const s=C.trim();return{text:s.replace("*",""),isCorrect:s.includes("*"),original:s}}):[]}),j=e=>{e.isCorrect?(g("\u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E! \u2705"),setTimeout(P,1e3)):g("\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437! \u274C")},N=()=>{P()},R=()=>{I()},S=e=>e.sort(()=>Math.random()-.5),P=()=>{if(m.value.length===0){g("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 <br> #vismyfriend is proud of you!");return}t.value&&!t.value.isIntro&&p.value.push({...t.value,isShowingTranslation:c.value}),t.value=m.value.pop(),k(),c.value=!1},I=()=>{if(p.value.length===0)return;t.value&&m.value.push(t.value);const e=p.value.pop();t.value=e,c.value=e.isShowingTranslation,k()},x=()=>{c.value=!c.value},B=e=>{d.value[e]=!0},k=()=>{t.value.eng?d.value=t.value.eng.split("").map(e=>e===" "):d.value=[]},g=e=>{y.value=e,f.value=!0},D=()=>{f.value=!1};h(()=>{var e;return u.value==="multipleChoice"&&((e=t.value)==null?void 0:e.taskPicture)&&(t.value.taskPicture.startsWith("http")||t.value.taskPicture.startsWith("/")||t.value.taskPicture.includes("assets"))});const G=h(()=>{var e;return u.value==="image"||u.value==="multipleChoice"&&b((e=t.value)==null?void 0:e.taskPicture)}),E=h(()=>{var e;return u.value==="text"||u.value==="multipleChoice"&&!b((e=t.value)==null?void 0:e.taskPicture)}),b=e=>e&&(e.startsWith("http")||e.startsWith("/")||e.includes("assets"));return U(()=>{const e=L.params.missionName;_.value=V[e]||[],m.value=S([..._.value]),t.value={taskPicture:new URL("/special/assets/testPic1.2ce517a3.png",self.location).href,eng:"Next>",rus:"\u0421\u044E\u0434\u0430 \u0442\u043E\u0436\u0435 \u043C\u043E\u0436\u043D\u043E \u043A\u043B\u0438\u043A\u0430\u0442\u044C",isIntro:!0},k(),x()}),(e,C)=>_.value.length?(a(),o("div",q,[f.value?(a(),o("div",z,[n("div",A,[n("p",{innerHTML:y.value},null,8,K),n("button",{onClick:D},"OK")])])):r("",!0),n("div",J,[n("button",{class:"nav-button prev-button",onClick:R},"\u2039"),n("div",Q,[n("div",{class:"content-card",onClick:x},[G.value?(a(),o("img",{key:0,src:t.value.taskPicture,alt:t.value.eng,class:"content-image"},null,8,X)):r("",!0),E.value?(a(),o("div",Y,v(t.value.taskPicture),1)):u.value==="emoji"?(a(),o("div",Z,[n("span",ee,v(t.value.taskPicture),1)])):u.value==="text"?(a(),o("div",te,v(t.value.taskPicture),1)):r("",!0),c.value?(a(),o("div",se,v(t.value.rus),1)):r("",!0)]),u.value==="multipleChoice"?(a(),o("div",ae,[n("div",oe,[(a(!0),o(W,null,w(M.value,(s,l)=>(a(),o("button",{key:l,onClick:F=>j(s),class:T({correct:s.isCorrect})},v(s.text),11,ne))),128))])])):r("",!0),!t.value.multipleChoice&&t.value.eng?(a(),o("div",le,[(a(!0),o(W,null,w(t.value.eng.split(""),(s,l)=>(a(),o("div",{class:T(["hint-box",{revealed:d.value[l],space:s===" "}]),key:l,onClick:F=>B(l)},v(d.value[l]?s:s===" "?" ":"?"),11,ue))),128))])):r("",!0)]),n("button",{class:"nav-button next-button",onClick:N},"\u203A")])])):r("",!0)}};var he=$(ie,[["__scopeId","data-v-746bfaff"]]);export{he as default};
