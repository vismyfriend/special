import{_ as ce}from"./wiresPic.723153a1.js";import{p as ie,u as ve,r,f as de,C as G,o as me,b as h,c as g,e as c,F as S,q as j,s as D,t as k,E as I,n as fe,j as Q}from"./index.7e4bc44d.js";import{u as he}from"./example-store.69cb1dd1.js";import{s as ge}from"./short-words-data.db73cbb7.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";const _e={class:"progress-container"},ye={class:"progress-bar"},we={class:"game-visual-wrapper"},ke={class:"game-container"},Ce={class:"answers-container"},Ae=["onClick"],be={class:"textOnCard"},Le={key:0,class:"hint"},Me={key:0,class:"error-text"},Re=["data-is-word"],Te={__name:"GameFindPairsWires",setup(Pe){const H=ie(),J=ve(),$=he(),q=r(),P=r([]),_=r({}),L=r([]),M=r(null),C=r(!1),d=r(0),R=r([]),N=r(0),K=r(0),x=r(0),y=r(0),p=r([]),m=r(null),i=r([]),F=r(null),w=r([]),f=r([]);de(()=>`${y.value}%`);const U=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},Z=t=>{const a=y.value,s=performance.now(),l=o=>{const v=o-s,n=Math.min(v/500,1);y.value=a+(t-a)*n,n<1&&requestAnimationFrame(l)};requestAnimationFrame(l)};G([x,f],([t,e])=>{const a=e.length;if(a===0){y.value=0;return}const s=t/a*100;Z(Math.min(s,100))},{immediate:!0});const T=r([]),O=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],W=["YES!","Great","Awesome","Super","Correct"],A=r([]),ee=()=>{const t=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return t[Math.floor(Math.random()*t.length)]},B=()=>{if(!m.value||!F.value||i.value.length===0)return;const t=F.value;t.innerHTML="";const e=t.getBoundingClientRect(),a=m.value.getBoundingClientRect();i.value.forEach(s=>{if(!s)return;const l=s.getBoundingClientRect(),o=a.right-a.width/4-e.left,v=a.top+a.height/2-e.top,n=l.left+l.width/4-e.left,b=l.top+l.height/2-e.top,u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1",o),u.setAttribute("y1",v),u.setAttribute("x2",n),u.setAttribute("y2",b),u.setAttribute("stroke",ee()),u.setAttribute("stroke-width","3"),u.setAttribute("stroke-linecap","round"),t.appendChild(u)})};G(_,async()=>{await I(),B()}),G(()=>L.value,async()=>{await I(),B()});const Y=t=>t.sort(()=>Math.random()-.5),te=t=>{const e=P.value,a=e.find(n=>n.eng===t),s=e.filter(n=>n.eng!==t),v=[...Array.from(new Set(s.map(n=>n.eng))).map(n=>s.find(b=>b.eng===n)).slice(0,3),a];return Y(v)},z=async()=>{if(d.value>=f.value.length&&w.value.length===0){ae();return}d.value>=f.value.length&&w.value.length>0&&(f.value=[...f.value,...w.value],w.value=[]);const t=f.value[d.value];_.value=t;const e=t.eng;L.value=te(e),M.value=null,C.value=!1,R.value=Array(L.value.length).fill(!1),await I(),B()};let E=[],V=0;const se=(t,e)=>{M.value=t;const a=_.value.eng;C.value=t===a;const s=!p.value[d.value]&&p.value[d.value]!==!1;if(C.value){s?p.value[d.value]=!0:p.value[d.value]=!1,x.value++;const l=Math.random()>.5;A.value[e]=l?W[Math.floor(Math.random()*W.length)]:t,i.value[e]&&i.value[e].classList.add("correct-pulse"),m.value&&(m.value.classList.remove("pulsing"),m.value.classList.add("correct-pulse")),setTimeout(()=>{A.value[e]=""},1200),setTimeout(()=>{i.value[e]&&i.value[e].classList.remove("correct-pulse"),m.value&&(m.value.classList.remove("correct-pulse"),m.value.classList.add("pulsing"))},1200),setTimeout(()=>{d.value++,z()},800)}else s&&(p.value[d.value]=!1),w.value.some(o=>o.ru===_.value.ru)||w.value.push(_.value),i.value.forEach(o=>{o&&o.classList.add("shake")}),i.value.forEach(o=>{if(!o)return;const v=i.value[e].getBoundingClientRect(),n=v.left+v.width/2,b=v.top+v.height/2,u=o.getBoundingClientRect(),oe=u.left+u.width/2,re=u.top+u.height/2,le=(oe-n)*.6,ne=(re-b)*.6,ue=(Math.random()-.5)*20;o.style.setProperty("--dx",`${le}px`),o.style.setProperty("--dy",`${ne}px`),o.style.setProperty("--angle",`${ue}deg`),o.classList.add("explode"),o.classList.add("shake"),setTimeout(()=>{o.classList.remove("explode"),o.classList.remove("shake")},600)}),setTimeout(()=>{i.value.forEach(o=>{o&&o.classList.remove("shake")})},500),V+=1,T.value[e]=O[Math.floor(Math.random()*O.length)],R.value[e]=!0,setTimeout(()=>{T.value[e]=""},1500)},ae=()=>{const t=Date.now()-X;$.setLastGameResults(t,V),$.setGameName("FindPairsEasy"),H.push("/leader-board/")};let X=null;return me(()=>{q.value=J.params.missionName,P.value=ge[q.value]||[],E=Y([...P.value]).slice(0,12),N.value=E.length,K.value=N.value,f.value=[...E],X=Date.now(),z(),p.value=Array(f.value.length).fill(null)}),(t,e)=>(h(),g(S,null,[c("div",_e,[c("div",ye,[(h(!0),g(S,null,j(p.value,(a,s)=>(h(),g("div",{key:s,class:"progress-segment",style:D({width:`${100/f.value.length}%`,"background-color":a===!0?"#34aefa":a===!1?"#f36f78":"transparent"})},null,4))),128))]),c("div",{class:"progress-text",style:D({opacity:y.value>75?0:1})},k(Math.round(y.value))+"% ",5)]),c("div",we,[(h(),g("svg",{class:"lines-overlay",ref_key:"svgLines",ref:F,style:{width:"100%",height:"100%"}},null,512)),c("div",ke,[c("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:m},k(_.value.ru),513),c("div",Ce,[(h(!0),g(S,null,j(L.value,(a,s)=>(h(),g("div",{key:s,style:{position:"relative"}},[c("div",{class:fe(["wordCard",{active:M.value===a.eng&&!C.value,correct:C.value&&M.value===a.eng,fade:R.value[s]}]),onClick:l=>se(a.eng,s),ref_for:!0,ref:l=>i.value[s]=l,style:D({opacity:R.value[s]?0:1})},[c("div",null,[c("div",be,k(a.eng),1),a.hint?(h(),g("div",Le,k(a.hint),1)):Q("",!0)])],14,Ae),T.value[s]?(h(),g("div",Me,k(T.value[s]),1)):Q("",!0),A.value[s]?(h(),g("div",{key:1,class:"positive-text","data-is-word":!W.includes(A.value[s])},k(A.value[s]),9,Re)):Q("",!0)]))),128))])])]),c("div",{class:"image-container"},[e[0]||(e[0]=c("img",{src:ce,alt:"Wire Cutter",class:"cutter-image"},null,-1)),c("button",{class:"action-button",onClick:U},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Se=pe(Te,[["__scopeId","data-v-fc354114"]]);export{Se as default};
