import{r as C,p as A,o as W,a as j,b as E,c as b,e as k,j as D}from"./index.00275f52.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";const O={key:0,class:"success-message"},g=100,p=60,u=15,x=20,S=80,B=.2,U={__name:"canvasTest",setup(V){const h=C(null);A();const c=[{text:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",color:"#FF0000"},{text:"\u041E\u0440\u0430\u043D\u0436\u0435\u0432\u044B\u0439",color:"#FF7F00"},{text:"\u0416\u0435\u043B\u0442\u044B\u0439",color:"#FFFF00"},{text:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",color:"#00FF00"},{text:"\u0413\u043E\u043B\u0443\u0431\u043E\u0439",color:"#00FFFF"},{text:"\u0421\u0438\u043D\u0438\u0439",color:"#0000FF"},{text:"\u0424\u0438\u043E\u043B\u0435\u0442\u043E\u0432\u044B\u0439",color:"#8B00FF"}];let d=[...c],o=null;const F=C(!1);let l=[],_=null;const L=()=>{const e=Math.floor(h.value.width/(g+x));Math.ceil(d.length/e),l=d.map((t,n)=>{const a=Math.floor(n/e),r=n%e,i=Math.min(d.length-a*e,e)*g+(Math.min(d.length-a*e,e)-1)*x,w=(h.value.width-i)/2,f=50+a*(p+S);return{...t,x:w+r*(g+x),y:f,width:g,height:p,targetX:w+r*(g+x),targetY:f,row:a,col:r,zIndex:n}})},R=()=>{d=[...c];for(let e=d.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[d[e],d[t]]=[d[t],d[e]]}L()},X=()=>{const e=h.value.getContext("2d");e.clearRect(0,0,h.value.width,h.value.height),l.forEach(t=>{t!==o&&(t.x+=(t.targetX-t.x)*B,t.y+=(t.targetY-t.y)*B,Math.abs(t.targetX-t.x)<.5&&(t.x=t.targetX),Math.abs(t.targetY-t.y)<.5&&(t.y=t.targetY))}),[...l].sort((t,n)=>t.zIndex-n.zIndex).forEach(t=>{t===o&&(e.save(),e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=15,e.shadowOffsetY=5),e.beginPath(),e.moveTo(t.x+u,t.y),e.lineTo(t.x+t.width-u,t.y),e.quadraticCurveTo(t.x+t.width,t.y,t.x+t.width,t.y+u),e.lineTo(t.x+t.width,t.y+t.height-u),e.quadraticCurveTo(t.x+t.width,t.y+t.height,t.x+t.width-u,t.y+t.height),e.lineTo(t.x+u,t.y+t.height),e.quadraticCurveTo(t.x,t.y+t.height,t.x,t.y+t.height-u),e.lineTo(t.x,t.y+u),e.quadraticCurveTo(t.x,t.y,t.x+u,t.y),e.closePath(),e.fillStyle=t.color,e.fill(),e.strokeStyle="#333",e.lineWidth=2,e.stroke(),e.fillStyle="#000",e.font="14px Arial",e.textAlign="center",e.textBaseline="middle";const n=t.text.split(" ");n.length>1?(e.fillText(n[0],t.x+t.width/2,t.y+t.height/2-10),e.fillText(n[1],t.x+t.width/2,t.y+t.height/2+10)):e.fillText(t.text,t.x+t.width/2,t.y+t.height/2),t===o&&e.restore()}),_=requestAnimationFrame(X)},z=()=>{var Y;if(!o)return;const e=[...new Set(l.map(s=>s.row))];let t=o.row,n=1/0;e.forEach(s=>{const v=l.find(q=>q.row===s).targetY,M=Math.abs(o.y-v);M<n&&(n=M,t=s)});const a=l.filter(s=>s.row===t&&s!==o).sort((s,v)=>s.targetX-v.targetX);let r=a.findIndex(s=>o.x<s.targetX);r===-1&&(r=a.length);const i=(a.length+1)*g+a.length*x;let f=(h.value.width-i)/2,y=0;for(let s=0;s<=a.length;s++)s===r?(o.targetX=f,o.targetY=((Y=l.find(v=>v.row===t))==null?void 0:Y.targetY)||50+t*(p+S),o.row=t,f+=g+x):y<a.length&&(a[y].targetX=f,f+=g+x,y++);l.forEach(s=>{s!==o&&s.zIndex>=o.zIndex&&s.zIndex--}),o.zIndex=l.length-1},I=e=>{const t=h.value.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;for(let r=0;r<l.length;r++){const i=l[r];if(n>i.x&&n<i.x+i.width&&a>i.y&&a<i.y+i.height){o=i,o.offsetX=n-i.x,o.offsetY=a-i.y;break}}},T=e=>{if(o){const t=h.value.getBoundingClientRect();o.x=e.clientX-t.left-o.offsetX,o.y=e.clientY-t.top-o.offsetY,z()}},m=()=>{o&&(o.x=o.targetX,o.y=o.targetY,P(),o=null)},P=()=>{const e=[...l].sort((t,n)=>t.row-n.row||t.targetX-n.targetX).map(t=>t.text);F.value=e.every((t,n)=>t===c[n].text)};return W(()=>{R(),X();const e=h.value;e.addEventListener("mousedown",I),e.addEventListener("mousemove",T),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",m)}),j(()=>{cancelAnimationFrame(_);const e=h.value;e.removeEventListener("mousedown",I),e.removeEventListener("mousemove",T),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",m)}),(e,t)=>(E(),b("div",null,[k("button",{class:"closeThisPage",onClick:t[0]||(t[0]=(...n)=>e.backToIntroPage&&e.backToIntroPage(...n))},"close Special App \u274C"),k("canvas",{ref_key:"myCanvas",ref:h,width:"800",height:"400"},null,512),F.value?(E(),b("div",O," \u0420\u0430\u0434\u0443\u0433\u0430 \u0441\u043E\u0431\u0440\u0430\u043D\u0430 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E! \u{1F308} ")):D("",!0)]))}};var J=N(U,[["__scopeId","data-v-ab6c539e"]]);export{J as default};
