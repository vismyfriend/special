import{p as L,r as p,f as P,o as F,b as r,c as i,e as t,t as n,i as l,F as w,y as v,j as m,q as T,J as k,n as D}from"./index.382059ff.js";import{u as E}from"./example-store.e2820914.js";import{a as V}from"./allSetsOfWordsList.a1f10016.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";const O={class:"result"},j={class:"congratulations-container"},J={class:"result-card"},U={class:"result-row"},W={class:"result-value time-value"},X={class:"result-row"},Y={class:"result-value mistakes-amount"},H={class:"result-row"},K={class:"result-value"},Q={class:"result-row"},Z={class:"result-value"},tt={class:"result-row"},et={class:"name-wrapper"},st={class:"result-value agent-name"},at={key:0,class:"unique-id"},nt={key:0,class:"leaderboard-wrapper"},ot={class:"leaderboard-container"},lt={class:"leaderboard"},rt={class:"player-name"},it={key:0,class:"unique-id"},ut={key:0,class:"highlight-row"},ct={class:"player-name"},dt={key:0,class:"unique-id"},mt={class:"buttons-container"},gt={__name:"LeaderBoard",setup(_t){const h=L(),a=E(),c=p([]),g=p(),_=p(!1),b=p(a.$state.agentName===null),y=async s=>{try{const o=(await k.auth.getToken(s)).data.token;return localStorage.setItem("token",o),localStorage.setItem("agentName",s),a.setAgentName(s),o}catch(e){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0442\u043E\u043A\u0435\u043D\u0430:",e),e}},N=[{agent:"TurboAgent",time:"2.00",mistakes:0},{agent:"FlashSpeed",time:"2.15",mistakes:1},{agent:"Bond007",time:"2.61",mistakes:0},{agent:"Godzilla",time:"2.62",mistakes:2},{agent:"Mike",time:"2.63",mistakes:3},{agent:"Polina",time:"3.00",mistakes:0},{agent:"Monkey",time:"3.01",mistakes:1}],f=()=>{const s=new Date,e=String(s.getDate()).padStart(2,"0"),o=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getFullYear()).slice(-2),R=String(s.getMinutes()).padStart(2,"0"),q=String(s.getSeconds()).padStart(2,"0");return`${e}${o}${d}${R}${q}`},$=P(()=>_.value?c.value.slice(0,100):c.value.slice(0,7)),u=s=>{if(!s)return{name:"",id:""};const e=s.match(/^(.*?)(?:\s*\(([^)]+)\))?$/);return{name:e[1]||s,id:e[2]||""}},S=()=>h.push("/see-all-sets-of-words/"),A=()=>h.go(-1),B=()=>_.value=!_.value,C=s=>{const e=V.find(o=>o.missionName===s);return(e==null?void 0:e.missionDescription)||s},M=async()=>{try{const e=(await k.scores.get(a.gameName)).data.filter(o=>o.wordSet===a.$state.wordSet);c.value=Array.isArray(e)?e:N}catch(s){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0442\u0430\u0431\u043B\u0438\u0446\u044B \u043F\u043E\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u0435\u0439:",s),c.value=N}},x=()=>{c.value=c.value.sort((s,e)=>s.time-e.time),c.value.forEach((s,e)=>{s.time=s.time/1e3,s.agent===a.$state.agentName&&(g.value=e+1)})},G=()=>{h.push("/registration")},I=async()=>{if(!a.$state.agentName){const s=["\u0421\u0435\u043A\u0440\u0435\u0442\u043D\u044B\u0439 \u043F\u0430\u0440\u043D\u0438\u0448\u0430","\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0439 \u0430\u043D\u043E\u043D\u0438\u043C","\u041E\u0442\u0447\u0430\u044F\u043D\u043D\u044B\u0435 \u0434\u043E\u043C\u043E\u0445\u043E\u0437\u044F\u0439\u043A\u0438","\u0410\u0433\u0435\u043D\u0442 69","\u0441\u0442\u0443\u0434\u0435\u043D\u0442 \u0431\u0435\u0437 \u0438\u043C\u0435\u043D\u0438","Patrick","Alex","NONAME","test","Professor"],e=s[Math.floor(Math.random()*s.length)],o=f(),d=`${e} (${o})`;a.setAgentName(d),await y(d)}await k.scores.post(a.$state.gameName,a.$state.lastGameResults.time,a.$state.lastGameResults.mistakes,a.$state.agentName,a.$state.wordSet)};return F(async()=>{if(a.$state.agentName&&!localStorage.getItem("token")){let s=a.$state.agentName;if(!s.includes("(")){const e=f();s=`${s} (${e})`,a.setAgentName(s)}await y(s)}await I(),await M(),x()}),(s,e)=>(r(),i("div",O,[t("div",j,[e[5]||(e[5]=t("h2",{class:"congratulations-title"},"Congratulations!",-1)),t("div",J,[t("div",U,[e[0]||(e[0]=t("span",{class:"result-label"},"\u0412\u0440\u0435\u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F:",-1)),t("span",W,n((l(a).lastGameResults.time/1e3).toFixed(2))+" \u0441\u0435\u043A.",1)]),t("div",X,[e[1]||(e[1]=t("span",{class:"result-label"},"\u041E\u0448\u0438\u0431\u043E\u043A:",-1)),t("span",Y,n(l(a).lastGameResults.mistakes)+" mistake(s)",1)]),t("div",H,[e[2]||(e[2]=t("span",{class:"result-label"},"\u041C\u0438\u0441\u0441\u0438\u044F:",-1)),t("span",K,'"'+n(C(l(a).$state.wordSet))+'"',1)]),t("div",Q,[e[3]||(e[3]=t("span",{class:"result-label"},"\u0417\u0430\u0434\u0430\u043D\u0438\u0435:",-1)),t("span",Z,'"'+n(l(a).$state.gameName)+'"',1)]),t("div",tt,[e[4]||(e[4]=t("span",{class:"result-label"},"\u0412\u0430\u0448 \u043D\u0438\u043A\u043D\u0435\u0439\u043C:",-1)),t("div",et,[t("span",st,[l(a).$state.agentName?(r(),i(w,{key:0},[v(n(u(l(a).$state.agentName).name)+" ",1),u(l(a).$state.agentName).id?(r(),i("span",at," ("+n(u(l(a).$state.agentName).id)+") ",1)):m("",!0)],64)):m("",!0)]),b.value?(r(),i("button",{key:0,onClick:G,class:"change-name-btn"}," \u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0438\u043A\u043D\u0435\u0439\u043C ")):m("",!0)])])]),e[6]||(e[6]=t("p",{class:"share-message"},"\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u0441\u043A\u0440\u0438\u043D\u0448\u043E\u0442 \u0442\u0438\u0447\u0435\u0440\u0443, \u0447\u0442\u043E\u0431\u044B \u043E\u043D \u0433\u043E\u0440\u0434\u0438\u043B\u0441\u044F! \u{1F389}",-1))]),c.value?(r(),i("div",nt,[t("div",ot,[t("div",lt,[t("table",null,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"\u{1F3C6}"),t("th",null,"\u043B\u0443\u0447\u0448\u0438\u0435 \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043C\u044F :"),t("th",null,"time"),t("th",null,"fails")])],-1)),t("tbody",null,[(r(!0),i(w,null,T($.value,(o,d)=>(r(),i("tr",{key:d,class:D({"highlight-row":g.value===d+1})},[t("td",null,n(d+1),1),t("td",null,[t("span",rt,[v(n(u(o.agent).name)+" ",1),u(o.agent).id?(r(),i("span",it," ("+n(u(o.agent).id)+") ",1)):m("",!0)])]),t("td",null,n(o.time),1),t("td",null,n(o.mistakes),1)],2))),128)),g.value>$.value.length?(r(),i("tr",ut,[t("td",null,n(g.value),1),t("td",null,[t("span",ct,[v(n(u(l(a).agentName).name)+" ",1),u(l(a).agentName).id?(r(),i("span",dt," ("+n(u(l(a).agentName).id)+") ",1)):m("",!0),e[7]||(e[7]=t("span",{class:"you-badge"},"(you)",-1))])]),t("td",null,n((l(a).lastGameResults.time/1e3).toFixed(2)),1),t("td",null,n(l(a).lastGameResults.mistakes),1)])):m("",!0)])])])])])):m("",!0),t("div",mt,[t("button",{class:"close-btn",onClick:S},"X"),t("button",{class:"try-again-btn",onClick:A},"Try Again"),t("button",{class:"toggle-btn",onClick:B},n(_.value?"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u25B2":"\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u25BC"),1)])]))}};var yt=z(gt,[["__scopeId","data-v-3af994a2"]]);export{yt as default};
