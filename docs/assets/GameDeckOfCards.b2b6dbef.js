import{_ as $}from"./card.91d9cafc.js";import{p as z,u as F,r as o,f as V,E as Z,o as j,b as m,c as _,e as t,t as f,n as P,F as K,q as Q,s as N,j as O,i as J}from"./index.c2ab8d53.js";import{q as X}from"./questions-data.64fad927.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";const ee={key:0,class:"game-container"},te={class:"side-buttons"},ae=["disabled"],ne={class:"deck-of-cards"},se={class:"card-content"},oe={class:"card-text"},re={class:"word"},le={class:"timer-text"},ie={class:"remaining-cards",ref:"remainingCardsContainer"},ue={class:"card-content"},ce={class:"card-text"},ve={class:"word"},de={class:"translation"},R=1e3,me={__name:"GameDeckOfCards",setup(_e){z();const q=F(),B=/iPhone|iPad|iPod/i.test(navigator.userAgent),k=o([]),n=o(null);let u=[];const g=o([]),C=o(!1),c=o(!1);let T=null;const G=()=>{T&&clearTimeout(T),c.value=!0,T=setTimeout(()=>{c.value=!1},3e3)},b=o(!1),W=()=>{b.value=!0,d(),setTimeout(()=>{b.value=!1},300)},l=o(null),i=o(0),v=o(!1),A=()=>{if(v.value){clearInterval(l.value),l.value=null,i.value=0,v.value=!1;return}d(),i.value=77,v.value=!0,l.value=setInterval(()=>{!v.value||(i.value-=1,i.value<=0&&(clearInterval(l.value),l.value=null,v.value=!1,i.value=0,alert(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`)))},1e3)},H=e=>e.sort(()=>Math.random()-.5),d=async()=>{if(u.length===0){U();return}n.value&&!n.value.isIntro&&(c.value=!0,await new Promise(a=>setTimeout(a,500)),g.value.push(n.value));const e=u.pop();n.value=e,c.value=!1},y=()=>{if(g.value.length===0)return;const e=g.value.pop();n.value&&u.push(n.value),n.value=e},U=()=>{alert("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},D=V(()=>u),x=e=>{const s=e*4,h=10*Math.cos(s*Math.PI/180),w=10*Math.sin(s*Math.PI/180);return{"--x":`${h}px`,"--y":`${w}px`,"--angle":`${s}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:e}},S=e=>{e.key==="ArrowDown"?d():e.key==="ArrowUp"&&y()};let p=0,E=!0,I=!0;const L=e=>{const{beta:a}=e,r=Date.now(),s=125,h=30,w=90;a>h&&a<w&&(I=!0),a<s&&a>w&&(E=!0),a>s&&r-p>R&&E?(navigator.vibrate&&navigator.vibrate(30),d(),p=r,E=!1):a<h&&r-p>R&&I&&(navigator.vibrate&&navigator.vibrate(30),y(),p=r,I=!1)},M=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",L),C.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",L),C.value=!0))};return Z(()=>{clearInterval(l.value),l.value=null,window.removeEventListener("deviceorientation",L),window.removeEventListener("keydown",S)}),j(()=>{const e=q.params.missionName;k.value=X[e]||[],u=H([...k.value]),n.value={ru:"\u043E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},M(),window.addEventListener("keydown",S)}),(e,a)=>k.value.length?(m(),_("div",ee,[t("div",te,[t("button",{onClick:y,class:"game-btn",disabled:g.value.length===0}," Ctrl + Z ",8,ae)]),t("div",ne,[t("div",{class:"wordCard",onClick:G},[t("div",se,[t("div",oe,[t("div",re,f(n.value.eng),1),t("div",{class:P(["translation",{blurred:!c.value&&!n.value.isIntro}])},f(n.value.ru),3)])])]),t("div",{class:"timer-block",onClick:A,role:"button"},[t("span",le,f(i.value>0?`${i.value} seconds`:"Start"),1)]),t("div",ie,[(m(!0),_(K,null,Q(D.value,(r,s)=>(m(),_("div",{class:"remaining-card",onClick:d,key:s,style:N(x(s)),role:"button"},[t("div",ue,[t("div",ce,[t("div",ve,f(r.eng),1),t("div",de,f(r.ru),1)])])],4))),128)),D.value.length>0?(m(),_("div",{key:0,class:P(["card-back-cover",{tapped:b.value}]),style:N(x(D.value.length-1)),onClick:W},a[0]||(a[0]=[t("img",{src:$,alt:"Card Back",role:"button"},null,-1)]),6)):O("",!0)],512)]),!C.value&&J(B)?(m(),_("button",{key:0,onClick:M,class:"enable-tilt-btn"}," \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 -> \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):O("",!0)])):O("",!0)}};var we=Y(me,[["__scopeId","data-v-73b011ca"]]);export{we as default};
