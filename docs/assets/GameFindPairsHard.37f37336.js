import{p as q,u as z,r as i,f as x,C as L,o as T,b as c,c as u,e as m,s as V,t as h,j as M,F as E,q as S,n as A}from"./index.d44636d7.js";import{s as J}from"./short-words-data.0ad16f0d.js";import{u as K}from"./example-store.60c88486.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const Q={class:"game-wrapper",style:{backgroundImage:"url(/background.jpg)"}},U={class:"progress-container"},X={key:0,class:"progress-text"},Y={key:0,class:"row"},Z={class:"col"},W=["onClick"],ee={class:"col"},se=["onClick"],ae={__name:"GameFindPairsHard",setup(te){const H=q(),N=z(),g=K(),b=a=>a.sort(()=>Math.random()-.5),k=i(),r=i(),l=i([]),n=i([]),C=i(0),p=i(0),y=i(5),v=i(0),w=x(()=>{var a;return((a=r.value)==null?void 0:a.length)||0}),R=x(()=>`${v.value/w.value*100}%`),d=i(0),P=()=>{const a=Math.round(v.value/w.value*100);d.value<a?(d.value+=1,requestAnimationFrame(P)):d.value=a};L(v,P);const B=(a,s)=>b(a).slice(0,s),f=a=>{var e;let s=(e=r.value)==null?void 0:e.map(t=>({id:t.id,lang:t[a],active:!1,visible:!0}));return s=s.slice(p.value,y.value),b(s)},_=a=>{switch(a){case"left":l.value.forEach(s=>s.active=!1);break;case"right":n.value.forEach(s=>s.active=!1);break;default:l.value.forEach(s=>s.active=!1),n.value.forEach(s=>s.active=!1);break}},G=(a,s)=>{let e,t;if(s==="left"){if(_(s),e=l.value.find(o=>o.id===a),e.active=!0,t=n.value.find(o=>o.active),!t)return}else if(_(s),t=n.value.find(o=>o.id===a),t.active=!0,e=l.value.find(o=>o.active),!e)return;e.id===t.id?$(t,e):D(e,t),_()},D=(a,s)=>{a.pulseWrong=!0,s.pulseWrong=!0,setTimeout(()=>{a.pulseWrong=!1,s.pulseWrong=!1},600)},$=(a,s)=>{a.pulse=!0,s.pulse=!0,v.value++,setTimeout(()=>{a.visible=!1,s.visible=!1,a.pulse=!1,s.pulse=!1,l.value.every(I=>!I.visible)&&F()},500),l.value.every(t=>!t.visible)&&F()},F=()=>{y.value+=5,p.value+=5,p.value<r.value.length?(n.value=f("ru"),l.value=f("eng")):j()},j=()=>{g.setLastGameResults(C.value,20),g.setGameName("FindPairsHard"),H.push("/leader-board/")};return T(()=>{k.value=N.params.missionName,r.value=J[k.value],r.value=B(r.value,20),n.value=f("ru"),l.value=f("eng"),setInterval(()=>{C.value+=10},10)}),(a,s)=>(c(),u("div",Q,[m("div",U,[m("div",{class:"progress-bar",style:V({width:R.value})},null,4),v.value>0?(c(),u("div",X,h(d.value)+"%",1)):M("",!0)]),r.value?(c(),u("div",Y,[m("div",Z,[(c(!0),u(E,null,S(l.value,e=>(c(),u("div",{class:A(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>G(e.id,"left")},h(e.lang),11,W))),128))]),m("div",ee,[(c(!0),u(E,null,S(n.value,e=>(c(),u("div",{class:A(["wordCard",[e.active?"active":"",e.visible?"":"faded",e.pulse?"pulse-once":"",e.pulseWrong?"pulse-wrong":""]]),key:e.id,onClick:t=>G(e.id,"right")},h(e.lang),11,se))),128))])])):M("",!0)]))}};var oe=O(ae,[["__scopeId","data-v-4e1ed269"]]);export{oe as default};
