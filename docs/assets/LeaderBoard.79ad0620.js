import{p as q,r as v,f as P,o as T,J as N,b as r,c as i,e as t,t as o,i as l,F as S,y,j as m,q as F,n as L}from"./index.3961badb.js";import{u as D}from"./example-store.e6e00cdc.js";import{a as E}from"./allSetsOfWordsList.a1f10016.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";const z={class:"result"},O={class:"congratulations-container"},j={class:"result-card"},J={class:"result-row"},U={class:"result-value time-value"},W={class:"result-row"},X={class:"result-value mistakes-amount"},Y={class:"result-row"},H={class:"result-value"},K={class:"result-row"},Q={class:"result-value"},Z={class:"result-row"},tt={class:"name-wrapper"},et={class:"result-value agent-name"},st={key:0,class:"unique-id"},at={key:0,class:"leaderboard-wrapper"},nt={class:"leaderboard-container"},ot={class:"leaderboard"},lt={class:"player-name"},rt={key:0,class:"unique-id"},it={key:0,class:"highlight-row"},ut={class:"player-name"},ct={key:0,class:"unique-id"},dt={class:"buttons-container"},mt={__name:"LeaderBoard",setup(gt){const h=q(),a=D(),d=v([]),g=v(),_=v(!1),A=v(a.$state.agentName===null),$=async s=>{try{const n=(await N.auth.getToken(s)).data.token;return localStorage.setItem("token",n),localStorage.setItem("agentName",s),a.setAgentName(s),n}catch(e){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0442\u043E\u043A\u0435\u043D\u0430:",e),e}},f=[{agent:"TurboAgent",time:"2.00",mistakes:0},{agent:"FlashSpeed",time:"2.15",mistakes:1},{agent:"Bond007",time:"2.61",mistakes:0},{agent:"Godzilla",time:"2.62",mistakes:2},{agent:"Mike",time:"2.63",mistakes:3},{agent:"Polina",time:"3.00",mistakes:0},{agent:"Monkey",time:"3.01",mistakes:1}],b=()=>{const s=new Date,e=String(s.getDate()).padStart(2,"0"),n=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getFullYear()).slice(-2),k=String(s.getMinutes()).padStart(2,"0"),p=String(s.getSeconds()).padStart(2,"0");return`${e}${n}${c}${k}${p}`},w=P(()=>_.value?d.value.slice(0,100):d.value.slice(0,30)),u=s=>{if(!s)return{name:"",id:""};const e=s.match(/^(.*?)(?:\s*\(([^)]+)\))?$/);return{name:e[1]||s,id:e[2]||""}},C=()=>h.push("/see-all-sets-of-words/"),I=()=>h.go(-1),M=()=>_.value=!_.value,x=s=>{const e=E.find(n=>n.missionName===s);return(e==null?void 0:e.missionDescription)||s},B=async()=>{try{const e=(await N.scores.get(a.gameName)).data.filter(n=>n.wordSet===a.$state.wordSet);d.value=Array.isArray(e)?e:f}catch(s){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0442\u0430\u0431\u043B\u0438\u0446\u044B \u043F\u043E\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u0435\u0439:",s),d.value=f}},G=()=>{d.value=d.value.sort((s,e)=>s.time-e.time),d.value.forEach((s,e)=>{s.time=s.time/1e3,s.agent===a.$state.agentName&&(g.value=e+1)})},R=()=>{h.push("/registration")};return T(async()=>{const s=localStorage.getItem("agentName"),e=localStorage.getItem("token");if(s&&s!==a.$state.agentName&&a.setAgentName(s),!a.$state.agentName&&!s){const n=["\u0421\u0435\u043A\u0440\u0435\u0442\u043D\u044B\u0439 \u043F\u0430\u0440\u043D\u0438\u0448\u0430","\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0439 \u0430\u043D\u043E\u043D\u0438\u043C","\u041E\u0442\u0447\u0430\u044F\u043D\u043D\u044B\u0435 \u0434\u043E\u043C\u043E\u0445\u043E\u0437\u044F\u0439\u043A\u0438","\u0410\u0433\u0435\u043D\u0442 69","\u0441\u0442\u0443\u0434\u0435\u043D\u0442 \u0431\u0435\u0437 \u0438\u043C\u0435\u043D\u0438","Patrick","Alex","NONAME","test","Professor"],c=n[Math.floor(Math.random()*n.length)],k=b(),p=`${c} (${k})`;a.setAgentName(p),await $(p)}else if(a.$state.agentName&&!e){let n=a.$state.agentName;if(!n.includes("(")){const c=b();n=`${n} (${c})`,a.setAgentName(n)}await $(n)}await N.scores.post(a.$state.gameName,a.$state.lastGameResults.time,a.$state.lastGameResults.mistakes,a.$state.agentName,a.$state.wordSet),await B(),G()}),(s,e)=>(r(),i("div",z,[t("div",O,[e[5]||(e[5]=t("h2",{class:"congratulations-title"},"Congratulations!",-1)),t("div",j,[t("div",J,[e[0]||(e[0]=t("span",{class:"result-label"},"\u0412\u0440\u0435\u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F:",-1)),t("span",U,o((l(a).lastGameResults.time/1e3).toFixed(2))+" \u0441\u0435\u043A.",1)]),t("div",W,[e[1]||(e[1]=t("span",{class:"result-label"},"\u041E\u0448\u0438\u0431\u043E\u043A:",-1)),t("span",X,o(l(a).lastGameResults.mistakes)+" mistake(s)",1)]),t("div",Y,[e[2]||(e[2]=t("span",{class:"result-label"},"\u041C\u0438\u0441\u0441\u0438\u044F:",-1)),t("span",H,'"'+o(x(l(a).$state.wordSet))+'"',1)]),t("div",K,[e[3]||(e[3]=t("span",{class:"result-label"},"\u0417\u0430\u0434\u0430\u043D\u0438\u0435:",-1)),t("span",Q,'"'+o(l(a).$state.gameName)+'"',1)]),t("div",Z,[e[4]||(e[4]=t("span",{class:"result-label"},"\u0412\u0430\u0448 \u043D\u0438\u043A\u043D\u0435\u0439\u043C:",-1)),t("div",tt,[t("span",et,[l(a).$state.agentName?(r(),i(S,{key:0},[y(o(u(l(a).$state.agentName).name)+" ",1),u(l(a).$state.agentName).id?(r(),i("span",st," ("+o(u(l(a).$state.agentName).id)+") ",1)):m("",!0)],64)):m("",!0)]),A.value?(r(),i("button",{key:0,onClick:R,class:"change-name-btn"}," \u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0438\u043A\u043D\u0435\u0439\u043C ")):m("",!0)])])]),e[6]||(e[6]=t("p",{class:"share-message"},"\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u0441\u043A\u0440\u0438\u043D\u0448\u043E\u0442 \u0442\u0438\u0447\u0435\u0440\u0443, \u0447\u0442\u043E\u0431\u044B \u043E\u043D \u0433\u043E\u0440\u0434\u0438\u043B\u0441\u044F! \u{1F389}",-1))]),d.value?(r(),i("div",at,[t("div",nt,[t("div",ot,[t("table",null,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"\u{1F3C6}"),t("th",null,"\u043B\u0443\u0447\u0448\u0438\u0435 \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043C\u044F :"),t("th",null,"time"),t("th",null,"fails")])],-1)),t("tbody",null,[(r(!0),i(S,null,F(w.value,(n,c)=>(r(),i("tr",{key:c,class:L({"highlight-row":g.value===c+1})},[t("td",null,o(c+1),1),t("td",null,[t("span",lt,[y(o(u(n.agent).name)+" ",1),u(n.agent).id?(r(),i("span",rt," ("+o(u(n.agent).id)+") ",1)):m("",!0)])]),t("td",null,o(n.time),1),t("td",null,o(n.mistakes),1)],2))),128)),g.value>w.value.length?(r(),i("tr",it,[t("td",null,o(g.value),1),t("td",null,[t("span",ut,[y(o(u(l(a).agentName).name)+" ",1),u(l(a).agentName).id?(r(),i("span",ct," ("+o(u(l(a).agentName).id)+") ",1)):m("",!0),e[7]||(e[7]=t("span",{class:"you-badge"},"(you)",-1))])]),t("td",null,o((l(a).lastGameResults.time/1e3).toFixed(2)),1),t("td",null,o(l(a).lastGameResults.mistakes),1)])):m("",!0)])])])])])):m("",!0),t("div",dt,[t("button",{class:"close-btn",onClick:C},"X"),t("button",{class:"try-again-btn",onClick:I},"Try Again"),t("button",{class:"toggle-btn",onClick:M},o(_.value?"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u25B2":"\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u25BC"),1)])]))}};var kt=V(mt,[["__scopeId","data-v-816e795c"]]);export{kt as default};
