import{u as H,b as o,B as $,d as I,D as F,o as c,f as v,h as l,t as p,l as w,F as R,q as V,E as q,n as A}from"./index.30c503e9.js";import{s as K}from"./short-words-data.7f082e29.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const P={key:0,class:"game-container"},U={key:0,class:"modal-overlay"},Z={class:"modal-content"},j={class:"game-content-wrapper"},J={class:"main-content"},Q={key:0,class:"pronunciation-hint"},X={class:"hint-container"},Y=["onClick"],ee={__name:"GameTranslate",setup(te){const b=H(),f=o([]),r=o([]),d=o([]),e=o({}),_=o(!1),k=o(""),u=o(!1),W=o(0);o(0);const h=o([]),g=o(null),i=()=>{q(()=>{var T;const t=(T=g.value)==null?void 0:T.parentNode,a=g.value;if(!t||!a)return;const s=window.innerWidth<=600;let n=s?36:58;const y=s?.85:.8,G=s?5:10;for(a.style.fontSize=`${n}px`,a.style.lineHeight=y,a.style.padding=`${G}px`;(a.scrollWidth>t.clientWidth||a.scrollHeight>t.clientHeight)&&n>12;)n-=1,a.style.fontSize=`${n}px`,s&&n<24&&(n-=.5)})},C=()=>{W.value+=1,M()},L=()=>{N()},E=t=>t.sort(()=>Math.random()-.5),M=()=>{if(r.value.length===0){D("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}if(e.value&&!e.value.isIntro&&d.value.push({...e.value,isShowingTranslation:u.value}),e.value=r.value.pop(),u.value){const t=e.value.eng,a=e.value.ru;e.value.hint,e.value.eng=a,e.value.ru=t,e.value.hint=""}m(),i()},N=()=>{if(d.value.length===0)return;e.value&&r.value.push(e.value);const t=d.value.pop();if(e.value={eng:t.eng,ru:t.ru,hint:t.hint},t.isShowingTranslation){const a=e.value.eng,s=e.value.ru;e.value.eng=s,e.value.ru=a,e.value.hint="",u.value=!0}else u.value=!1;m()},S=()=>{const t=e.value.eng,a=e.value.ru;if(e.value.eng=a,e.value.ru=t,u.value=!u.value,u.value)e.value.hint="";else{const s=d.value.find(n=>n.eng===e.value.ru)||r.value.find(n=>n.eng===e.value.ru);s&&(e.value.hint=s.hint)}m()},z=t=>{h.value[t]=!0},m=()=>{e.value.ru&&(h.value=Array(e.value.ru.length).fill(!1))},D=t=>{k.value=t,_.value=!0},B=()=>{_.value=!1},x=t=>{t.touches&&t.touches.length>1&&(t.preventDefault(),t.stopPropagation())};return $(()=>e.value.eng,()=>{i()}),I(()=>{i(),window.addEventListener("resize",i);const t=b.params.missionName;f.value=K[t]||[],r.value=E([...f.value]),e.value={eng:"\u041B\u0438\u0441\u0442\u0430\u0439 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434\u0438",ru:"\u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",isIntro:!0},m(),document.addEventListener("dblclick",x),document.addEventListener("touchstart",x,{passive:!1});const a=document.createElement("meta");a.name="viewport",a.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",document.head.appendChild(a)}),F(()=>{window.removeEventListener("resize",i)}),(t,a)=>f.value.length?(c(),v("div",P,[_.value?(c(),v("div",U,[l("div",Z,[l("p",null,p(k.value),1),l("button",{onClick:B},"OK")])])):w("",!0),l("div",j,[l("button",{class:"nav-button prev-button",onClick:L},"\u2039"),l("div",J,[l("div",{class:"word-card",onClick:S},[l("div",{class:"word",ref_key:"wordText",ref:g},p(e.value.eng),513),e.value.hint?(c(),v("div",Q,p(e.value.hint),1)):w("",!0)]),l("div",X,[(c(!0),v(R,null,V(e.value.ru.split(""),(s,n)=>(c(),v("div",{class:A(["hint-box",{revealed:h.value[n]}]),key:n,onClick:y=>z(n)},p(h.value[n]?s:"?"),11,Y))),128))])]),l("button",{class:"nav-button next-button",onClick:C},"\u203A")])])):w("",!0)}};var oe=O(ee,[["__scopeId","data-v-b6123694"]]);export{oe as default};
