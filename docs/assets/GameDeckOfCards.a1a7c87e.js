import{_ as z}from"./card.91d9cafc.js";import{p as F,u as V,r as o,f as Z,E as j,o as K,b as f,c as m,e as t,t as _,n as N,F as Q,q as J,s as R,j as x,i as X}from"./index.5fb6f958.js";import{q as Y}from"./questions-data.359a27cc.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";const te={key:0,class:"game-container"},ae={class:"side-buttons"},ne=["disabled"],se={class:"deck-of-cards"},oe={class:"card-content"},re={class:"card-text"},le={class:"word"},ie={class:"timer-text"},ue={class:"remaining-cards",ref:"remainingCardsContainer"},ce={class:"card-content"},de={class:"card-text"},ve={class:"word"},fe={class:"translation"},q=1e3,me={__name:"GameDeckOfCards",setup(_e){F();const B=V(),G=/iPhone|iPad|iPod/i.test(navigator.userAgent),C=o([]),n=o(null);let u=[];const g=o([]),T=o(!1),c=o(!1);let b=null;const W=()=>{b&&clearTimeout(b),c.value=!0,b=setTimeout(()=>{c.value=!1},3e3)},y=o(!1),A=()=>{y.value=!0,v(),setTimeout(()=>{y.value=!1},300)},l=o(null),i=o(0),d=o(!1),H=()=>{if(d.value){clearInterval(l.value),l.value=null,i.value=0,d.value=!1;return}v(),i.value=77,d.value=!0,l.value=setInterval(()=>{!d.value||(i.value-=1,i.value<=0&&(clearInterval(l.value),l.value=null,d.value=!1,i.value=0,alert(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`)))},1e3)},U=e=>e.sort(()=>Math.random()-.5);let p=!1;const v=async()=>{if(p)return;if(p=!0,u.length===0){$(),p=!1;return}n.value&&!n.value.isIntro&&(c.value=!0,await new Promise(a=>setTimeout(a,500)),g.value.push(n.value));const e=u.pop();n.value=e,c.value=!1,p=!1},D=()=>{if(g.value.length===0)return;const e=g.value.pop();n.value&&u.push(n.value),n.value=e},$=()=>{alert("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},L=Z(()=>u),S=e=>{const s=e*4,w=10*Math.cos(s*Math.PI/180),k=10*Math.sin(s*Math.PI/180);return{"--x":`${w}px`,"--y":`${k}px`,"--angle":`${s}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:e}},M=e=>{e.key==="ArrowDown"?v():e.key==="ArrowUp"&&D()};let h=0,E=!0,I=!0;const O=e=>{const{beta:a}=e,r=Date.now(),s=125,w=30,k=90;a>w&&a<k&&(I=!0),a<s&&a>k&&(E=!0),a>s&&r-h>q&&E?(navigator.vibrate&&navigator.vibrate(30),v(),h=r,E=!1):a<w&&r-h>q&&I&&(navigator.vibrate&&navigator.vibrate(30),D(),h=r,I=!1)},P=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",O),T.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",O),T.value=!0))};return j(()=>{clearInterval(l.value),l.value=null,window.removeEventListener("deviceorientation",O),window.removeEventListener("keydown",M)}),K(()=>{const e=B.params.missionName;C.value=Y[e]||[],u=U([...C.value]),n.value={ru:"\u043E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},P(),window.addEventListener("keydown",M)}),(e,a)=>C.value.length?(f(),m("div",te,[t("div",ae,[t("button",{onClick:D,class:"game-btn",disabled:g.value.length===0}," Ctrl + Z ",8,ne)]),t("div",se,[t("div",{class:"wordCard",onClick:W},[t("div",oe,[t("div",re,[t("div",le,_(n.value.eng),1),t("div",{class:N(["translation",{blurred:!c.value&&!n.value.isIntro}])},_(n.value.ru),3)])])]),t("div",{class:"timer-block",onClick:H,role:"button"},[t("span",ie,_(i.value>0?`${i.value} seconds`:"Start"),1)]),t("div",ue,[(f(!0),m(Q,null,J(L.value,(r,s)=>(f(),m("div",{class:"remaining-card",onClick:v,key:s,style:R(S(s)),role:"button"},[t("div",ce,[t("div",de,[t("div",ve,_(r.eng),1),t("div",fe,_(r.ru),1)])])],4))),128)),L.value.length>0?(f(),m("div",{key:0,class:N(["card-back-cover",{tapped:y.value}]),style:R(S(L.value.length-1)),onClick:A},a[0]||(a[0]=[t("img",{src:z,alt:"Card Back",role:"button"},null,-1)]),6)):x("",!0)],512)]),!T.value&&X(G)?(f(),m("button",{key:0,onClick:P,class:"enable-tilt-btn"}," \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 -> \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):x("",!0)])):x("",!0)}};var ke=ee(me,[["__scopeId","data-v-4aae71e8"]]);export{ke as default};
