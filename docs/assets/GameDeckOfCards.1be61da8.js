import{_ as V}from"./nextCard.d437e973.js";import{p as Z,u as Q,b as n,i as j,D as J,d as X,o as m,f,h as t,t as c,l as M,n as q,F as Y,q as ee,s as B}from"./index.1dadd292.js";import{q as te}from"./questions-data.0260aee9.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";const se={key:0,class:"game-container"},ne={key:0,class:"modal-overlay"},oe={class:"modal-content"},le={class:"side-buttons"},re=["disabled"],ie={class:"deck-of-cards"},ce={class:"card-content"},ue={class:"card-text"},de={class:"word"},ve={class:"timer-text"},_e={class:"remaining-cards",ref:"remainingCardsContainer"},me={class:"card-content"},fe={class:"card-text"},ge={class:"word"},he={class:"translation"},G=1e3,pe={__name:"GameDeckOfCards",setup(we){Z();const W=Q();/iPhone|iPad|iPod/i.test(navigator.userAgent);const C=n([]),s=n(null);let u=[];const g=n([]),x=n(!1),T=n(!1),S=n(""),P=e=>{S.value=e,T.value=!0},A=()=>{T.value=!1},d=n(!1);let y=null;const H=()=>{y&&clearTimeout(y),d.value=!0,y=setTimeout(()=>{d.value=!1},8e3)},b=n(!1),U=()=>{b.value=!0,_(),setTimeout(()=>{b.value=!1},300)},r=n(null),i=n(0),v=n(!1),$=()=>{if(v.value){clearInterval(r.value),r.value=null,i.value=0,v.value=!1;return}_(),i.value=77,v.value=!0,r.value=setInterval(()=>{!v.value||(i.value-=1,i.value<=0&&(clearInterval(r.value),r.value=null,v.value=!1,i.value=0,P(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`)))},1e3)},z=e=>e.sort(()=>Math.random()-.5);let h=!1;const _=async()=>{if(h)return;if(h=!0,u.length===1){F(),h=!1;return}s.value&&!s.value.isIntro&&(d.value=!0,await new Promise(a=>setTimeout(a,500)),g.value.push(s.value));const e=u.pop();s.value=e,d.value=!1,h=!1},D=()=>{if(g.value.length===0)return;const e=g.value.pop();s.value&&u.push(s.value),s.value=e},F=()=>{P("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},L=j(()=>u),N=e=>{const o=e*4,w=10*Math.cos(o*Math.PI/180),k=10*Math.sin(o*Math.PI/180);return{"--x":`${w}px`,"--y":`${k}px`,"--angle":`${o}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:e}},R=e=>{e.key==="ArrowDown"?_():e.key==="ArrowUp"&&D()};let p=0,O=!0,I=!0;const E=e=>{const{beta:a}=e,l=Date.now(),o=125,w=30,k=90;a>w&&a<k&&(I=!0),a<o&&a>k&&(O=!0),a>o&&l-p>G&&O?(navigator.vibrate&&navigator.vibrate(30),_(),p=l,O=!1):a<w&&l-p>G&&I&&(navigator.vibrate&&navigator.vibrate(30),D(),p=l,I=!1)},K=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",E),x.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",E),x.value=!0))};return J(()=>{clearInterval(r.value),r.value=null,window.removeEventListener("deviceorientation",E),window.removeEventListener("keydown",R)}),X(()=>{const e=W.params.missionName;C.value=te[e]||[],u=z([...C.value]),s.value={ru:"\u043D\u0430\u0436\u0438\u043C\u0430\u0439 \u043D\u0430 \u043A\u043E\u043B\u043E\u0434\u0443",eng:"Click the deck",isIntro:!0},K(),window.addEventListener("keydown",R)}),(e,a)=>C.value.length?(m(),f("div",se,[T.value?(m(),f("div",ne,[t("div",oe,[t("p",null,c(S.value),1),t("button",{onClick:A},"OK")])])):M("",!0),t("div",le,[t("button",{onClick:D,class:"game-btn",disabled:g.value.length===0}," Ctrl + Z ",8,re)]),t("div",ie,[t("div",{class:"wordCard",onClick:H},[t("div",ce,[t("div",ue,[t("div",de,c(s.value.eng),1),t("div",{class:q(["translation",{blurred:!d.value&&!s.value.isIntro}])},c(s.value.ru),3)])])]),t("div",{class:"timer-block",onClick:$,role:"button"},[t("span",ve,c(i.value>0?`${i.value} seconds`:"Start"),1)]),t("div",_e,[(m(!0),f(Y,null,ee(L.value,(l,o)=>(m(),f("div",{class:"remaining-card",onClick:_,key:o,style:B(N(o)),role:"button"},[t("div",me,[t("div",fe,[t("div",ge,c(l.eng),1),t("div",he,c(l.ru),1)])])],4))),128)),L.value.length>0?(m(),f("div",{key:0,class:q(["card-back-cover",{tapped:b.value}]),style:B(N(L.value.length-1)),onClick:U},a[0]||(a[0]=[t("img",{src:V,alt:"Card Back",role:"button"},null,-1)]),6)):M("",!0)],512)])])):M("",!0)}};var be=ae(pe,[["__scopeId","data-v-ed5db162"]]);export{be as default};
