import{r as n,o as z,G as K,b as _,c as T,e,y as p,t as i,u as ve,j as D,w as h,H as V,i as de,h as ce,F as me}from"./index.3d1561a5.js";import{q as pe}from"./questions-data.e4548d5f.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";const fe={class:"tilt-debugger"},ge={__name:"TiltDebugger",setup(J){const N=n(0),S=n(0),w=n(0),E=s=>{var l,a,v;N.value=(l=s.alpha)!=null?l:0,S.value=(a=s.beta)!=null?a:0,w.value=(v=s.gamma)!=null?v:0};return z(()=>{window.addEventListener("deviceorientation",E)}),K(()=>{window.removeEventListener("deviceorientation",E)}),(s,l)=>(_(),T("div",fe,[l[3]||(l[3]=e("h4",null,"\u{1F4D0} \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430:",-1)),e("div",null,[l[0]||(l[0]=e("strong",null,"Alpha (\u043E\u0441\u0438 Z):",-1)),p(" "+i(N.value.toFixed(1))+"\xB0",1)]),e("div",null,[l[1]||(l[1]=e("strong",null,"Beta (\u043D\u0430\u043A\u043B\u043E\u043D \u043D\u0430 \u0441\u0435\u0431\u044F / \u043E\u0442 \u0441\u0435\u0431\u044F):",-1)),p(" "+i(S.value.toFixed(1))+"\xB0",1)]),e("div",null,[l[2]||(l[2]=e("strong",null,"Gamma (\u0432\u043B\u0435\u0432\u043E / \u0432\u043F\u0440\u0430\u0432\u043E):",-1)),p(" "+i(w.value.toFixed(1))+"\xB0",1)])]))}};var _e=j(ge,[["__scopeId","data-v-71e860ce"]]);const Te={key:0,class:"modal-overlay"},we={key:1,class:"game-container"},Ee={key:0,class:"modal-overlay"},be={class:"modal-content"},Le={key:1,class:"modal-overlay"},Oe={class:"modal-content"},ke={class:"word"},De={class:"translation"},Ne={class:"counter-row"},Se={class:"tilt-flags-debug"},He={__name:"GameExplainTheWord",setup(J){const N=ve(),S=/iPhone|iPad|iPod/i.test(navigator.userAgent),w=n({canForward:!0,canBackward:!0}),E=n([]),s=n([]),l=n([]),a=n({}),v=n(!1),C=n(!0),U=n(!1),H=n(""),b=n(0),I=n(!1),y=n(null),B=n(0),P=n(0),X=n("portrait"),x=()=>{X.value=window.innerWidth>window.innerHeight?"landscape":"portrait"},L=n(!1),r=n("beta"),Y=()=>{v.value=!1},O=o=>{H.value=`${o}

Next: ${B.value} \u0440\u0430\u0437
Skip: ${P.value} \u0440\u0430\u0437`,v.value=!0},W=()=>{B.value+=1,F()},Q=()=>{P.value+=1,F()},A=()=>{ne()},ee=()=>{const o=a.value.ru;a.value.ru=a.value.eng,a.value.eng=o},te=o=>o.sort(()=>Math.random()-.5),F=()=>{if(s.value.length===0){O("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}a.value&&!a.value.isIntro&&l.value.push(a.value),a.value=s.value.pop()},ne=()=>{l.value.length!==0&&(a.value&&s.value.push(a.value),a.value=l.value.pop())},ae=()=>{if(I.value){clearInterval(y.value),b.value=0,I.value=!1;return}F(),b.value=10,I.value=!0,y.value=setInterval(()=>{b.value-=1,b.value<=0&&(clearInterval(y.value),I.value=!1,O("\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!"))},1e3)};let d=0,f=!0,g=!0;const k=o=>{if(r.value==="off")return;const{beta:t,gamma:u}=o,c=Date.now(),R=800,M=30;let G=90;if(r.value==="beta")t>30&&t<90&&(g=!0),t<125&&t>90&&(f=!0),t>125&&f&&c-d>R?(navigator.vibrate&&navigator.vibrate(M),W(),d=c,f=!1):t<30&&g&&c-d>R&&(navigator.vibrate&&navigator.vibrate(M),A(),d=c,g=!1);else if(r.value==="gamma"){const m=u+90,$=30,q=150,se=70,re=110,Z=10,ue=45;if(Math.abs(m-G)>ue){G=m;return}G=m,m>se+Z&&m<re-Z&&(f=!0,g=!0),m>q&&f&&c-d>R?(navigator.vibrate&&navigator.vibrate(M),W(),d=c,f=!1):m<$&&g&&c-d>R&&(navigator.vibrate&&navigator.vibrate(M),A(),d=c,g=!1)}w.value={canForward:f,canBackward:g}},oe=()=>{window.DeviceOrientationEvent?typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&(window.addEventListener("deviceorientation",k),L.value=!0,O("\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043E!"))}).catch(o=>{console.error("Permission denied:",o),O("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u0434\u0430\u0442\u0447\u0438\u043A\u0430\u043C")}):(window.addEventListener("deviceorientation",k),L.value=!0):O("\u0412\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438")},le=()=>{C.value=!1},ie=async()=>{if(C.value=!1,x(),window.DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&(window.addEventListener("deviceorientation",k),L.value=!0,H.value=`\u2705 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,v.value=!0)}catch(o){console.warn("Permission denied",o)}else window.addEventListener("deviceorientation",k),L.value=!0,H.value=`\u2705 \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,v.value=!0};return z(()=>{const o=N.params.missionName;E.value=pe[o]||[],s.value=te([...E.value]),a.value={ru:"\u041E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},x(),window.addEventListener("resize",x)}),K(()=>{clearInterval(y.value),window.removeEventListener("deviceorientation",k),window.removeEventListener("resize",x)}),(o,t)=>(_(),T(me,null,[C.value?(_(),T("div",Te,[e("div",{class:"modal-content"},[t[5]||(t[5]=e("p",null,"\u0412\u044B \u0438\u0433\u0440\u0430\u0435\u0442\u0435 \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043B\u0438 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430?",-1)),e("button",{onClick:ie},"\u{1F4F1} \u0421 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E"),e("button",{onClick:le},"\u{1F4BB} \u0421 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430")])])):D("",!0),e("div",{class:"timer",onClick:ae},i(b.value>0?`${b.value} \u0441\u0435\u043A`:"\u0421\u0442\u0430\u0440\u0442"),1),e("div",{class:"button-row"},[e("button",{onClick:A},"\u2190 Back"),e("button",{onClick:W},"\u2192 Next"),e("button",{onClick:Q},"\u23ED Skip")]),E.value.length?(_(),T("div",we,[e("button",{onClick:t[0]||(t[0]=u=>U.value=!0)},"\u2699"),U.value?(_(),T("div",Ee,[e("div",be,[t[9]||(t[9]=e("p",null,"\u0420\u0435\u0436\u0438\u043C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438:",-1)),e("label",null,[h(e("input",{type:"radio",value:"off","onUpdate:modelValue":t[1]||(t[1]=u=>r.value=u)},null,512),[[V,r.value]]),t[6]||(t[6]=p(" \u{1F515} \u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C "))]),t[10]||(t[10]=e("br",null,null,-1)),e("label",null,[h(e("input",{type:"radio",value:"beta","onUpdate:modelValue":t[2]||(t[2]=u=>r.value=u)},null,512),[[V,r.value]]),t[7]||(t[7]=p(" \u{1F4F1} \u041F\u043E\u0440\u0442\u0440\u0435\u0442 (beta) "))]),t[11]||(t[11]=e("br",null,null,-1)),e("label",null,[h(e("input",{type:"radio",value:"gamma","onUpdate:modelValue":t[3]||(t[3]=u=>r.value=u)},null,512),[[V,r.value]]),t[8]||(t[8]=p(" \u2194\uFE0F \u041B\u0430\u043D\u0434\u0448\u0430\u0444\u0442 (gamma) "))]),t[12]||(t[12]=e("br",null,null,-1)),e("button",{onClick:t[4]||(t[4]=u=>U.value=!1)},"OK")])])):D("",!0),v.value?(_(),T("div",Le,[e("div",Oe,[e("p",null,i(H.value),1),e("button",{onClick:Y},"OK")])])):D("",!0),e("div",{class:"word-card",onClick:ee},[e("div",ke,i(a.value.eng),1),e("div",De,i(a.value.ru),1)]),e("div",Ne,[e("span",null,"Next: "+i(B.value),1),e("span",null,"Skip: "+i(P.value),1)]),!L.value&&de(S)?(_(),T("button",{key:2,onClick:oe}," \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):D("",!0)])):D("",!0),ce(_e),e("div",Se,[e("p",null,[t[13]||(t[13]=e("strong",null,"canTriggerForward:",-1)),p(" "+i(w.value.canForward?"\u2705":"\u274C"),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"canTriggerBackward:",-1)),p(" "+i(w.value.canBackward?"\u2705":"\u274C"),1)])])],64))}};var Re=j(He,[["__scopeId","data-v-9cdbf7d0"]]);export{Re as default};
