import{_ as Z}from"./nextCard.f23884c1.js";import{p as j,u as Q,r as n,f as J,G as X,o as Y,b as u,c,e as t,t as d,j as C,n as q,F as ee,q as te,s as B,i as ae}from"./index.de2b863d.js";import{q as se}from"./questions-data.e4548d5f.js";import{_ as ne}from"./plugin-vue_export-helper.21dcd24c.js";const oe={key:0,class:"game-container"},le={key:0,class:"modal-overlay"},re={class:"modal-content"},ie={class:"side-buttons"},ue=["disabled"],ce={class:"deck-of-cards"},de={class:"card-content"},ve={class:"card-text"},_e={class:"word"},me={class:"timer-text"},fe={class:"remaining-cards",ref:"remainingCardsContainer"},ge={class:"card-content"},pe={class:"card-text"},he={class:"word"},we={class:"translation"},W=1e3,ke={__name:"GameDeckOfCards",setup(Ce){j();const A=Q(),H=/iPhone|iPad|iPod/i.test(navigator.userAgent),y=n([]),s=n(null);let v=[];const g=n([]),T=n(!1),b=n(!1),S=n(""),P=e=>{S.value=e,b.value=!0},U=()=>{b.value=!1},_=n(!1);let D=null;const $=()=>{D&&clearTimeout(D),_.value=!0,D=setTimeout(()=>{_.value=!1},3e3)},L=n(!1),z=()=>{L.value=!0,f(),setTimeout(()=>{L.value=!1},300)},r=n(null),i=n(0),m=n(!1),F=()=>{if(m.value){clearInterval(r.value),r.value=null,i.value=0,m.value=!1;return}f(),i.value=77,m.value=!0,r.value=setInterval(()=>{!m.value||(i.value-=1,i.value<=0&&(clearInterval(r.value),r.value=null,m.value=!1,i.value=0,P(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`)))},1e3)},K=e=>e.sort(()=>Math.random()-.5);let p=!1;const f=async()=>{if(p)return;if(p=!0,v.length===1){V(),p=!1;return}s.value&&!s.value.isIntro&&(_.value=!0,await new Promise(a=>setTimeout(a,500)),g.value.push(s.value));const e=v.pop();s.value=e,_.value=!1,p=!1},O=()=>{if(g.value.length===0)return;const e=g.value.pop();s.value&&v.push(s.value),s.value=e},V=()=>{P("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},I=J(()=>v),N=e=>{const o=e*4,w=10*Math.cos(o*Math.PI/180),k=10*Math.sin(o*Math.PI/180);return{"--x":`${w}px`,"--y":`${k}px`,"--angle":`${o}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:e}},R=e=>{e.key==="ArrowDown"?f():e.key==="ArrowUp"&&O()};let h=0,E=!0,x=!0;const M=e=>{const{beta:a}=e,l=Date.now(),o=125,w=30,k=90;a>w&&a<k&&(x=!0),a<o&&a>k&&(E=!0),a>o&&l-h>W&&E?(navigator.vibrate&&navigator.vibrate(30),f(),h=l,E=!1):a<w&&l-h>W&&x&&(navigator.vibrate&&navigator.vibrate(30),O(),h=l,x=!1)},G=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",M),T.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",M),T.value=!0))};return X(()=>{clearInterval(r.value),r.value=null,window.removeEventListener("deviceorientation",M),window.removeEventListener("keydown",R)}),Y(()=>{const e=A.params.missionName;y.value=se[e]||[],v=K([...y.value]),s.value={ru:"\u043E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},G(),window.addEventListener("keydown",R)}),(e,a)=>y.value.length?(u(),c("div",oe,[b.value?(u(),c("div",le,[t("div",re,[t("p",null,d(S.value),1),t("button",{onClick:U},"OK")])])):C("",!0),t("div",ie,[t("button",{onClick:O,class:"game-btn",disabled:g.value.length===0}," Ctrl + Z ",8,ue)]),t("div",ce,[t("div",{class:"wordCard",onClick:$},[t("div",de,[t("div",ve,[t("div",_e,d(s.value.eng),1),t("div",{class:q(["translation",{blurred:!_.value&&!s.value.isIntro}])},d(s.value.ru),3)])])]),t("div",{class:"timer-block",onClick:F,role:"button"},[t("span",me,d(i.value>0?`${i.value} seconds`:"Start"),1)]),t("div",fe,[(u(!0),c(ee,null,te(I.value,(l,o)=>(u(),c("div",{class:"remaining-card",onClick:f,key:o,style:B(N(o)),role:"button"},[t("div",ge,[t("div",pe,[t("div",he,d(l.eng),1),t("div",we,d(l.ru),1)])])],4))),128)),I.value.length>0?(u(),c("div",{key:0,class:q(["card-back-cover",{tapped:L.value}]),style:B(N(I.value.length-1)),onClick:z},a[0]||(a[0]=[t("img",{src:Z,alt:"Card Back",role:"button"},null,-1)]),6)):C("",!0)],512)]),!T.value&&ae(H)?(u(),c("button",{key:1,onClick:G,class:"enable-tilt-btn"}," \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 -> \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):C("",!0)])):C("",!0)}};var Le=ne(ke,[["__scopeId","data-v-02a53446"]]);export{Le as default};
