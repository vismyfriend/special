import{u as W,r as n,o as ee,H as se,B as te,f as m,b as u,c as o,e as t,t as l,y as B,F as ae,q as ne,j as p,w as le,k as ue,n as O}from"./index.bfa30742.js";import{N as oe}from"./NewFuturisticStyle.646a8d3d.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";const ie={key:0,class:"futuristic-container"},ce={key:0,class:"results-screen"},ve={class:"results-stats"},de={class:"stat correct-stat"},fe={class:"stat-value"},pe={class:"stat attempts-stat"},he={class:"stat-value"},_e={class:"success-rate"},me={class:"rate-value"},ge={key:1},we={class:"neon-header"},ke={class:"glowing-text"},ye={key:0,class:"data-chip"},Ce={class:"word-grid"},be={class:"cyber-word"},Ee={class:"cyber-translation"},Te={class:"task-card"},Ae={class:"task-id"},xe={class:"cyber-title"},Se={key:0,class:"media-frame"},Ie=["src"],Ne={class:"question-input-container"},Le={class:"question-text"},Re={key:0,class:"result-display"},Qe={key:1,class:"explanation-text"},Oe={class:"explanation-content"},Me={key:0,class:"correct-answer-text"},Pe={class:"answer-highlight"},qe={class:"buttons-container"},De=["disabled"],Ue={__name:"GameTagQuestions",setup(Fe){const G=W(),v=n(null),I=n(null),d=n(0),r=n(""),a=n(!1),g=n(!1),N=n(!1),b=n(0),M=n(0),L=n(0),w=n([]),E=n(0),k=n(""),C=n(!1);ee(()=>{const s=G.params.missionName;v.value=oe[s]||null,R(),window.addEventListener("keyup",q)}),se(()=>{window.removeEventListener("keyup",q)});const R=()=>{te(()=>{I.value&&I.value.focus()})},T=m(()=>{var s,e;return((e=(s=v.value)==null?void 0:s.tasks[0])==null?void 0:e.questions[d.value])||{}}),A=m(()=>{var s,e;return((e=(s=v.value)==null?void 0:s.tasks[0])==null?void 0:e.questions.length)||0}),H=m(()=>a.value?S.value?"input-correct":"input-incorrect":""),X=m(()=>S.value?"correct-answer":"incorrect-answer"),Q=m(()=>d.value===A.value-1),j=m(()=>A.value?Math.round(b.value/A.value*100):0),Y=s=>s?s.split(",").map(e=>{const[f,i]=e.split("-").map(c=>c.trim());return{english:f,russian:i}}):[],P=()=>$(r.value,T.value.correctAnswer),x=n(!1),y=()=>{if(x.value)return;if(!r.value.trim()){C.value=!0,setTimeout(()=>{C.value=!1},200);return}if(a.value&&r.value===k.value)return;if(E.value>=2){alert("You have used all attempts for this question");return}a.value=!0,E.value++,L.value++,k.value=r.value;const s=P();w.value[d.value]||(w.value[d.value]={wasCorrect:!1,incorrectAttempts:0}),s?w.value[d.value].wasCorrect||(w.value[d.value].wasCorrect=!0,b.value++):(w.value[d.value].incorrectAttempts++,M.value++),x.value=!0,setTimeout(()=>{x.value=!1},1e3)},q=s=>{s.key==="Enter"&&(a.value?x.value||(Q.value?F():U()):y())},D=s=>s?s.toLowerCase().trim().replace(/\s+/g," ").replace(/['’‘`"“”]/g,"").replace(/[.,!?;:]$/g,"").replace(/[-–—]/g," ").replace(/\s+/g," ").trim():"",K=(s,e)=>{if(["he","she","is","are","was","were","do","does","have","has","should","could","would"].includes(e.toLowerCase()))return s.toLowerCase()===e.toLowerCase();if(s.length===e.length){let i=0;for(let c=0;c<s.length;c++)if(s[c]!==e[c]&&(i++,i>1))return!1;return!0}if(Math.abs(s.length-e.length)===1){const i=s.length>e.length?s:e,c=s.length>e.length?e:s;for(let h=0,_=0;h<i.length;h++)if(i[h]===c[_])_++;else if(h!==_)return!1;return!0}return!1},$=(s,e)=>{const f=D(s),i=D(e);if(f===i)return!0;const c=f.split(" "),h=i.split(" ");if(c.length!==h.length)return!1;for(let _=0;_<h.length;_++){const V=c[_],z=h[_];if(V!==z&&!K(V,z))return!1}return!0},S=m(()=>a.value?P():!1),U=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&y(),d.value++,r.value="",a.value=!1,g.value=!1,E.value=0,k.value="",R()},F=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&y(),N.value=!0},J=()=>{g.value=!g.value},Z=()=>{d.value=0,r.value="",a.value=!1,g.value=!1,N.value=!1,b.value=0,M.value=0,L.value=0,E.value=0,k.value="",w.value=[],R()};return(s,e)=>v.value?(u(),o("div",ie,[N.value?(u(),o("div",ce,[e[4]||(e[4]=t("h2",{class:"glowing-text"},"MISSION COMPLETE",-1)),t("div",ve,[t("div",de,[t("span",fe,l(b.value),1),e[1]||(e[1]=t("span",{class:"stat-label"},"CORRECT ANSWERS",-1))]),t("div",pe,[t("span",he,l(L.value),1),e[2]||(e[2]=t("span",{class:"stat-label"},"TOTAL ATTEMPTS",-1))])]),t("div",_e,[e[3]||(e[3]=B(" SUCCESS RATE: ")),t("span",me,l(j.value)+"%",1)]),t("button",{onClick:Z,class:"cyber-button restart-btn"}," RESTART MISSION ")])):(u(),o("div",ge,[t("div",we,[t("h2",ke,l(v.value.mainDescription),1),e[5]||(e[5]=t("p",{class:"cyber-description"},"training protocol - \u0443\u0442\u043E\u0447\u043D\u044F\u044E\u0449\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",-1))]),v.value.tasks[0].usefulWords?(u(),o("div",ye,[e[7]||(e[7]=t("div",{class:"chip-header"},"hints = \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",-1)),t("div",Ce,[(u(!0),o(ae,null,ne(Y(v.value.tasks[0].usefulWords),(f,i)=>(u(),o("div",{key:i,class:"word-pair"},[t("span",be,l(f.english),1),e[6]||(e[6]=t("span",{class:"cyber-separator"},"::",-1)),t("span",Ee,l(f.russian),1)]))),128))])])):p("",!0),t("div",Te,[t("div",Ae,l(d.value+1)+"/"+l(A.value),1),t("h3",xe,l(v.value.tasks[0].taskDescription),1),v.value.tasks[0].taskPicture?(u(),o("div",Se,[t("img",{src:v.value.tasks[0].taskPicture,class:"holographic-img"},null,8,Ie)])):p("",!0),t("div",Ne,[t("div",Le,l(T.value.text),1),le(t("input",{ref_key:"answerInput",ref:I,"onUpdate:modelValue":e[0]||(e[0]=f=>r.value=f),class:O(["cyber-input",H.value])},null,2),[[ue,r.value]]),a.value?(u(),o("div",Re,[t("span",{class:O(X.value)},l(S.value?"\u2713 CORRECT":"\u2717 INCORRECT \u043C\u043E\u0436\u043D\u043E \u043B\u0438\u0431\u043E \u0438\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C/\u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u043E\u0439 \u043E\u0442\u0432\u0435\u0442 \u0438\u043B\u0438 \u043D\u0430\u0436\u0430\u0442\u044C next"),3)])):p("",!0),g.value&&a.value?(u(),o("div",Qe,[t("div",Oe,l(T.value.explanation),1),S.value?p("",!0):(u(),o("div",Me,[e[8]||(e[8]=B(" Correct answer: ")),t("span",Pe,l(T.value.correctAnswer),1)]))])):p("",!0),t("div",qe,[a.value?p("",!0):(u(),o("button",{key:0,onClick:y,class:O(["cyber-button verify-btn",{warning:C.value}]),disabled:C.value},l(C.value?"PLEASE \u0445\u043E\u0442\u044C \u0447\u0442\u043E-\u0442\u043E \u0432\u043F\u0438\u0448\u0438":"VERIFY"),11,De)),a.value?(u(),o("button",{key:1,onClick:J,class:"holographic-btn"},l(g.value?"HIDE EXPLANATION":"PLEASE, EXPLAIN"),1)):p("",!0),a.value&&!Q.value?(u(),o("button",{key:2,onClick:U,class:"cyber-button next-btn"}," NEXT QUESTION ")):p("",!0),a.value&&Q.value?(u(),o("button",{key:3,onClick:F,class:"cyber-button finish-btn"}," FINISH MISSION ")):p("",!0)])])])]))])):p("",!0)}};var Ge=re(Ue,[["__scopeId","data-v-35c892fe"]]);export{Ge as default};
