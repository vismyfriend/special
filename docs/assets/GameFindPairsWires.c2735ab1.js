import{_ as ae}from"./wiresPic.a03d9175.js";import{p as oe,u as re,r,f as ne,C as B,o as le,b as u,c as v,e as c,s as z,t as g,j as E,F as I,q as ce,E as F,n as ie}from"./index.c8ac9e53.js";import{u as ue}from"./example-store.cf9f73d4.js";import{s as ve}from"./short-words-data.0ad16f0d.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";const me={class:"progress-container"},he={key:0,class:"progress-text"},fe={class:"game-visual-wrapper"},ge={class:"game-container"},pe={class:"answers-container"},_e=["onClick"],we={key:0,class:"error-text"},ye=["data-is-word"],ke={__name:"GameFindPairsWires",setup(Ce){const Q=oe(),V=re(),G=ue(),S=r(),b=r([]),p=r({}),_=r([]),w=r(null),h=r(!1),A=r(0),y=r([]),X=r(12),D=r(0),d=r(0),i=r(null),n=r([]),L=r(null),j=ne(()=>`${d.value}%`),H=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},J=s=>{const t=()=>{const a=s-d.value;Math.abs(a)>1?(d.value+=Math.sign(a),requestAnimationFrame(t)):d.value=s};requestAnimationFrame(t)};B(D,s=>{const t=Math.round(s/X.value*100);J(t)});const k=r([]),N=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],M=["YES!","Great","Awesome","Super","Correct"],f=r([]),K=()=>{const s=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return s[Math.floor(Math.random()*s.length)]},R=()=>{if(!i.value||!L.value||n.value.length===0)return;const s=L.value;s.innerHTML="";const t=s.getBoundingClientRect(),a=i.value.getBoundingClientRect();n.value.forEach(e=>{if(!e)return;const o=e.getBoundingClientRect(),P=a.right-a.width/4-t.left,T=a.top+a.height/2-t.top,m=o.left+o.width/4-t.left,W=o.top+o.height/2-t.top,l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",P),l.setAttribute("y1",T),l.setAttribute("x2",m),l.setAttribute("y2",W),l.setAttribute("stroke",K()),l.setAttribute("stroke-width","3"),l.setAttribute("stroke-linecap","round"),s.appendChild(l)})};B(p,async()=>{await F(),R()}),B(()=>_.value,async()=>{await F(),R()});const $=s=>s.sort(()=>Math.random()-.5),O=s=>{const t=b.value.map(o=>o.eng),a=[...new Set(t)];if(a.length<4)return a;const e=a.filter(o=>o!==s).slice(0,3);return e.push(s),$(e)},q=async()=>{if(C.length===0||A.value>=C.length){Z();return}const s=C[A.value];p.value=s;const t=s.eng;_.value=O(t),w.value=null,h.value=!1,y.value=Array(_.value.length).fill(!1),await F(),R()};let C=[],x=0;const U=(s,t)=>{w.value=s;const a=p.value.eng;if(h.value=s===a,h.value){D.value++;const e=Math.random()>.5;f.value[t]=e?M[Math.floor(Math.random()*M.length)]:s,n.value[t]&&n.value[t].classList.add("correct-pulse"),i.value&&(i.value.classList.remove("pulsing"),i.value.classList.add("correct-pulse")),setTimeout(()=>{f.value[t]=""},1200),setTimeout(()=>{n.value[t]&&n.value[t].classList.remove("correct-pulse"),i.value&&(i.value.classList.remove("correct-pulse"),i.value.classList.add("pulsing"))},1200),setTimeout(()=>{A.value++,q()},800)}else n.value.forEach(e=>{e&&e.classList.add("shake")}),n.value.forEach(e=>{if(!e)return;const o=n.value[t].getBoundingClientRect(),P=o.left+o.width/2,T=o.top+o.height/2,m=e.getBoundingClientRect(),W=m.left+m.width/2,l=m.top+m.height/2,ee=(W-P)*.6,te=(l-T)*.6,se=(Math.random()-.5)*20;e.style.setProperty("--dx",`${ee}px`),e.style.setProperty("--dy",`${te}px`),e.style.setProperty("--angle",`${se}deg`),e.classList.add("explode"),e.classList.add("shake"),setTimeout(()=>{e.classList.remove("explode"),e.classList.remove("shake")},600)}),setTimeout(()=>{n.value.forEach(e=>{e&&e.classList.remove("shake")})},500),x+=1,k.value[t]=N[Math.floor(Math.random()*N.length)],y.value[t]=!0,setTimeout(()=>{k.value[t]=""},1500)},Z=()=>{const s=Date.now()-Y;G.setLastGameResults(s,x),G.setGameName("FindPairsEasy"),Q.push("/leader-board/")};let Y=null;return le(()=>{S.value=V.params.missionName,b.value=ve[S.value]||[],C=$([...b.value]).slice(0,12),Y=Date.now(),q()}),(s,t)=>(u(),v(I,null,[c("div",me,[c("div",{class:"progress-bar",style:z({width:j.value})},null,4),d.value>0?(u(),v("div",he,g(d.value)+"%",1)):E("",!0)]),c("div",fe,[(u(),v("svg",{class:"lines-overlay",ref_key:"svgLines",ref:L,style:{width:"100%",height:"100%"}},null,512)),c("div",ge,[c("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:i},g(p.value.ru),513),c("div",pe,[(u(!0),v(I,null,ce(_.value,(a,e)=>(u(),v("div",{key:e,style:{position:"relative"}},[c("div",{class:ie(["wordCard",{active:w.value===a&&!h.value,correct:h.value&&w.value===a,fade:y.value[e]}]),onClick:o=>U(a,e),ref_for:!0,ref:o=>n.value[e]=o,style:z({opacity:y.value[e]?0:1})},g(a),15,_e),k.value[e]?(u(),v("div",we,g(k.value[e]),1)):E("",!0),f.value[e]?(u(),v("div",{key:1,class:"positive-text","data-is-word":!M.includes(f.value[e])},g(f.value[e]),9,ye)):E("",!0)]))),128))])])]),c("div",{class:"image-container"},[t[0]||(t[0]=c("img",{src:ae,alt:"Wire Cutter",class:"cutter-image"},null,-1)),c("button",{class:"action-button",onClick:H},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Pe=de(ke,[["__scopeId","data-v-3d4faab0"]]);export{Pe as default};
