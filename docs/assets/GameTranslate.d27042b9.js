import{u as D,r as n,C as G,o as B,G as q,b as d,c as m,e as s,t as g,j as x,F as I,q as F,E as H,n as R}from"./index.7268b249.js";import{q as V}from"./questions-data.0fb44c64.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";const A={key:0,class:"game-container"},K={key:0,class:"modal-overlay"},O={class:"modal-content"},P={class:"game-content-wrapper"},U={class:"main-content"},Z={class:"hint-container"},$=["onClick"],J={__name:"GameTranslate",setup(Q){const T=D(),p=n([]),c=n([]),h=n([]),e=n({}),_=n(!1),w=n(""),r=n(!1),b=n(0);n(0);const i=n([]),f=n(null),u=()=>{H(()=>{var l;const t=(l=f.value)==null?void 0:l.parentNode,a=f.value;if(!t||!a)return;let o=58;for(a.style.fontSize=o+"px";(a.scrollWidth>t.clientWidth||a.scrollHeight>t.clientHeight)&&o>12;)o-=1,a.style.fontSize=o+"px"})},y=()=>{b.value+=1,L()},C=()=>{E()},W=t=>t.sort(()=>Math.random()-.5),L=()=>{if(c.value.length===0){z("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}if(e.value&&!e.value.isIntro&&h.value.push({...e.value,isShowingTranslation:r.value}),e.value=c.value.pop(),r.value){const t=e.value.eng,a=e.value.ru;e.value.eng=a,e.value.ru=t}v(),u()},E=()=>{if(h.value.length===0)return;e.value&&c.value.push(e.value);const t=h.value.pop();if(e.value={eng:t.eng,ru:t.ru},t.isShowingTranslation){const a=e.value.eng,o=e.value.ru;e.value.eng=o,e.value.ru=a,r.value=!0}else r.value=!1;v()},N=()=>{const t=e.value.eng,a=e.value.ru;e.value.eng=a,e.value.ru=t,r.value=!r.value,v()},S=t=>{i.value[t]=!0},v=()=>{e.value.ru&&(i.value=Array(e.value.ru.length).fill(!1))},z=t=>{w.value=t,_.value=!0},M=()=>{_.value=!1},k=t=>{t.touches&&t.touches.length>1&&(t.preventDefault(),t.stopPropagation())};return G(()=>e.value.eng,()=>{u()}),B(()=>{u(),window.addEventListener("resize",u);const t=T.params.missionName;p.value=V[t]||[],c.value=W([...p.value]),e.value={eng:"\u041B\u0438\u0441\u0442\u0430\u0439 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434\u0438",ru:"\u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",isIntro:!0},v(),document.addEventListener("dblclick",k),document.addEventListener("touchstart",k,{passive:!1});const a=document.createElement("meta");a.name="viewport",a.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",document.head.appendChild(a)}),q(()=>{window.removeEventListener("resize",u)}),(t,a)=>p.value.length?(d(),m("div",A,[_.value?(d(),m("div",K,[s("div",O,[s("p",null,g(w.value),1),s("button",{onClick:M},"OK")])])):x("",!0),s("div",P,[s("button",{class:"nav-button prev-button",onClick:C},"\u2039"),s("div",U,[s("div",{class:"word-card",onClick:N},[s("div",{class:"word",ref_key:"wordText",ref:f},g(e.value.eng),513)]),s("div",Z,[(d(!0),m(I,null,F(e.value.ru.split(""),(o,l)=>(d(),m("div",{class:R(["hint-box",{revealed:i.value[l]}]),key:l,onClick:X=>S(l)},g(i.value[l]?o:"?"),11,$))),128))])]),s("button",{class:"nav-button next-button",onClick:y},"\u203A")])])):x("",!0)}};var ae=j(J,[["__scopeId","data-v-2af35db5"]]);export{ae as default};
