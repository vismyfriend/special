import{u as $,r as n,o as F,G as R,b as v,c,e,j as h,t as s,i as V,F as j}from"./index.e977be00.js";import{q as A}from"./questions-data.e4548d5f.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";const U={key:0,class:"modal-overlay"},z={key:1,class:"game-container"},H={key:0,class:"modal-overlay"},J={class:"modal-content"},Q={class:"word"},X={class:"translation"},Y={class:"counter-row"},Z=1e3,ee={__name:"GameExplainTheWord",setup(te){const M=$(),N=/iPhone|iPad|iPod/i.test(navigator.userAgent),w=n([]),d=n([]),k=n([]),o=n({}),i=n(!1),m=n(""),a=n(0),p=n(!1),f=n(null),S=()=>{},T=()=>{i.value=!1},g=n(0),E=n(0),D=t=>{m.value=`${t}

Next: ${g.value} \u0440\u0430\u0437
Skip: ${E.value} \u0440\u0430\u0437`,i.value=!0},x=n(!0),I=()=>{x.value=!1},L=async()=>{if(x.value=!1,window.DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&(window.addEventListener("deviceorientation",r),l.value=!0,m.value=`\u2705 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,i.value=!0)}catch(t){console.warn("Permission denied",t)}else window.addEventListener("deviceorientation",r),l.value=!0,m.value=`\u2705 \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,i.value=!0},P=()=>{g.value+=1,_()},W=()=>{E.value+=1,_()},q=()=>{O()},B=t=>t.sort(()=>Math.random()-.5),_=()=>{if(d.value.length===0){D("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}o.value&&!o.value.isIntro&&k.value.push(o.value),o.value=d.value.pop()},O=()=>{k.value.length!==0&&(o.value&&d.value.push(o.value),o.value=k.value.pop())},G=()=>{if(p.value){clearInterval(f.value),a.value=0,p.value=!1;return}_(),a.value=10,p.value=!0,f.value=setInterval(()=>{a.value-=1,a.value<=0&&(clearInterval(f.value),p.value=!1,D("\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!"))},1e3)},l=n(!1);let C=0;const r=t=>{const{beta:u}=t,y=Date.now();y-C<Z||(u>135&&(_(),C=y),u<45&&(O(),C=y))},b=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(t=>{t==="granted"&&(window.addEventListener("deviceorientation",r),l.value=!0)}):(window.addEventListener("deviceorientation",r),l.value=!0))};return F(()=>{const t=M.params.missionName;w.value=A[t]||[],d.value=B([...w.value]),o.value={ru:"\u041E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},b()}),R(()=>{clearInterval(f.value),window.removeEventListener("deviceorientation",r)}),(t,u)=>(v(),c(j,null,[x.value?(v(),c("div",U,[e("div",{class:"modal-content"},[u[0]||(u[0]=e("p",null,"\u0412\u044B \u0438\u0433\u0440\u0430\u0435\u0442\u0435 \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043B\u0438 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430?",-1)),e("button",{onClick:L},"\u{1F4F1} \u0421 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E"),e("button",{onClick:I},"\u{1F4BB} \u0421 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430")])])):h("",!0),w.value.length?(v(),c("div",z,[i.value?(v(),c("div",H,[e("div",J,[e("p",null,s(m.value),1),e("button",{onClick:T},"OK")])])):h("",!0),e("div",{class:"word-card",onClick:S},[e("div",Q,s(o.value.eng),1),e("div",X,s(o.value.ru),1)]),e("div",{class:"timer",onClick:G},s(a.value>0?`${a.value} \u0441\u0435\u043A`:"\u0421\u0442\u0430\u0440\u0442"),1),e("div",{class:"button-row"},[e("button",{onClick:q},"\u2190 Back"),e("button",{onClick:P},"\u2192 Next"),e("button",{onClick:W},"\u23ED Skip")]),e("div",Y,[e("span",null,"Next: "+s(g.value),1),e("span",null,"Skip: "+s(E.value),1)]),!l.value&&V(N)?(v(),c("button",{key:1,onClick:b}," \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):h("",!0)])):h("",!0)],64))}};var se=K(ee,[["__scopeId","data-v-1e535d68"]]);export{se as default};
