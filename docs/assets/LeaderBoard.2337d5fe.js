import{p as O,u as K,r as N,i as w,o as U,K as b,b as d,c as m,e as t,t as l,k as u,F as G,y as $,l as p,q as Y,n as j}from"./index.b13a2380.js";import{u as H}from"./example-store.13035e50.js";import{a as J}from"./allGamesAndSetsOfWordsList.8d3a6ddf.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";const X={class:"result"},Z={class:"congratulations-container"},ee={class:"result-card"},te={class:"result-row"},se={class:"result-value time-value"},ae={class:"result-row time-spelling"},ne={class:"result-value time-spelling-value"},oe={class:"result-row"},le={class:"result-value mistakes-amount"},re={class:"result-row"},ie={class:"result-value"},ue={class:"result-row"},ce={class:"result-value"},de={class:"result-row"},me={class:"name-wrapper"},ge={class:"result-value agent-name"},he={key:0,class:"unique-id"},ve={class:"buttons-container"},pe={key:0,class:"leaderboard-wrapper"},_e={class:"leaderboard-container"},fe={class:"leaderboard"},Ne={class:"player-name"},ye={key:0,class:"unique-id"},ke={key:0,class:"highlight-row"},we={class:"player-name"},be={key:0,class:"unique-id"},$e={__name:"LeaderBoard",setup(Se){const _=O(),M=K(),a=H(),S=N(M.query.missionName||a.$state.wordSet),g=N([]),y=N(),k=N(!1),R=N(a.$state.agentName===null),I=[{agent:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u0430 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C",time:"000.00",mistakes:0},{agent:"\u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u044B\u0445",time:"1234.5",mistakes:6},{agent:"\u043C\u043E\u0436\u043D\u043E \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u043F\u043E\u0437\u0436\u0435",time:"999999",mistakes:999}],q=s=>{const e=["zero","one","two","three","four","five","six","seven","eight","nine"],n=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],i=["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];s=parseFloat(s).toFixed(2);const[f,v]=s.split(".");let r="";const c=parseInt(f);if(c>=100){r+=e[Math.floor(c/100)]+" hundred ";const o=c%100;o>0&&(o<10?r+=e[o]:o>=10&&o<20?r+=n[o-10]:(r+=i[Math.floor(o/10)],o%10>0&&(r+="-"+e[o%10])))}else c>0?c<10?r+=e[c]:c>=10&&c<20?r+=n[c-10]:(r+=i[Math.floor(c/10)],c%10>0&&(r+="-"+e[c%10])):r+=e[0];if(v&&parseInt(v)>0){const o=parseInt(v);r+=" point ",o<10?r+=e[o]:o>=10&&o<20?r+=n[o-10]:(r+=i[Math.floor(o/10)],o%10>0&&(r+="-"+e[o%10]))}return r},B=w(()=>{const s=(a.lastGameResults.time/1e3).toFixed(2);return q(s)}),x=()=>{const s=new Date,e=String(s.getDate()).padStart(2,"0"),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getFullYear()).slice(-2),f=String(s.getMinutes()).padStart(2,"0"),v=String(s.getSeconds()).padStart(2,"0");return`${e}${n}${i}${f}${v}`},A=w(()=>k.value?g.value.slice(0,100):g.value.slice(0,8)),F=w(()=>g.value&&g.value.length>8),P=()=>_.push("/see-all-sets-of-words"),C=async s=>{try{const n=(await b.auth.getToken(s)).data.token;return localStorage.setItem("token",n),localStorage.setItem("agentName",s),a.setAgentName(s),n}catch(e){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0442\u043E\u043A\u0435\u043D\u0430:",e),e}},h=s=>{if(!s)return{name:"",id:""};const e=s.match(/^(.*?)(?:\s*\(([^)]+)\))?$/);return{name:e[1]||s,id:e[2]||""}},T=()=>{S.value?_.push(`/see-all-sets-of-words/${S.value}`):(console.error("missionName is not available"),_.push("/see-all-sets-of-words/"))},L=()=>_.go(-1),D=()=>k.value=!k.value,E=()=>_.push("/registration"),W=s=>{const e=J.find(n=>n.missionName===s);return(e==null?void 0:e.missionDescription)||s},V=async()=>{try{const e=(await b.scores.get(a.gameName)).data.filter(n=>n.wordSet===a.$state.wordSet);g.value=Array.isArray(e)&&e.length>0?e:I}catch(s){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0442\u0430\u0431\u043B\u0438\u0446\u044B \u043F\u043E\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u0435\u0439:",s),g.value=I}},z=()=>{g.value=g.value.sort((s,e)=>s.time-e.time),g.value.forEach((s,e)=>{s.time=s.time/1e3,s.agent===a.$state.agentName&&(y.value=e+1)})};return U(async()=>{const s=localStorage.getItem("agentName"),e=localStorage.getItem("token");if(s&&s!==a.$state.agentName&&a.setAgentName(s),!a.$state.agentName&&!s){const n=["\u0421\u0435\u043A\u0440\u0435\u0442\u043D\u044B\u0439 \u043F\u0430\u0440\u043D\u0438\u0448\u0430","\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0439 \u0430\u043D\u043E\u043D\u0438\u043C","\u041E\u0442\u0447\u0430\u044F\u043D\u043D\u044B\u0435 \u0434\u043E\u043C\u043E\u0445\u043E\u0437\u044F\u0439\u043A\u0438","\u0410\u0433\u0435\u043D\u0442 69","\u0441\u0442\u0443\u0434\u0435\u043D\u0442 \u0431\u0435\u0437 \u0438\u043C\u0435\u043D\u0438","Patrick","Alex","NONAME","test","Professor"],i=n[Math.floor(Math.random()*n.length)],f=x(),v=`${i} (${f})`;a.setAgentName(v),await C(v)}else if(a.$state.agentName&&!e){let n=a.$state.agentName;if(!n.includes("(")){const i=x();n=`${n} (${i})`,a.setAgentName(n)}await C(n)}try{await b.scores.post(a.$state.gameName,a.$state.lastGameResults.time,a.$state.lastGameResults.mistakes,a.$state.agentName,a.$state.wordSet)}catch(n){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432:",n)}await V(),z()}),(s,e)=>(d(),m("div",X,[t("div",Z,[e[6]||(e[6]=t("h2",{class:"congratulations-title"},"Congratulations!",-1)),t("div",ee,[t("div",te,[e[0]||(e[0]=t("span",{class:"result-label"},"\u0412\u0440\u0435\u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F:",-1)),t("span",se,l((u(a).lastGameResults.time/1e3).toFixed(2))+" \u0441\u0435\u043A.",1)]),t("div",ae,[e[1]||(e[1]=t("span",{class:"result-label"},null,-1)),t("span",ne,l(B.value)+" seconds",1)]),t("div",oe,[e[2]||(e[2]=t("span",{class:"result-label"},"\u041E\u0448\u0438\u0431\u043E\u043A:",-1)),t("span",le,l(u(a).lastGameResults.mistakes)+" mistake(s)",1)]),t("div",re,[e[3]||(e[3]=t("span",{class:"result-label"},"\u041C\u0438\u0441\u0441\u0438\u044F:",-1)),t("span",ie,'"'+l(W(u(a).$state.wordSet))+'"',1)]),t("div",ue,[e[4]||(e[4]=t("span",{class:"result-label"},"\u0417\u0430\u0434\u0430\u043D\u0438\u0435:",-1)),t("span",ce,'"'+l(u(a).$state.gameName)+'"',1)]),t("div",de,[e[5]||(e[5]=t("span",{class:"result-label"},"\u0412\u0430\u0448 \u043D\u0438\u043A\u043D\u0435\u0439\u043C:",-1)),t("div",me,[t("span",ge,[u(a).$state.agentName?(d(),m(G,{key:0},[$(l(h(u(a).$state.agentName).name)+" ",1),h(u(a).$state.agentName).id?(d(),m("span",he," ("+l(h(u(a).$state.agentName).id)+") ",1)):p("",!0)],64)):p("",!0)]),R.value?(d(),m("button",{key:0,onClick:E,class:"change-name-btn"}," \u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0438\u043A\u043D\u0435\u0439\u043C ")):p("",!0)])])]),e[7]||(e[7]=t("p",{class:"share-message"},"\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u0441\u043A\u0440\u0438\u043D\u0448\u043E\u0442 \u0442\u0438\u0447\u0435\u0440\u0443, \u0447\u0442\u043E\u0431\u044B \u043E\u043D \u0433\u043E\u0440\u0434\u0438\u043B\u0441\u044F! \u{1F389}",-1))]),t("div",ve,[F.value?(d(),m("button",{key:0,class:"toggle-btn",onClick:D},l(k.value?"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u25B2":"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0441\u0435\u0445 \u25BC"),1)):p("",!0),t("button",{class:"games-btn",onClick:P},"\u0432\u0441\u0435 \u0438\u0433\u0440\u044B"),t("button",{class:"close-btn",onClick:T},"\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435"),t("button",{class:"try-again-btn",onClick:L},"\u0423\u043B\u0443\u0447\u0448\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442")]),g.value?(d(),m("div",pe,[t("div",_e,[t("div",fe,[t("table",null,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"\u{1F3C6}"),t("th",null,"\u043B\u0443\u0447\u0448\u0438\u0435 \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043C\u044F :"),t("th",null,"time"),t("th",null,"\u26A0\uFE0F")])],-1)),t("tbody",null,[(d(!0),m(G,null,Y(A.value,(n,i)=>(d(),m("tr",{key:i,class:j({"highlight-row":y.value===i+1})},[t("td",null,l(i+1),1),t("td",null,[t("span",Ne,[$(l(h(n.agent).name)+" ",1),h(n.agent).id?(d(),m("span",ye," ("+l(h(n.agent).id)+") ",1)):p("",!0)])]),t("td",null,l(n.time),1),t("td",null,l(n.mistakes),1)],2))),128)),y.value>A.value.length?(d(),m("tr",ke,[t("td",null,l(y.value),1),t("td",null,[t("span",we,[$(l(h(u(a).agentName).name)+" ",1),h(u(a).agentName).id?(d(),m("span",be," ("+l(h(u(a).agentName).id)+") ",1)):p("",!0),e[8]||(e[8]=t("span",{class:"you-badge"},"(you)",-1))])]),t("td",null,l((u(a).lastGameResults.time/1e3).toFixed(2)),1),t("td",null,l(u(a).lastGameResults.mistakes),1)])):p("",!0)])])])])])):p("",!0)]))}};var Ge=Q($e,[["__scopeId","data-v-c9b07264"]]);export{Ge as default};
