import{_ as ce}from"./wiresPic.a03d9175.js";import{p as ie,u as ve,r as l,f as de,C as G,o as fe,b as m,c as h,e as c,F as S,q as j,s as D,t as A,E as Q,n as me,j as H}from"./index.5cd3e1e6.js";import{u as he}from"./example-store.b60a5fa6.js";import{s as ge}from"./short-words-data.a9287b5f.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";const _e={class:"progress-container"},ye={class:"progress-bar"},we={class:"game-visual-wrapper"},ke={class:"game-container"},Ce={class:"answers-container"},Ae=["onClick"],be={key:0,class:"error-text"},Le=["data-is-word"],Me={__name:"GameFindPairsWires",setup(Re){const J=ie(),K=ve(),$=he(),N=l(),T=l([]),p=l({}),b=l([]),L=l(null),k=l(!1),i=l(0),M=l([]),q=l(0),O=l(0),x=l(0),_=l(0),g=l([]),v=l(null),u=l([]),P=l(null),y=l([]),d=l([]);de(()=>`${_.value}%`);const U=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},Z=e=>{const a=_.value,s=performance.now(),r=o=>{const f=o-s,w=Math.min(f/500,1);_.value=a+(e-a)*w,w<1&&requestAnimationFrame(r)};requestAnimationFrame(r)};G([x,d],([e,t])=>{const a=t.length;if(a===0){_.value=0;return}const s=e/a*100;Z(Math.min(s,100))},{immediate:!0});const R=l([]),Y=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],F=["YES!","Great","Awesome","Super","Correct"],C=l([]),ee=()=>{const e=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return e[Math.floor(Math.random()*e.length)]},W=()=>{if(!v.value||!P.value||u.value.length===0)return;const e=P.value;e.innerHTML="";const t=e.getBoundingClientRect(),a=v.value.getBoundingClientRect();u.value.forEach(s=>{if(!s)return;const r=s.getBoundingClientRect(),o=a.right-a.width/4-t.left,f=a.top+a.height/2-t.top,w=r.left+r.width/4-t.left,E=r.top+r.height/2-t.top,n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",o),n.setAttribute("y1",f),n.setAttribute("x2",w),n.setAttribute("y2",E),n.setAttribute("stroke",ee()),n.setAttribute("stroke-width","3"),n.setAttribute("stroke-linecap","round"),e.appendChild(n)})};G(p,async()=>{await Q(),W()}),G(()=>b.value,async()=>{await Q(),W()});const z=e=>e.sort(()=>Math.random()-.5),te=e=>{const t=T.value.map(r=>r.eng),a=[...new Set(t)];if(a.length<4)return a;const s=a.filter(r=>r!==e).slice(0,3);return s.push(e),z(s)},I=async()=>{if(i.value>=d.value.length&&y.value.length===0){ae();return}i.value>=d.value.length&&y.value.length>0&&(d.value=[...d.value,...y.value],y.value=[]);const e=d.value[i.value];p.value=e;const t=e.eng;b.value=te(t),L.value=null,k.value=!1,M.value=Array(b.value.length).fill(!1),await Q(),W()};let B=[],V=0;const se=(e,t)=>{L.value=e;const a=p.value.eng;k.value=e===a;const s=!g.value[i.value]&&g.value[i.value]!==!1;if(k.value){s?g.value[i.value]=!0:g.value[i.value]=!1,x.value++;const r=Math.random()>.5;C.value[t]=r?F[Math.floor(Math.random()*F.length)]:e,u.value[t]&&u.value[t].classList.add("correct-pulse"),v.value&&(v.value.classList.remove("pulsing"),v.value.classList.add("correct-pulse")),setTimeout(()=>{C.value[t]=""},1200),setTimeout(()=>{u.value[t]&&u.value[t].classList.remove("correct-pulse"),v.value&&(v.value.classList.remove("correct-pulse"),v.value.classList.add("pulsing"))},1200),setTimeout(()=>{i.value++,I()},800)}else s&&(g.value[i.value]=!1),y.value.some(o=>o.ru===p.value.ru)||y.value.push(p.value),u.value.forEach(o=>{o&&o.classList.add("shake")}),u.value.forEach(o=>{if(!o)return;const f=u.value[t].getBoundingClientRect(),w=f.left+f.width/2,E=f.top+f.height/2,n=o.getBoundingClientRect(),oe=n.left+n.width/2,le=n.top+n.height/2,re=(oe-w)*.6,ne=(le-E)*.6,ue=(Math.random()-.5)*20;o.style.setProperty("--dx",`${re}px`),o.style.setProperty("--dy",`${ne}px`),o.style.setProperty("--angle",`${ue}deg`),o.classList.add("explode"),o.classList.add("shake"),setTimeout(()=>{o.classList.remove("explode"),o.classList.remove("shake")},600)}),setTimeout(()=>{u.value.forEach(o=>{o&&o.classList.remove("shake")})},500),V+=1,R.value[t]=Y[Math.floor(Math.random()*Y.length)],M.value[t]=!0,setTimeout(()=>{R.value[t]=""},1500)},ae=()=>{const e=Date.now()-X;$.setLastGameResults(e,V),$.setGameName("FindPairsEasy"),J.push("/leader-board/")};let X=null;return fe(()=>{N.value=K.params.missionName,T.value=ge[N.value]||[],B=z([...T.value]).slice(0,12),q.value=B.length,O.value=q.value,d.value=[...B],X=Date.now(),I(),g.value=Array(d.value.length).fill(null)}),(e,t)=>(m(),h(S,null,[c("div",_e,[c("div",ye,[(m(!0),h(S,null,j(g.value,(a,s)=>(m(),h("div",{key:s,class:"progress-segment",style:D({width:`${100/d.value.length}%`,"background-color":a===!0?"#34aefa":a===!1?"#f36f78":"transparent"})},null,4))),128))]),c("div",{class:"progress-text",style:D({opacity:_.value>75?0:1})},A(Math.round(_.value))+"% ",5)]),c("div",we,[(m(),h("svg",{class:"lines-overlay",ref_key:"svgLines",ref:P,style:{width:"100%",height:"100%"}},null,512)),c("div",ke,[c("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:v},A(p.value.ru),513),c("div",Ce,[(m(!0),h(S,null,j(b.value,(a,s)=>(m(),h("div",{key:s,style:{position:"relative"}},[c("div",{class:me(["wordCard",{active:L.value===a&&!k.value,correct:k.value&&L.value===a,fade:M.value[s]}]),onClick:r=>se(a,s),ref_for:!0,ref:r=>u.value[s]=r,style:D({opacity:M.value[s]?0:1})},A(a),15,Ae),R.value[s]?(m(),h("div",be,A(R.value[s]),1)):H("",!0),C.value[s]?(m(),h("div",{key:1,class:"positive-text","data-is-word":!F.includes(C.value[s])},A(C.value[s]),9,Le)):H("",!0)]))),128))])])]),c("div",{class:"image-container"},[t[0]||(t[0]=c("img",{src:ce,alt:"Wire Cutter",class:"cutter-image"},null,-1)),c("button",{class:"action-button",onClick:U},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Ee=pe(Me,[["__scopeId","data-v-a02a3024"]]);export{Ee as default};
