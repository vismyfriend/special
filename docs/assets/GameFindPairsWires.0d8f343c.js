import{_ as te}from"./wiresPic.a03d9175.js";import{p as se,u as ae,r,f as oe,C as B,o as re,b as d,c as m,e as c,s as $,t as k,j as q,F as z,q as ne,E as W,n as le}from"./index.77ffbb74.js";import{u as ce}from"./example-store.c1c14f15.js";import{s as ie}from"./short-words-data.0ad16f0d.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";const ve={class:"progress-container"},de={key:0,class:"progress-text"},me={class:"game-visual-wrapper"},fe={class:"game-container"},ge={class:"answers-container"},he=["onClick"],pe={key:0,class:"error-text"},_e={__name:"GameFindPairsWires",setup(ye){const I=se(),Q=ae(),F=ce(),T=r(),C=r([]),g=r({}),h=r([]),p=r(null),f=r(!1),b=r(0),_=r([]),V=r(12),E=r(0),u=r(0),i=r(null),n=r([]),L=r(null),X=oe(()=>`${u.value}%`),Y=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},j=t=>{const s=()=>{const a=t-u.value;Math.abs(a)>1?(u.value+=Math.sign(a),requestAnimationFrame(s)):u.value=t};requestAnimationFrame(s)};B(E,t=>{const s=Math.round(t/V.value*100);j(s)});const y=r([]),G=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],H=()=>{const t=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return t[Math.floor(Math.random()*t.length)]},A=()=>{if(!i.value||!L.value||n.value.length===0)return;const t=L.value;t.innerHTML="";const s=t.getBoundingClientRect(),a=i.value.getBoundingClientRect();n.value.forEach(e=>{if(!e)return;const o=e.getBoundingClientRect(),R=a.right-a.width/4-s.left,M=a.top+a.height/2-s.top,v=o.left+o.width/4-s.left,P=o.top+o.height/2-s.top,l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",R),l.setAttribute("y1",M),l.setAttribute("x2",v),l.setAttribute("y2",P),l.setAttribute("stroke",H()),l.setAttribute("stroke-width","3"),l.setAttribute("stroke-linecap","round"),t.appendChild(l)})};B(g,async()=>{await W(),A()}),B(()=>h.value,async()=>{await W(),A()});const D=t=>t.sort(()=>Math.random()-.5),J=t=>{const s=C.value.map(o=>o.eng),a=[...new Set(s)];if(a.length<4)return a;const e=a.filter(o=>o!==t).slice(0,3);return e.push(t),D(e)},x=async()=>{if(w.length===0||b.value>=w.length){O();return}const t=w[b.value];g.value=t;const s=t.eng;h.value=J(s),p.value=null,f.value=!1,_.value=Array(h.value.length).fill(!1),await W(),A()};let w=[],S=0;const K=(t,s)=>{p.value=t;const a=g.value.eng;f.value=t===a,f.value?(E.value++,n.value[s]&&n.value[s].classList.add("correct-pulse"),i.value&&(i.value.classList.remove("pulsing"),i.value.classList.add("correct-pulse")),setTimeout(()=>{n.value[s]&&n.value[s].classList.remove("correct-pulse"),i.value&&(i.value.classList.remove("correct-pulse"),i.value.classList.add("pulsing"))},1200),setTimeout(()=>{b.value++,x()},800)):(n.value.forEach(e=>{e&&e.classList.add("shake")}),n.value.forEach(e=>{if(!e)return;const o=n.value[s].getBoundingClientRect(),R=o.left+o.width/2,M=o.top+o.height/2,v=e.getBoundingClientRect(),P=v.left+v.width/2,l=v.top+v.height/2,U=(P-R)*.6,Z=(l-M)*.6,ee=(Math.random()-.5)*20;e.style.setProperty("--dx",`${U}px`),e.style.setProperty("--dy",`${Z}px`),e.style.setProperty("--angle",`${ee}deg`),e.classList.add("explode"),e.classList.add("shake"),setTimeout(()=>{e.classList.remove("explode"),e.classList.remove("shake")},600)}),setTimeout(()=>{n.value.forEach(e=>{e&&e.classList.remove("shake")})},500),S+=1,y.value[s]=G[Math.floor(Math.random()*G.length)],_.value[s]=!0,setTimeout(()=>{y.value[s]=""},1500))},O=()=>{const t=Date.now()-N;F.setLastGameResults(t,S),F.setGameName("FindPairsEasy"),I.push("/leader-board/")};let N=null;return re(()=>{T.value=Q.params.missionName,C.value=ie[T.value]||[],w=D([...C.value]).slice(0,12),N=Date.now(),x()}),(t,s)=>(d(),m(z,null,[c("div",ve,[c("div",{class:"progress-bar",style:$({width:X.value})},null,4),u.value>0?(d(),m("div",de,k(u.value)+"%",1)):q("",!0)]),c("div",me,[(d(),m("svg",{class:"lines-overlay",ref_key:"svgLines",ref:L,style:{width:"100%",height:"100%"}},null,512)),c("div",fe,[c("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:i},k(g.value.ru),513),c("div",ge,[(d(!0),m(z,null,ne(h.value,(a,e)=>(d(),m("div",{key:e,style:{position:"relative"}},[c("div",{class:le(["wordCard",{active:p.value===a&&!f.value,correct:f.value&&p.value===a,fade:_.value[e]}]),onClick:o=>K(a,e),ref_for:!0,ref:o=>n.value[e]=o,style:$({opacity:_.value[e]?0:1})},k(a),15,he),y.value[e]?(d(),m("div",pe,k(y.value[e]),1)):q("",!0)]))),128))])])]),c("div",{class:"image-container"},[s[0]||(s[0]=c("img",{src:te,alt:"Wire Cutter",class:"cutter-image"},null,-1)),c("button",{class:"action-button",onClick:Y},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Ae=ue(_e,[["__scopeId","data-v-102c39d1"]]);export{Ae as default};
