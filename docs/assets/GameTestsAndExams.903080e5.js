import{u as R,r as v,o as z,b as n,c,e as s,t as i,F as C,q as E,j as f,s as W,y as Y,w as S,B as T,n as k}from"./index.be4b7620.js";import{T as H}from"./TestsAndExamsData.1acddc47.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";const X={key:0,class:"exercise-container"},Z={class:"exercise-header"},I={class:"task-title"},x={key:0,class:"task-image-container"},q=["src","alt"],ee={key:1,controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},te=["src"],se={key:2,class:"true-false-container"},le={class:"true-false-table"},oe={class:"radio-label"},ae=["name","onUpdate:modelValue"],re={class:"radio-label"},ne=["name","onUpdate:modelValue"],ce={key:3,class:"multiple-choice-container"},ue={class:"question-text"},ie={class:"options-container"},de=["name","value","onUpdate:modelValue"],pe={class:"option-text"},ve={key:0,class:"explain-container"},fe={key:0,class:"explanation-content"},_e=["onClick"],me={class:"check-script-wrapper"},he=["onClick"],ye={key:0,class:"script-toggle-wrapper"},ge=["onClick"],be={key:4,class:"text-script-content"},ke={__name:"GameTestsAndExams",setup(Ae){const V=R(),y=v(null),u=v([]),d=v([]),A=v(null),g=v([]),B=v(""),_=v([]),m=v([]),L=e=>{const o=[...e];for(let l=o.length-1;l>0;l--){const t=Math.floor(Math.random()*(l+1));[o[l],o[t]]=[o[t],o[l]]}return o},$=e=>e.map(o=>{if(o.taskID!=="multiple_choice")return{...o};const t=L([...o.questions]).map(a=>{a.options[a.correctAnswer];const r=L(Object.entries(a.options)),p={};let b="A";return r.forEach(([w,h],D)=>{const F=String.fromCharCode(65+D);p[F]=h,w===a.correctAnswer&&(b=F)}),{...a,options:p,correctAnswer:b}});return{...o,questions:t}});z(()=>{B.value=V.params.missionName,y.value=H[B.value]||null,y.value&&(_.value=$(y.value.tasks),u.value=_.value.map(e=>Array(e.questions.length).fill(null)),d.value=_.value.map(()=>!1),g.value=_.value.map(()=>null),m.value=_.value.map(e=>Array(e.questions.length).fill(!1))),j()});const G=(e,o)=>{m.value[e]||(m.value[e]=[]),m.value[e][o]=!m.value[e][o]},K=(e,o,l)=>d.value[e]?u.value[e][o]===l?"explain-correct":"explain-incorrect":"",M=e=>e===100?{letter:"A+",class:"grade-Aplus"}:e>=85?{letter:"A",class:"grade-A"}:e>=75?{letter:"B+",class:"grade-Bplus"}:e>=60?{letter:"B-",class:"grade-Bminus"}:e>=40?{letter:"C",class:"grade-C"}:e>=20?{letter:"D",class:"grade-D"}:e>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},N=e=>{A.value=A.value===e?null:e},j=()=>{document.addEventListener("contextmenu",e=>{if(e.target.classList.contains("audio-player"))return e.preventDefault(),!1}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="s"&&e.preventDefault()})},O=e=>{d.value[e]=!0;const o=_.value[e];let l=0;o.questions.forEach((a,r)=>{u.value[e][r]===a.correctAnswer&&l++});const t=Math.round(l/o.questions.length*100);g.value[e]=t},U=(e,o,l,t)=>{if(!d.value[e])return"";const a=u.value[e][o];return l===t?a===l?"correct-selected":"correct-not-selected":a===l?"incorrect-selected":""},P=(e,o,l,t)=>{if(!d.value[e])return"";const a=u.value[e][o];return l===t?a===l?"option-correct-selected":"option-correct-not-selected":a===l?"option-incorrect-selected":""},Q=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(e,o)=>y.value?(n(),c("div",X,[s("div",Z,[s("h2",null,i(y.value.mainDescription),1),o[0]||(o[0]=s("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1))]),(n(!0),c(C,null,E(_.value,(l,t)=>(n(),c("div",{key:t,class:"task-container",style:W({backgroundColor:Q[t%7]})},[s("h3",I,i(l.taskDescription),1),l.taskPicture?(n(),c("div",x,[s("img",{src:l.taskPicture,alt:"Image for task "+(t+1),class:"task-image"},null,8,q)])):f("",!0),l.audio?(n(),c("audio",ee,[s("source",{src:l.audio,type:"audio/mp3"},null,8,te),o[1]||(o[1]=Y(" Your browser does not support the audio element. "))])):f("",!0),l.taskID==="true_false"?(n(),c("div",se,[s("table",le,[o[2]||(o[2]=s("thead",null,[s("tr",null,[s("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),s("th",{class:"true-header"},"True"),s("th",{class:"false-header"},"False")])],-1)),s("tbody",null,[(n(!0),c(C,null,E(l.questions,(a,r)=>(n(),c("tr",{key:r},[s("td",null,i(a.text),1),s("td",null,[s("label",oe,[S(s("input",{type:"radio",name:"task"+t+"q"+r,value:"true","onUpdate:modelValue":p=>u.value[t][r]=p},null,8,ae),[[T,u.value[t][r]]]),s("span",{class:k(["radio-custom",U(t,r,"true",a.correctAnswer)])},null,2)])]),s("td",null,[s("label",re,[S(s("input",{type:"radio",name:"task"+t+"q"+r,value:"false","onUpdate:modelValue":p=>u.value[t][r]=p},null,8,ne),[[T,u.value[t][r]]]),s("span",{class:k(["radio-custom",U(t,r,"false",a.correctAnswer)])},null,2)])])]))),128))])])])):l.taskID==="multiple_choice"?(n(),c("div",ce,[(n(!0),c(C,null,E(l.questions,(a,r)=>{var p,b;return n(),c("div",{key:r,class:"question-container"},[s("p",ue,i(r+1)+") "+i(a.text),1),s("div",ie,[(n(!0),c(C,null,E(a.options,(w,h)=>(n(),c("label",{key:h,class:k(["option-label",[P(t,r,h,a.correctAnswer),u.value[t][r]===h&&!d.value[t]?"option-selected":""]])},[S(s("input",{type:"radio",name:"task"+t+"q"+r,value:h,"onUpdate:modelValue":D=>u.value[t][r]=D,class:"option-input"},null,8,de),[[T,u.value[t][r]]]),s("span",pe,i(h)+" : "+i(w),1)],2))),128))]),d.value[t]?(n(),c("div",ve,[(p=m.value[t])!=null&&p[r]?(n(),c("div",fe,[s("p",null,i(a.explanation),1)])):f("",!0),s("button",{class:k(["explain-button",K(t,r,a.correctAnswer)]),onClick:w=>G(t,r)},i((b=m.value[t])!=null&&b[r]?"Well, okay... ":"Explain it to me"),11,_e)])):f("",!0)])}),128))])):f("",!0),s("div",me,[s("button",{class:"check-button",onClick:a=>O(t)}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C - check ",8,he),s("div",{class:k(["score-display",[{"score-visible":d.value[t]},d.value[t]?M(g.value[t]).class:""]])},i(d.value[t]?`${g.value[t]}% (${M(g.value[t]).letter})`:""),3),l.textScript?(n(),c("div",ye,[s("button",{class:"toggle-script-btn",onClick:a=>N(t)},i(A.value===t?"\u0421\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0441\u0442":"Explain it to me"),9,ge)])):f("",!0)]),A.value===t?(n(),c("div",be,[s("p",null,i(l.textScript),1)])):f("",!0)],4))),128))])):f("",!0)}};var De=J(ke,[["__scopeId","data-v-5e45054c"]]);export{De as default};
