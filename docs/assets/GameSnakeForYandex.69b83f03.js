import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{o as h,f as l,h as s,z as c,t as d,l as f}from"./index.55083d55.js";const g={name:"GameSnakeCursor",data(){return{canvas:null,ctx:null,gridSize:20,tileCount:14,snake:[{x:7,y:7}],food:{},dx:1,dy:0,score:0,gameSpeed:400,highScore:localStorage.getItem("snakeHighScore")||0,gameRunning:!0,gameLoopInterval:null,testQuicklyData:[{id:1,eng:"English",ru:"\u0410\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439",hint:"/\u0418\u043D\u0433\u043B\u0438\u0448/"},{id:2,eng:"London",ru:"\u041B\u043E\u043D\u0434\u043E\u043D",hint:"/\u043B\u0410\u043D\u0434\u0430\u043D/"},{id:3,eng:"Capital",ru:"\u0421\u0442\u043E\u043B\u0438\u0446\u04301234567891011"},{id:4,eng:"Special",ru:"\u041E\u0441\u043E\u0431\u0435\u043D\u043D\u044B\u0439",hint:"/ \u0441\u043F\u042D\u0448\u043B /"}],currentWordIndex:0,wordPositions:[],showAllWordsModal:!1,gamePaused:!1,lastDirection:{dx:1,dy:0},specialEffects:{snakeColors:["#8A2BE2","#1E90FF","#00FF00","#FFFF00","#FFA500","#FF0000","#FF69B4","#00FFFF","#800080","#000000","#FFD700","#C0C0C0","#FF1493","#00CED1","#32CD32","#000000"],effects:{5:{type:"invert",duration:2,description:"\u041F\u043E\u043B\u0435 \u0447\u0435\u0440\u043D\u043E\u0435, \u0437\u043C\u0435\u0439\u043A\u0430 \u0431\u0435\u043B\u0430\u044F"},10:{type:"invertReverse",duration:3,description:"\u041F\u043E\u043B\u0435 \u0431\u0435\u043B\u043E\u0435, \u0437\u043C\u0435\u0439\u043A\u0430 \u0447\u0435\u0440\u043D\u0430\u044F"},17:{type:"strobe",duration:3,description:"\u0421\u0442\u0440\u043E\u0431\u043E\u0441\u043A\u043E\u043F \u043D\u0430 2 \u043E\u0431\u044A\u0435\u043A\u0442\u0430"},20:{type:"pinkBlue",duration:5,description:"\u0420\u043E\u0437\u043E\u0432\u043E\u0435 \u043F\u043E\u043B\u0435, \u0441\u0438\u043D\u044F\u044F \u0437\u043C\u0435\u0439\u043A\u0430"},30:{type:"invertReverse",duration:0,description:"\u041F\u043E\u043B\u0435 \u0431\u0435\u043B\u043E\u0435, \u0437\u043C\u0435\u0439\u043A\u0430 \u0447\u0435\u0440\u043D\u0430\u044F"}}},currentEffect:null,effectCounter:0,strobeState:!1}},mounted(){this.initGame()},beforeDestroy(){this.cleanup()},methods:{initGame(){this.canvas=this.$refs.gameCanvas,this.ctx=this.canvas.getContext("2d"),this.generateFood(),this.startGameLoop(),window.addEventListener("keydown",this.handleKeyDown)},cleanup(){clearInterval(this.gameLoopInterval),window.removeEventListener("keydown",this.handleKeyDown)},generateFood(){this.food={x:Math.floor(Math.random()*(this.tileCount-4))+2,y:Math.floor(Math.random()*(this.tileCount-4))+2};let e=!1;for(;!e;){e=!0;for(let t of this.snake)if(t.x===this.food.x&&t.y===this.food.y){e=!1;break}if(e){for(let t of this.wordPositions)if(t.x===this.food.x&&t.y===this.food.y&&t.letter!==" "){e=!1;break}}e||(this.food={x:Math.floor(Math.random()*(this.tileCount-4))+2,y:Math.floor(Math.random()*(this.tileCount-4))+2})}},placeWord(e){this.wordPositions=[];const t=2,i=1,o=2,a=3,n=this.tileCount-4;for(let r=0;r<e.eng.length;r++)this.wordPositions.push({x:t+r,y:o,letter:e.eng[r],type:"eng"});if(e.hint)for(let r=0;r<e.hint.length;r++)this.wordPositions.push({x:i+r,y:a,letter:e.hint[r],type:"hint"});for(let r=0;r<e.ru.length;r++)this.wordPositions.push({x:t+r,y:n,letter:e.ru[r],type:"ru"})},drawWords(){if(this.wordPositions.length!==0){this.ctx.font="14px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle";for(let e of this.wordPositions)e.letter!==" "&&(e.type==="ru"?this.ctx.fillStyle="rgba(200,200,200,0)":this.ctx.fillStyle="rgba(255, 255, 255, 0.9)",this.ctx.fillRect(e.x*this.gridSize,e.y*this.gridSize,this.gridSize-2,this.gridSize-2),e.type==="ru"?this.ctx.fillStyle="#666":this.ctx.fillStyle="#333",this.ctx.fillText(e.type==="eng"?e.letter.toUpperCase():e.letter,e.x*this.gridSize+this.gridSize/2,e.y*this.gridSize+this.gridSize/2))}},getSnakeColor(e){if(e===0)return"#45a049";if(e<4)return"#4CAF50";const t=e-4;if(t<this.specialEffects.snakeColors.length)return this.specialEffects.snakeColors[t];const i=this.specialEffects.snakeColors;return i[i.length-2+t%2]},checkSpecialEffects(){const e=this.score/10;this.currentEffect&&this.currentEffect.duration>0&&(this.effectCounter++,this.effectCounter>=this.currentEffect.duration&&(this.currentEffect=null,this.effectCounter=0,this.strobeState=!1));const t=this.specialEffects.effects[e];t&&!this.currentEffect&&(this.currentEffect={...t},this.effectCounter=0,this.strobeState=!1)},drawSnake(){const e=this.snake[0];for(let t=0;t<this.snake.length;t++){let i=this.getSnakeColor(t);this.currentEffect&&(i=this.applyEffectToColor(i,t===0)),this.ctx.fillStyle=i,this.ctx.fillRect(this.snake[t].x*this.gridSize,this.snake[t].y*this.gridSize,this.gridSize-2,this.gridSize-2)}(!this.currentEffect||!this.currentEffect.type.includes("invert"))&&(this.ctx.font="20px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText("\u{1F575}\uFE0F",e.x*this.gridSize+this.gridSize/2,e.y*this.gridSize+this.gridSize/2))},applyEffectToColor(e,t){if(!this.currentEffect)return e;switch(this.currentEffect.type){case"invert":return"#FFFFFF";case"invertReverse":return"#000000";case"strobe":return this.strobeState=!this.strobeState,this.strobeState?"#000000":"#FFFFFF";case"pinkBlue":return"#1E90FF";default:return e}},drawGrid(){let e="rgba(255, 255, 255, 0.1)",t="rgba(0,0,0,0)";if(this.currentEffect)switch(this.currentEffect.type){case"invert":t="#000000",e="rgba(255, 255, 255, 0.3)";break;case"invertReverse":t="#FFFFFF",e="rgba(0, 0, 0, 0.3)";break;case"strobe":t=this.strobeState?"#000000":"#FFFFFF",e=this.strobeState?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)";break;case"pinkBlue":t="#FF69B4",e="rgba(255, 255, 255, 0.3)";break}this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle=e,this.ctx.lineWidth=1;for(let i=0;i<=this.tileCount;i++)this.ctx.beginPath(),this.ctx.moveTo(i*this.gridSize,0),this.ctx.lineTo(i*this.gridSize,this.canvas.height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,i*this.gridSize),this.ctx.lineTo(this.canvas.width,i*this.gridSize),this.ctx.stroke()},drawFood(){let e="#ff4757";if(this.currentEffect)switch(this.currentEffect.type){case"invert":e="#FFFFFF";break;case"invertReverse":e="#000000";break;case"strobe":e=this.strobeState?"#FFFFFF":"#000000";break;case"pinkBlue":e="#1E90FF";break}this.ctx.fillStyle=e,this.ctx.beginPath(),this.ctx.arc(this.food.x*this.gridSize+this.gridSize/2,this.food.y*this.gridSize+this.gridSize/2,this.gridSize/2-1,0,Math.PI*2),this.ctx.fill()},moveSnake(){if(this.gamePaused)return;const e={x:this.snake[0].x+this.dx,y:this.snake[0].y+this.dy};if(e.x<0||e.x>=this.tileCount||e.y<0||e.y>=this.tileCount){this.gameOver();return}for(let t of this.snake)if(e.x===t.x&&e.y===t.y){this.gameOver();return}if(this.snake.unshift(e),e.x===this.food.x&&e.y===this.food.y){this.score+=10,this.checkSpecialEffects();const t=this.score/10;t===1?this.gameSpeed=300:t===2?this.gameSpeed=250:t===3&&(this.gameSpeed=200),t<=3&&(clearInterval(this.gameLoopInterval),this.startGameLoop()),this.currentWordIndex===0&&this.score===10?this.placeWord(this.testQuicklyData[this.currentWordIndex]):this.currentWordIndex>0&&this.placeWord(this.testQuicklyData[this.currentWordIndex]),this.currentWordIndex++,this.currentWordIndex>=this.testQuicklyData.length&&(this.showAllWordsModal=!0,this.gamePaused=!0,this.lastDirection={dx:this.dx,dy:this.dy},this.dx=0,this.dy=0),this.generateFood()}else this.snake.pop()},gameOver(){this.gameRunning=!1,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore))},restartGame(){this.snake=[{x:7,y:7}],this.dx=1,this.dy=0,this.score=0,this.gameRunning=!0,this.gamePaused=!1,this.showAllWordsModal=!1,this.currentWordIndex=0,this.wordPositions=[],this.generateFood(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(),this.drawFood(),this.drawSnake(),this.drawWords()},continueGame(){this.showAllWordsModal=!1,this.gamePaused=!1,this.currentWordIndex=0,this.placeWord(this.testQuicklyData[this.currentWordIndex]),this.currentWordIndex++,this.dx=this.lastDirection.dx,this.dy=this.lastDirection.dy},handleDirection(e){if(!this.gameRunning||this.gamePaused)return;const t=this.snake[0];let i=t.x,o=t.y;switch(e){case"up":this.dy!==1&&(o=t.y-1,this.isPositionInSnake(i,o)||(this.dx=0,this.dy=-1));break;case"down":this.dy!==-1&&(o=t.y+1,this.isPositionInSnake(i,o)||(this.dx=0,this.dy=1));break;case"left":this.dx!==1&&(i=t.x-1,this.isPositionInSnake(i,o)||(this.dx=-1,this.dy=0));break;case"right":this.dx!==-1&&(i=t.x+1,this.isPositionInSnake(i,o)||(this.dx=1,this.dy=0));break}},isPositionInSnake(e,t){for(let i=0;i<this.snake.length-1;i++)if(this.snake[i].x===e&&this.snake[i].y===t)return!0;return!1},handleKeyDown(e){if(!(!this.gameRunning||this.gamePaused))switch(e.key){case"ArrowUp":case"w":case"W":case"\u0426":case"\u0446":e.preventDefault(),this.handleDirection("up");break;case"ArrowDown":case"s":case"s":case"\u044B":case"\u042B":e.preventDefault(),this.handleDirection("down");break;case"ArrowLeft":case"a":case"A":case"\u0444":case"\u0424":e.preventDefault(),this.handleDirection("left");break;case"ArrowRight":case"d":case"D":case"\u0412":case"\u0432":e.preventDefault(),this.handleDirection("right");break}},startGameLoop(){this.gameLoopInterval=setInterval(()=>{this.gameRunning&&this.moveSnake(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(),this.drawWords(),this.drawFood(),this.drawSnake()},this.gameSpeed)},backToIntroPage(){this.$router.push("/")}}},x={class:"snake-game-container"},k={class:"game-container"},y={class:"canvas-wrapper"},p={ref:"gameCanvas",width:"280",height:"280"},S={class:"controls"},F={class:"control-buttons"},m={class:"game-info"},v={class:"score"},b={class:"high-score"},w={key:0,class:"game-over"},C={key:1,class:"modal-overlay"},E={class:"modal-content"},P={class:"modal-buttons"};function I(e,t,i,o,a,n){return h(),l("div",x,[s("button",{class:"closeThisPage",onClick:t[0]||(t[0]=(...r)=>n.backToIntroPage&&n.backToIntroPage(...r))},"close game \u274C"),s("div",k,[s("div",y,[s("canvas",p,null,512)]),s("div",S,[s("div",F,[s("button",{class:"control-btn up",onClick:t[1]||(t[1]=r=>n.handleDirection("up"))},"\u2191"),s("button",{class:"control-btn left",onClick:t[2]||(t[2]=r=>n.handleDirection("left"))},"\u2190"),s("button",{class:"control-btn right",onClick:t[3]||(t[3]=r=>n.handleDirection("right"))},"\u2192"),s("button",{class:"control-btn down",onClick:t[4]||(t[4]=r=>n.handleDirection("down"))},"\u2193")])]),t[10]||(t[10]=s("h1",null,"\u{1F40D} Snake Game",-1)),t[11]||(t[11]=s("p",{class:"subtitle"},"\u0412\u0438\u043D\u0441\u0435\u043D\u0442 \u0438\u0437 \u043C\u0430\u043C\u0438\u043D \u043A\u043E\u0434\u0435\u0440)",-1)),s("div",m,[s("div",v,[t[8]||(t[8]=c("Score: ")),s("span",null,d(a.score),1)]),s("div",b,[t[9]||(t[9]=c("High Score: ")),s("span",null,d(a.highScore),1)])]),t[12]||(t[12]=s("div",{class:"instructions"},[s("p",null,[s("strong",null,"Controls:")]),s("p",null,"\u2022 Use arrow keys or WASD to move"),s("p",null,"\u2022 Click the control buttons above"),s("p",null,"\u2022 Eat the food to grow and increase your score!")],-1))]),a.gameRunning?f("",!0):(h(),l("div",w,[t[14]||(t[14]=s("h2",null,"You are special!",-1)),s("p",null,[t[13]||(t[13]=c("Your score is : ")),s("span",null,d(a.score),1)]),s("button",{class:"restart-btn",onClick:t[5]||(t[5]=(...r)=>n.restartGame&&n.restartGame(...r))},"Click Start")])),a.showAllWordsModal?(h(),l("div",C,[s("div",E,[t[15]||(t[15]=s("h2",null,"\u0412\u044B \u0441\u044A\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430! \u{1F389}",-1)),t[16]||(t[16]=s("p",null,"\u0425\u043E\u0442\u0438\u0442\u0435 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0438\u0433\u0440\u0443?",-1)),s("div",P,[s("button",{class:"modal-btn continue",onClick:t[6]||(t[6]=(...r)=>n.continueGame&&n.continueGame(...r))},"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),s("button",{class:"modal-btn restart",onClick:t[7]||(t[7]=(...r)=>n.restartGame&&n.restartGame(...r))},"\u041D\u0430\u0447\u0430\u0442\u044C \u0437\u0430\u043D\u043E\u0432\u043E")])])])):f("",!0)])}var W=u(g,[["render",I],["__scopeId","data-v-14ec44af"]]);export{W as default};
