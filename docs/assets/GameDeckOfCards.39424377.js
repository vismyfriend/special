import{_ as A}from"./nextCard.43443622.js";import{p as E,u as W,b as s,i as F,D as K,d as U,o as v,f as m,h as e,t as r,l as b,n as L,F as V,q as Q,s as P}from"./index.9347cabd.js";import{q as Z}from"./questions-data.be4b7bfb.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";const H={key:0,class:"game-container"},J={key:0,class:"modal-overlay"},X={class:"modal-content"},Y={class:"side-buttons"},ee=["disabled"],ae={class:"deck-of-cards"},te={class:"card-content"},se={class:"card-text"},le={class:"word"},ne={class:"timer-text"},oe={class:"remaining-cards",ref:"remainingCardsContainer"},re={class:"card-content"},ue={class:"card-text"},ie={class:"word"},ce={class:"translation"},de={__name:"GameDeckOfCards",setup(ve){E();const S=W();/iPhone|iPad|iPod/i.test(navigator.userAgent);const p=s([]),t=s(null);let u=[];const _=s([]);s(!1);const g=s(!1),x=s(""),I=a=>{x.value=a,g.value=!0},G=()=>{g.value=!1},i=s(!1);let k=null;const R=()=>{k&&clearTimeout(k),i.value=!0,k=setTimeout(()=>{i.value=!1},8e3)},C=s(!1),B=()=>{C.value=!0,h(),setTimeout(()=>{C.value=!1},300)},l=s(null),n=s(0),c=s(!1),N=()=>{if(c.value){clearInterval(l.value),l.value=null,n.value=0,c.value=!1;return}h(),n.value=77,c.value=!0,l.value=setInterval(()=>{!c.value||(n.value-=1,n.value<=0&&(clearInterval(l.value),l.value=null,c.value=!1,n.value=0,I(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`)))},1e3)},O=a=>a.sort(()=>Math.random()-.5);let f=!1;const h=async()=>{if(f)return;if(f=!0,u.length===1){$(),f=!1;return}t.value&&!t.value.isIntro&&(i.value=!0,await new Promise(d=>setTimeout(d,500)),_.value.push(t.value));const a=u.pop();t.value=a,i.value=!1,f=!1},D=()=>{if(_.value.length===0)return;const a=_.value.pop();t.value&&u.push(t.value),t.value=a},$=()=>{I("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},y=F(()=>u),M=a=>{const o=a*4,q=10*Math.cos(o*Math.PI/180),z=10*Math.sin(o*Math.PI/180);return{"--x":`${q}px`,"--y":`${z}px`,"--angle":`${o}deg`,transform:"translate(var(--x), var(--y)) rotate(var(--angle))",zIndex:a}},T=a=>{a.key==="ArrowDown"?h():a.key==="ArrowUp"&&D()};return K(()=>{clearInterval(l.value),l.value=null,window.removeEventListener("keydown",T)}),U(()=>{const a=S.params.missionName;p.value=Z[a]||[],u=O([...p.value]),t.value={ru:"\u043D\u0430\u0436\u0438\u043C\u0430\u0439 \u043D\u0430 \u043A\u043E\u043B\u043E\u0434\u0443",eng:"Click the deck",isIntro:!0},window.addEventListener("keydown",T)}),(a,d)=>p.value.length?(v(),m("div",H,[g.value?(v(),m("div",J,[e("div",X,[e("p",null,r(x.value),1),e("button",{onClick:G},"OK")])])):b("",!0),e("div",Y,[e("button",{onClick:D,class:"game-btn",disabled:_.value.length===0}," Ctrl + Z ",8,ee)]),e("div",ae,[e("div",{class:"wordCard",onClick:R},[e("div",te,[e("div",se,[e("div",le,r(t.value.eng),1),e("div",{class:L(["translation",{blurred:!i.value&&!t.value.isIntro}])},r(t.value.ru),3)])])]),e("div",{class:"timer-block",onClick:N,role:"button"},[e("span",ne,r(n.value>0?`${n.value} seconds`:"Start"),1)]),e("div",oe,[(v(!0),m(V,null,Q(y.value,(w,o)=>(v(),m("div",{class:"remaining-card",onClick:h,key:o,style:P(M(o)),role:"button"},[e("div",re,[e("div",ue,[e("div",ie,r(w.eng),1),e("div",ce,r(w.ru),1)])])],4))),128)),y.value.length>0?(v(),m("div",{key:0,class:L(["card-back-cover",{tapped:C.value}]),style:P(M(y.value.length-1)),onClick:B},d[0]||(d[0]=[e("img",{src:A,alt:"Card Back",role:"button"},null,-1)]),6)):b("",!0)],512)])])):b("",!0)}};var pe=j(de,[["__scopeId","data-v-2fd69f51"]]);export{pe as default};
