import{_ as re}from"./wiresPic.a03d9175.js";import{p as ne,u as ue,r as l,f as ce,C as E,o as ie,b as d,c as h,e as u,s as I,t as w,j as G,F as V,q as ve,E as S,n as de}from"./index.ebe99859.js";import{u as he}from"./example-store.b529c197.js";import{s as me}from"./short-words-data.0ad16f0d.js";import{_ as fe}from"./plugin-vue_export-helper.21dcd24c.js";const ge={class:"progress-container"},pe={key:0,class:"progress-text"},_e={class:"game-visual-wrapper"},ye={class:"game-container"},we={class:"answers-container"},ke=["onClick"],Ce={key:0,class:"error-text"},be=["data-is-word"],Ae={__name:"GameFindPairsWires",setup(Le){const X=ne(),j=ue(),D=he(),N=l(),M=l([]),m=l({}),k=l([]),C=l(null),_=l(!1),b=l(0),A=l([]),H=l(0);l(12);const $=l(0),i=l(0),c=l(null),r=l([]),R=l(null),f=l([]),v=l([]),J=ce(()=>`${i.value}%`),K=()=>{console.log("\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u0430\u0436\u0430\u0442\u0430 \u2014 \u0440\u0435\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430!")},O=s=>{const t=()=>{const a=s-i.value;Math.abs(a)>1?(i.value+=Math.sign(a),requestAnimationFrame(t)):i.value=s};requestAnimationFrame(t)};E($,s=>{const t=v.value.length||1,a=Math.min(Math.round(s/t*100),100);O(a)});const L=l([]),q=["oops!","boom!","ouch!","no!","\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E!","f#ck"],T=["YES!","Great","Awesome","Super","Correct"],y=l([]),U=()=>{const s=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6"];return s[Math.floor(Math.random()*s.length)]},W=()=>{if(!c.value||!R.value||r.value.length===0)return;const s=R.value;s.innerHTML="";const t=s.getBoundingClientRect(),a=c.value.getBoundingClientRect();r.value.forEach(o=>{if(!o)return;const e=o.getBoundingClientRect(),g=a.right-a.width/4-t.left,P=a.top+a.height/2-t.top,B=e.left+e.width/4-t.left,p=e.top+e.height/2-t.top,n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",g),n.setAttribute("y1",P),n.setAttribute("x2",B),n.setAttribute("y2",p),n.setAttribute("stroke",U()),n.setAttribute("stroke-width","3"),n.setAttribute("stroke-linecap","round"),s.appendChild(n)})};E(m,async()=>{await S(),W()}),E(()=>k.value,async()=>{await S(),W()});const Q=s=>s.sort(()=>Math.random()-.5),Z=s=>{const t=M.value.map(e=>e.eng),a=[...new Set(t)];if(a.length<4)return a;const o=a.filter(e=>e!==s).slice(0,3);return o.push(s),Q(o)},x=async()=>{if(b.value>=v.value.length&&f.value.length===0){te();return}b.value>=v.value.length&&f.value.length>0&&(v.value=[...v.value,...f.value],f.value=[]);const s=v.value[b.value];m.value=s;const t=s.eng;k.value=Z(t),C.value=null,_.value=!1,A.value=Array(k.value.length).fill(!1),await S(),W()};let F=[],Y=0;const ee=(s,t)=>{C.value=s;const a=m.value.eng;if(_.value=s===a,_.value){$.value++;const o=Math.random()>.5;y.value[t]=o?T[Math.floor(Math.random()*T.length)]:s,r.value[t]&&r.value[t].classList.add("correct-pulse"),c.value&&(c.value.classList.remove("pulsing"),c.value.classList.add("correct-pulse")),setTimeout(()=>{y.value[t]=""},1200),setTimeout(()=>{r.value[t]&&r.value[t].classList.remove("correct-pulse"),c.value&&(c.value.classList.remove("correct-pulse"),c.value.classList.add("pulsing"))},1200),setTimeout(()=>{b.value++,x()},800)}else f.value.some(e=>e.ru===m.value.ru)||f.value.push(m.value),r.value.forEach(e=>{e&&e.classList.add("shake")}),r.value.forEach(e=>{if(!e)return;const g=r.value[t].getBoundingClientRect(),P=g.left+g.width/2,B=g.top+g.height/2,p=e.getBoundingClientRect(),n=p.left+p.width/2,se=p.top+p.height/2,ae=(n-P)*.6,oe=(se-B)*.6,le=(Math.random()-.5)*20;e.style.setProperty("--dx",`${ae}px`),e.style.setProperty("--dy",`${oe}px`),e.style.setProperty("--angle",`${le}deg`),e.classList.add("explode"),e.classList.add("shake"),setTimeout(()=>{e.classList.remove("explode"),e.classList.remove("shake")},600)}),setTimeout(()=>{r.value.forEach(e=>{e&&e.classList.remove("shake")})},500),Y+=1,L.value[t]=q[Math.floor(Math.random()*q.length)],A.value[t]=!0,setTimeout(()=>{L.value[t]=""},1500)},te=()=>{const s=Date.now()-z;D.setLastGameResults(s,Y),D.setGameName("FindPairsEasy"),X.push("/leader-board/")};let z=null;return ie(()=>{N.value=j.params.missionName,M.value=me[N.value]||[],F=Q([...M.value]).slice(0,12),H.value=F.length,v.value=[...F],z=Date.now(),x()}),(s,t)=>(d(),h(V,null,[u("div",ge,[u("div",{class:"progress-bar",style:I({width:J.value})},null,4),i.value>0?(d(),h("div",pe,w(i.value>=100?"\u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043E\u0442\u0432\u0435\u0442\u043E\u0432...":Math.round(i.value)+"%"),1)):G("",!0)]),u("div",_e,[(d(),h("svg",{class:"lines-overlay",ref_key:"svgLines",ref:R,style:{width:"100%",height:"100%"}},null,512)),u("div",ye,[u("div",{class:"wordCard main-word pulsing",ref_key:"leftWord",ref:c},w(m.value.ru),513),u("div",we,[(d(!0),h(V,null,ve(k.value,(a,o)=>(d(),h("div",{key:o,style:{position:"relative"}},[u("div",{class:de(["wordCard",{active:C.value===a&&!_.value,correct:_.value&&C.value===a,fade:A.value[o]}]),onClick:e=>ee(a,o),ref_for:!0,ref:e=>r.value[o]=e,style:I({opacity:A.value[o]?0:1})},w(a),15,ke),L.value[o]?(d(),h("div",Ce,w(L.value[o]),1)):G("",!0),y.value[o]?(d(),h("div",{key:1,class:"positive-text","data-is-word":!T.includes(y.value[o])},w(y.value[o]),9,be)):G("",!0)]))),128))])])]),u("div",{class:"image-container"},[t[0]||(t[0]=u("img",{src:re,alt:"Wire Cutter",class:"cutter-image"},null,-1)),u("button",{class:"action-button",onClick:K},"\u0420\u0435\u0436\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0432\u043E\u0434!!!")])],64))}};var Pe=fe(Ae,[["__scopeId","data-v-67b63a96"]]);export{Pe as default};
