import{r as n,o as Z,G as j,b as g,c as _,e,y as w,t as s,u as de,j as y,w as G,H as $,i as ce,h as me,F as pe}from"./index.2a1f6137.js";import{q as we}from"./questions-data.e4548d5f.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";const fe={class:"tilt-debugger"},ge={__name:"TiltDebugger",setup(Q){const N=n(0),I=n(0),f=n(0),b=r=>{var l,o,u;N.value=(l=r.alpha)!=null?l:0,I.value=(o=r.beta)!=null?o:0,f.value=(u=r.gamma)!=null?u:0};return Z(()=>{window.addEventListener("deviceorientation",b)}),j(()=>{window.removeEventListener("deviceorientation",b)}),(r,l)=>(g(),_("div",fe,[l[3]||(l[3]=e("h4",null,"\u{1F4D0} \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430:",-1)),e("div",null,[l[0]||(l[0]=e("strong",null,"Alpha (\u043E\u0441\u0438 Z):",-1)),w(" "+s(N.value.toFixed(1))+"\xB0",1)]),e("div",null,[l[1]||(l[1]=e("strong",null,"Beta (\u043D\u0430\u043A\u043B\u043E\u043D \u043D\u0430 \u0441\u0435\u0431\u044F / \u043E\u0442 \u0441\u0435\u0431\u044F):",-1)),w(" "+s(I.value.toFixed(1))+"\xB0",1)]),e("div",null,[l[2]||(l[2]=e("strong",null,"Gamma (\u0432\u043B\u0435\u0432\u043E / \u0432\u043F\u0440\u0430\u0432\u043E):",-1)),w(" "+s(f.value.toFixed(1))+"\xB0",1)])]))}};var _e=J(ge,[["__scopeId","data-v-71e860ce"]]);const be={key:0,class:"modal-overlay"},Te={class:"counter-row"},Ee={key:1,class:"game-container"},ke={key:0,class:"modal-overlay"},De={class:"modal-content"},Le={key:1,class:"modal-overlay"},Oe={class:"modal-content"},xe={class:"word"},ye={class:"translation"},Ne={class:"tilt-flags-debug"},X=1300,z=30,Ie={__name:"GameExplainTheWord",setup(Q){const N=de(),I=/iPhone|iPad|iPod/i.test(navigator.userAgent),f=n({canForward:!0,canBackward:!0}),b=n([]),r=n([]),l=n([]),o=n({}),u=n(!1),W=n(!0),A=n(!1),C=n(""),T=n(0),R=n(!1),S=n(null),F=n(0),H=n(0),Y=n("portrait"),M=()=>{Y.value=window.innerWidth>window.innerHeight?"landscape":"portrait"},E=n(!1),v=n("beta"),ee=()=>{u.value=!1},k=a=>{C.value=`${a}

Next: ${F.value} \u0440\u0430\u0437
Skip: ${H.value} \u0440\u0430\u0437`,u.value=!0},P=()=>{F.value+=1,h()},te=()=>{H.value+=1,h()},U=()=>{oe()},ne=()=>{const a=o.value.ru;o.value.ru=o.value.eng,o.value.eng=a},ae=a=>a.sort(()=>Math.random()-.5),h=()=>{if(r.value.length===0){k("\u{1F389} \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430!");return}o.value&&!o.value.isIntro&&l.value.push(o.value),o.value=r.value.pop()},oe=()=>{l.value.length!==0&&(o.value&&r.value.push(o.value),o.value=l.value.pop())},le=()=>{if(R.value){clearInterval(S.value),T.value=0,R.value=!1;return}h(),T.value=10,R.value=!0,S.value=setInterval(()=>{T.value-=1,T.value<=0&&(clearInterval(S.value),R.value=!1,k("\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!"))},1e3)};let d=0,c=!0,m=!0;const D=a=>{if(v.value!=="beta")return;const{beta:t}=a,i=Date.now(),O=125,x=30,p=90;t>x&&t<p&&(m=!0),t<O&&t>p&&(c=!0),t>O&&c&&i-d>X?(navigator.vibrate&&navigator.vibrate(z),P(),d=i,c=!1):t<x&&m&&i-d>X&&(navigator.vibrate&&navigator.vibrate(z),U(),d=i,m=!1),f.value={canForward:c,canBackward:m}};let B=null,V=0;const L=a=>{if(v.value!=="gamma")return;const t=Date.now(),i=a.accelerationIncludingGravity.x,O=2e3,x=30;B===null&&(B=i>0?1:-1);const p=i*B,q=4.5,K=-4.5,ue=-2.5,ve=2.5;V>q&&p<ve&&(c=!0),V<K&&p>ue&&(m=!0),p>q&&c&&t-d>O?(navigator.vibrate&&navigator.vibrate(x),P(),d=t,c=!1):p<K&&m&&t-d>O&&(navigator.vibrate&&navigator.vibrate(x),U(),d=t,m=!1),V=p,f.value={canForward:c,canBackward:m}},ie=()=>{window.DeviceOrientationEvent?typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&(window.addEventListener("deviceorientation",D),window.addEventListener("devicemotion",L),E.value=!0,k("\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043E!"))}).catch(a=>{console.error("Permission denied:",a),k("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u0434\u0430\u0442\u0447\u0438\u043A\u0430\u043C")}):(window.addEventListener("deviceorientation",D),window.addEventListener("devicemotion",L),E.value=!0):k("\u0412\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438")},se=()=>{W.value=!1},re=async()=>{if(W.value=!1,M(),window.DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&(window.addEventListener("deviceorientation",D),window.addEventListener("devicemotion",L),E.value=!0,C.value=`\u2705 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,u.value=!0)}catch(a){console.warn("Permission denied",a)}else window.addEventListener("deviceorientation",D),window.addEventListener("devicemotion",L),E.value=!0,C.value=`\u2705 \u041D\u0430\u043A\u043B\u043E\u043D\u044B \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B!

\u25B6 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D **\u043D\u0430 \u0441\u0435\u0431\u044F** \u2014 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E
\u25C0 \u041D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 **\u043E\u0442 \u0441\u0435\u0431\u044F** \u2014 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0441\u043B\u043E\u0432\u043E`,u.value=!0};return Z(()=>{B=null;const a=N.params.missionName;b.value=we[a]||[],r.value=ae([...b.value]),o.value={ru:"\u041E\u0431\u044A\u044F\u0441\u043D\u0438 \u044D\u0442\u043E \u043C\u043D\u0435",eng:"Explain it to me",isIntro:!0},M(),window.addEventListener("resize",M)}),j(()=>{clearInterval(S.value),window.removeEventListener("deviceorientation",D),window.removeEventListener("devicemotion",L),window.removeEventListener("resize",M)}),(a,t)=>(g(),_(pe,null,[W.value?(g(),_("div",be,[e("div",{class:"modal-content"},[t[5]||(t[5]=e("p",null,"\u0412\u044B \u0438\u0433\u0440\u0430\u0435\u0442\u0435 \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043B\u0438 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430?",-1)),e("button",{onClick:re},"\u{1F4F1} \u0421 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0433\u043E"),e("button",{onClick:se},"\u{1F4BB} \u0421 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430")])])):y("",!0),e("div",{class:"timer",onClick:le},s(T.value>0?`${T.value} \u0441\u0435\u043A`:"\u0421\u0442\u0430\u0440\u0442"),1),e("div",{class:"button-row"},[e("button",{onClick:U},"\u2190 Back"),e("button",{onClick:P},"\u2192 Next"),e("button",{onClick:te},"\u23ED Skip")]),e("div",Te,[e("span",null,"Next: "+s(F.value),1),e("span",null,"Skip: "+s(H.value),1)]),b.value.length?(g(),_("div",Ee,[e("button",{onClick:t[0]||(t[0]=i=>A.value=!0)},"\u2699"),A.value?(g(),_("div",ke,[e("div",De,[t[9]||(t[9]=e("p",null,"\u0420\u0435\u0436\u0438\u043C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0430\u043A\u043B\u043E\u043D\u0430\u043C\u0438:",-1)),e("label",null,[G(e("input",{type:"radio",value:"off","onUpdate:modelValue":t[1]||(t[1]=i=>v.value=i)},null,512),[[$,v.value]]),t[6]||(t[6]=w(" \u{1F515} \u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C "))]),t[10]||(t[10]=e("br",null,null,-1)),e("label",null,[G(e("input",{type:"radio",value:"beta","onUpdate:modelValue":t[2]||(t[2]=i=>v.value=i)},null,512),[[$,v.value]]),t[7]||(t[7]=w(" \u{1F4F1} \u041F\u043E\u0440\u0442\u0440\u0435\u0442 (beta) "))]),t[11]||(t[11]=e("br",null,null,-1)),e("label",null,[G(e("input",{type:"radio",value:"gamma","onUpdate:modelValue":t[3]||(t[3]=i=>v.value=i)},null,512),[[$,v.value]]),t[8]||(t[8]=w(" \u2194\uFE0F \u041B\u0430\u043D\u0434\u0448\u0430\u0444\u0442 (gamma) "))]),t[12]||(t[12]=e("br",null,null,-1)),e("button",{onClick:t[4]||(t[4]=i=>A.value=!1)},"OK")])])):y("",!0),u.value?(g(),_("div",Le,[e("div",Oe,[e("p",null,s(C.value),1),e("button",{onClick:ee},"OK")])])):y("",!0),e("div",{class:"word-card",onClick:ne},[e("div",xe,s(o.value.eng),1),e("div",ye,s(o.value.ru),1)]),!E.value&&ce(I)?(g(),_("button",{key:2,onClick:ie}," \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):y("",!0)])):y("",!0),me(_e),e("div",Ne,[e("p",null,[t[13]||(t[13]=e("strong",null,"canTriggerForward:",-1)),w(" "+s(f.value.canForward?"\u2705":"\u274C"),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"canTriggerBackward:",-1)),w(" "+s(f.value.canBackward?"\u2705":"\u274C"),1)])])],64))}};var Me=J(Ie,[["__scopeId","data-v-fc460536"]]);export{Me as default};
