import{_ as W}from"./special logo hat square.f96e77e8.js";import{j as H,u as A,r,c as I,C as F,o as U,b as c,d,e as t,t as u,F as Y,q as $,n as z,A as S,h as T,g as V}from"./index.aad5ac4e.js";import{q as Z}from"./questions-data.c8aa9c58.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";const Q={key:0,class:"game-container"},J={class:"side-buttons"},K=["disabled"],X={class:"deck-of-cards"},ee={class:"card-content"},te={class:"card-text"},ae={class:"word"},se={class:"translation"},ne={class:"remaining-cards",ref:"remainingCardsContainer"},oe={class:"card-content"},re={class:"card-text"},ie={class:"word"},le={class:"translation"},N=1e3,ce={__name:"GameDeckOfCards",setup(de){H();const x=A(),R=/iPhone|iPad|iPod/i.test(navigator.userAgent),f=r([]),a=r(null);let i=[];const v=r([]),p=r(!1),g=r(!1),P=()=>{g.value=!0,_(),setTimeout(()=>{g.value=!1},300)},w=r(null),n=r(0),q=I(()=>n.value>0?`You have ${n.value} seconds`:"Timer"),B=()=>{n.value>0||(n.value=77,w.value=setInterval(()=>{n.value-=1,n.value<=0&&(clearInterval(w.value),n.value=0,alert(`\u23F0 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!
\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0445\u043E\u0434\u0430 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443.`))},1e3))},G=e=>e.sort(()=>Math.random()-.5),_=()=>{if(i.length===0){M();return}const e=i.pop();a.value&&!a.value.isIntro&&v.value.push(a.value),a.value=e},D=()=>{if(v.value.length===0)return;const e=v.value.pop();a.value&&i.push(a.value),a.value=e},M=()=>{alert("\u0418\u0433\u0440\u0430 \u043E\u043A\u043E\u043D\u0447\u0435\u043D\u0430! \u0412\u044B \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043B\u0438 \u0432\u0441\u0435 \u0441\u043B\u043E\u0432\u0430.")},h=I(()=>i),O=e=>({top:`${e*1.5}px`,left:`${e*1.5}px`});let m=0,C=!0,k=!0;const b=e=>{const{beta:s}=e,o=Date.now(),l=125,L=30,E=90;s>L&&s<E&&(k=!0),s<l&&s>E&&(C=!0),s>l&&o-m>N&&C?(navigator.vibrate&&navigator.vibrate(30),_(),m=o,C=!1):s<L&&o-m>N&&k&&(navigator.vibrate&&navigator.vibrate(30),D(),m=o,k=!1)},y=()=>{window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",b),p.value=!0)}).catch(console.error):(window.addEventListener("deviceorientation",b),p.value=!0))};return F(()=>{window.removeEventListener("deviceorientation",b)}),U(()=>{const e=x.params.missionName;f.value=Z[e]||[],i=G([...f.value]),a.value={ru:"\u0415\u0441\u043B\u0438 \u0432\u044B \u0443\u0441\u043B\u044B\u0448\u0430\u043B\u0438 YES - \u043D\u0430\u043A\u043B\u043E\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D \u0432\u043D\u0438\u0437",eng:"If you heard YES - tilt your phone down",isIntro:!0},y()}),(e,s)=>f.value.length?(c(),d("div",Q,[t("div",J,[t("button",{onClick:D,class:"game-btn",disabled:v.value.length===0}," Ctrl + Z ",8,K),t("button",{onClick:B,class:"game-btn"},u(q.value),1)]),t("div",X,[t("div",{class:"wordCard",onClick:_},[t("div",ee,[t("div",te,[t("div",ae,u(a.value.ru),1),t("div",se,u(a.value.eng),1)])])]),t("div",ne,[(c(!0),d(Y,null,$(h.value,(o,l)=>(c(),d("div",{class:"remaining-card",onClick:_,key:l,style:S(O(l))},[t("div",oe,[t("div",re,[t("div",ie,u(o.ru),1),t("div",le,u(o.eng),1)])])],4))),128)),h.value.length>0?(c(),d("div",{key:0,class:z(["card-back-cover",{tapped:g.value}]),style:S(O(h.value.length-1)),onClick:P},s[0]||(s[0]=[t("img",{src:W,alt:"Card Back"},null,-1)]),6)):T("",!0)],512)]),!p.value&&V(R)?(c(),d("button",{key:0,onClick:y,class:"enable-tilt-btn"}," \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 -> \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0430\u043A\u043B\u043E\u043D\u044B ")):T("",!0)])):T("",!0)}};var fe=j(ce,[["__scopeId","data-v-58db5927"]]);export{fe as default};
