import{u as te,b as a,i as w,y as ae,d as le,E as se,o as u,f as r,h as o,j as U,m as j,l as W,t as z,F as A,q as F,G as S,n as ne}from"./index.6b10d166.js";import{s as oe}from"./short-words-data.10e930ff.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";const re={key:0,class:"game-container"},ie={key:0,class:"modal-overlay"},ce={class:"modal-content"},ve=["innerHTML"],de={key:0,class:"word-inputs"},me={class:"game-content-wrapper"},pe={class:"main-content"},he={key:0,class:"pronunciation-hint"},fe={class:"hint-container"},_e=["data-length"],ge=["onClick"],ye=["disabled"],be={__name:"GameTranslate",setup(ke){const V=te(),y=a([]),c=a([]),x=a([]),s=a({}),T=a(!1),b=a(""),L=a(!1),p=a(""),h=a(""),M=a(""),O=a(0);a(0);const v=a(!1),f=a([]),_=a(!1),d=a(null),C=a(null),D=w(()=>v.value?s.value.ru:s.value.eng),E=w(()=>v.value?s.value.eng:s.value.ru),H=w(()=>E.value?E.value.split(" "):[]),R=w(()=>v.value?"":s.value.hint),$=(e,t)=>{var l;return((l=f.value[e])==null?void 0:l[t])||!1},q=()=>{f.value=H.value.map(e=>Array(e.length).fill(!0))},i=()=>{S(()=>{var G;const e=(G=C.value)==null?void 0:G.parentNode,t=C.value;if(!e||!t)return;const l=window.innerWidth<=600;let n=l?36:58;const N=l?.85:.8,m=l?5:10;for(t.style.fontSize=`${n}px`,t.style.lineHeight=N,t.style.padding=`${m}px`;(t.scrollWidth>e.clientWidth||t.scrollHeight>e.clientHeight)&&n>12;)n-=1,t.style.fontSize=`${n}px`,l&&n<24&&(n-=.5)})},K=e=>{const t=[...y.value];return B([...t]).slice(0,e).map(n=>n.eng)},P=()=>{L.value=!0,p.value="",h.value="",M.value="",b.value="\u041A\u0430\u043A\u0438\u0435 \u0441\u043B\u043E\u0432\u0430 \u0431\u044B\u043B\u0438 \u0441\u043B\u043E\u0436\u043D\u044B\u043C\u0438?<br>\u{1F389}<br>What words were difficult?",T.value=!0},Z=()=>{if(p.value.trim()||h.value.trim()||M.value.trim())b.value="Good job <br>\u{1F4AA}<br> special agent!";else{const t=K(3);p.value=t[0],h.value=t[1],M.value=t[2],b.value="\u041C\u043D\u043E\u0433\u0438\u043C \u0432\u043E\u0442 \u044D\u0442\u0438 \u043A\u0430\u0436\u0443\u0442\u0441\u044F \u0441\u043B\u043E\u0436\u043D\u044B\u043C\u0438<br>\u{1F4DA}<br>these seem difficult to many"}setTimeout(()=>{T.value=!1,L.value=!1},7e3)},J=()=>{_.value||(q(),_.value=!0,d.value&&clearTimeout(d.value),d.value=setTimeout(()=>{O.value+=1,X(),_.value=!1,d.value=null},700))},Q=()=>{_.value||Y()},B=e=>e.sort(()=>Math.random()-.5),X=()=>{if(c.value.length===0){P();return}s.value&&Object.keys(s.value).length>0&&x.value.push({...s.value}),s.value={...c.value.pop()},g(),i()},Y=()=>{if(x.value.length===0)return;s.value&&Object.keys(s.value).length>0&&c.value.push({...s.value});const e=x.value.pop();s.value={eng:e.eng,ru:e.ru,hint:e.hint},g(),i()},I=()=>{v.value=!v.value,g(),i()},ee=(e,t)=>{f.value[e]&&(f.value[e][t]=!0)},g=()=>{f.value=H.value.map(e=>Array(e.length).fill(!1))},k=e=>{e.touches&&e.touches.length>1&&(e.preventDefault(),e.stopPropagation())};return ae([D,E],()=>{S(()=>{i(),g()})}),le(()=>{i(),window.addEventListener("resize",i);const e=V.params.missionName;y.value=oe[e]||[],c.value=B([...y.value]),c.value.length>0&&(s.value={...c.value.pop()},v.value=!1,g()),document.addEventListener("dblclick",k),document.addEventListener("touchstart",k,{passive:!1});const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",document.head.appendChild(t)}),se(()=>{window.removeEventListener("resize",i),document.removeEventListener("dblclick",k),document.removeEventListener("touchstart",k),d.value&&clearTimeout(d.value)}),(e,t)=>y.value.length?(u(),r("div",re,[T.value?(u(),r("div",ie,[o("div",ce,[o("p",{innerHTML:b.value},null,8,ve),L.value?(u(),r("div",de,[U(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),type:"text",placeholder:"\u0412\u043F\u0438\u0448\u0438 \u0441\u043B\u043E\u0432\u043E \u0438\u043B\u0438 \u0444\u0440\u0430\u0437\u0443",class:"word-input"},null,512),[[j,p.value]]),U(o("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),type:"text",placeholder:"\u0412\u043F\u0438\u0448\u0438 \u0441\u043B\u043E\u0432\u043E \u0438\u043B\u0438 \u0444\u0440\u0430\u0437\u0443",class:"word-input"},null,512),[[j,h.value]])])):W("",!0),o("button",{onClick:Z},"OK")])])):W("",!0),o("div",me,[o("button",{class:"nav-button prev-button",onClick:Q},"\u2039"),o("div",pe,[o("div",{class:"word-card",onClick:I},[o("div",{class:"word",ref_key:"wordText",ref:C},z(D.value),513),R.value?(u(),r("div",he,z(R.value),1)):W("",!0)]),o("div",fe,[(u(!0),r(A,null,F(H.value,(l,n)=>(u(),r("div",{key:n,class:"word-group","data-length":l.length>9?"many":"normal"},[(u(!0),r(A,null,F(l.split(""),(N,m)=>(u(),r("div",{key:`${n}-${m}`,class:ne(["hint-box",{revealed:$(n,m)}]),onClick:G=>ee(n,m)},z($(n,m)?N:"?"),11,ge))),128))],8,_e))),128))])]),o("button",{class:"nav-button next-button",onClick:J,disabled:_.value},"\u203A",8,ye)])])):W("",!0)}};var Te=ue(be,[["__scopeId","data-v-62f45e18"]]);export{Te as default};
