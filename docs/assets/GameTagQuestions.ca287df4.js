import{u as te,b as l,B as H,d as ae,D as le,E as M,i as m,o as u,f as o,h as t,t as n,z as X,F as ne,q as ue,l as f,j as oe,m as re,n as O}from"./index.30c503e9.js";import{N as ie}from"./NewFuturisticStyle.7b1e479d.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";const ve={key:0,class:"futuristic-container"},de={key:0,class:"results-screen"},he={class:"results-stats"},fe={class:"stat correct-stat"},pe={class:"stat-value"},_e={class:"stat attempts-stat"},me={class:"stat-value"},ge={class:"success-rate"},we={class:"rate-value"},ke={key:1},ye={class:"neon-header"},be={class:"glowing-text"},Ce={key:0,class:"data-chip"},Ee={class:"word-grid"},xe={class:"cyber-word"},Te={class:"cyber-translation"},Ae={class:"task-card"},Ie={class:"task-id"},Se={class:"cyber-title"},Ne={key:0,class:"media-frame"},Re=["src"],Le={class:"question-input-container"},Qe={class:"question-text"},Me={key:0,class:"result-display"},Oe={key:1,class:"explanation-text"},Pe={class:"explanation-content"},De={key:0,class:"correct-answer-text"},qe={class:"answer-highlight"},ze={class:"buttons-container"},Ue=["disabled"],Fe={__name:"GameTagQuestions",setup(Ve){const j=te(),d=l(null),C=l(null),c=l(0),r=l(""),a=l(!1),g=l(!1),N=l(!1),E=l(0),P=l(0),R=l(0),w=l([]),x=l(0),k=l(""),b=l(!1),D=()=>{M(()=>{const s=C.value;s&&(s.style.height="auto",s.style.height=Math.min(s.scrollHeight,300)+"px")})};H(()=>r.value,()=>{D()}),H(()=>c.value,()=>{M(()=>{D()})}),ae(()=>{const s=j.params.missionName;d.value=ie[s]||null,L(),window.addEventListener("keyup",z)}),le(()=>{window.removeEventListener("keyup",z)});const L=()=>{M(()=>{C.value&&C.value.focus()})},T=m(()=>{var s,e;return((e=(s=d.value)==null?void 0:s.tasks[0])==null?void 0:e.questions[c.value])||{}}),A=m(()=>{var s,e;return((e=(s=d.value)==null?void 0:s.tasks[0])==null?void 0:e.questions.length)||0}),Y=m(()=>a.value?S.value?"input-correct":"input-incorrect":""),K=m(()=>S.value?"correct-answer":"incorrect-answer"),Q=m(()=>c.value===A.value-1),$=m(()=>A.value?Math.round(E.value/A.value*100):0),J=s=>s?s.split(",").map(e=>{const[h,i]=e.split("-").map(v=>v.trim());return{english:h,russian:i}}):[],q=()=>W(r.value,T.value.correctAnswer),I=l(!1),y=()=>{if(I.value)return;if(!r.value.trim()){b.value=!0,setTimeout(()=>{b.value=!1},200);return}if(a.value&&r.value===k.value)return;if(x.value>=2){alert("You have used all attempts for this question");return}a.value=!0,x.value++,R.value++,k.value=r.value;const s=q();w.value[c.value]||(w.value[c.value]={wasCorrect:!1,incorrectAttempts:0}),s?w.value[c.value].wasCorrect||(w.value[c.value].wasCorrect=!0,E.value++):(w.value[c.value].incorrectAttempts++,P.value++),I.value=!0,setTimeout(()=>{I.value=!1},1e3)},z=s=>{s.key==="Enter"&&(a.value?I.value||(Q.value?V():F()):y())},U=s=>s?s.toLowerCase().trim().replace(/\s+/g," ").replace(/['’‘`"“”]/g,"").replace(/[.,!?;:]$/g,"").replace(/[-–—]/g," ").replace(/\s+/g," ").trim():"",Z=(s,e)=>{if(["he","she","is","are","was","were","do","does","have","has","should","could","would"].includes(e.toLowerCase()))return s.toLowerCase()===e.toLowerCase();if(s.length===e.length){let i=0;for(let v=0;v<s.length;v++)if(s[v]!==e[v]&&(i++,i>1))return!1;return!0}if(Math.abs(s.length-e.length)===1){const i=s.length>e.length?s:e,v=s.length>e.length?e:s;for(let p=0,_=0;p<i.length;p++)if(i[p]===v[_])_++;else if(p!==_)return!1;return!0}return!1},W=(s,e)=>{const h=U(s),i=U(e);if(h===i)return!0;const v=h.split(" "),p=i.split(" ");if(v.length!==p.length)return!1;for(let _=0;_<p.length;_++){const B=v[_],G=p[_];if(B!==G&&!Z(B,G))return!1}return!0},S=m(()=>a.value?q():!1),F=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&y(),c.value++,r.value="",a.value=!1,g.value=!1,x.value=0,k.value="",L()},V=()=>{(a.value&&r.value!==k.value||!a.value&&r.value.trim())&&y(),N.value=!0},ee=()=>{g.value=!g.value},se=()=>{c.value=0,r.value="",a.value=!1,g.value=!1,N.value=!1,E.value=0,P.value=0,R.value=0,x.value=0,k.value="",w.value=[],L()};return(s,e)=>d.value?(u(),o("div",ve,[N.value?(u(),o("div",de,[e[4]||(e[4]=t("h2",{class:"glowing-text"},"MISSION COMPLETE",-1)),t("div",he,[t("div",fe,[t("span",pe,n(E.value),1),e[1]||(e[1]=t("span",{class:"stat-label"},"CORRECT ANSWERS",-1))]),t("div",_e,[t("span",me,n(R.value),1),e[2]||(e[2]=t("span",{class:"stat-label"},"TOTAL ATTEMPTS",-1))])]),t("div",ge,[e[3]||(e[3]=X(" SUCCESS RATE: ")),t("span",we,n($.value)+"%",1)]),t("button",{onClick:se,class:"cyber-button restart-btn"}," RESTART MISSION ")])):(u(),o("div",ke,[t("div",ye,[t("h2",be,n(d.value.mainDescription),1),e[5]||(e[5]=t("p",{class:"cyber-description"},"the more mistakes, the smarter I am",-1))]),d.value.tasks[0].usefulWords?(u(),o("div",Ce,[e[7]||(e[7]=t("div",{class:"chip-header"},"hints = \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438",-1)),t("div",Ee,[(u(!0),o(ne,null,ue(J(d.value.tasks[0].usefulWords),(h,i)=>(u(),o("div",{key:i,class:"word-pair"},[t("span",xe,n(h.english),1),e[6]||(e[6]=t("span",{class:"cyber-separator"},"::",-1)),t("span",Te,n(h.russian),1)]))),128))])])):f("",!0),t("div",Ae,[t("div",Ie,n(c.value+1)+"/"+n(A.value),1),t("h3",Se,n(d.value.tasks[0].taskDescription),1),d.value.tasks[0].taskPicture?(u(),o("div",Ne,[t("img",{src:d.value.tasks[0].taskPicture,class:"holographic-img"},null,8,Re)])):f("",!0),t("div",Le,[t("div",Qe,n(T.value.text),1),oe(t("textarea",{ref_key:"answerInput",ref:C,"onUpdate:modelValue":e[0]||(e[0]=h=>r.value=h),class:O(["cyber-textarea",Y.value]),rows:"1",placeholder:"Type your answer here...",style:{resize:"none","overflow-y":"auto"}},null,2),[[re,r.value]]),a.value?(u(),o("div",Me,[t("span",{class:O(K.value)},n(S.value?"\u2713 CORRECT":"\u2717 INCORRECT \u043C\u043E\u0436\u043D\u043E \u043B\u0438\u0431\u043E \u0438\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C/\u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u043E\u0439 \u043E\u0442\u0432\u0435\u0442 \u0438\u043B\u0438 \u043D\u0430\u0436\u0430\u0442\u044C next"),3)])):f("",!0),g.value&&a.value?(u(),o("div",Oe,[t("div",Pe,n(T.value.explanation),1),S.value?f("",!0):(u(),o("div",De,[e[8]||(e[8]=X(" Correct answer: ")),t("span",qe,n(T.value.correctAnswer),1)]))])):f("",!0),t("div",ze,[a.value?f("",!0):(u(),o("button",{key:0,onClick:y,class:O(["cyber-button verify-btn",{warning:b.value}]),disabled:b.value},n(b.value?"PLEASE \u0445\u043E\u0442\u044C \u0447\u0442\u043E-\u0442\u043E \u0432\u043F\u0438\u0448\u0438":"VERIFY"),11,Ue)),a.value?(u(),o("button",{key:1,onClick:ee,class:"holographic-btn"},n(g.value?"HIDE EXPLANATION":"PLEASE, EXPLAIN"),1)):f("",!0),a.value&&!Q.value?(u(),o("button",{key:2,onClick:F,class:"cyber-button next-btn"}," NEXT QUESTION ")):f("",!0),a.value&&Q.value?(u(),o("button",{key:3,onClick:V,class:"cyber-button finish-btn"}," FINISH MISSION ")):f("",!0)])])])]))])):f("",!0)}};var Xe=ce(Fe,[["__scopeId","data-v-b1028872"]]);export{Xe as default};
