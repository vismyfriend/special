import{u as je,b as y,d as Ve,o as a,f as c,h as r,t as p,F as m,q as A,n as S,l as b,z as x,G as q,x as Xe,s as O,j as N,I as he,m as B,D as _e,J as Je}from"./index.b9e1b7ad.js";import{G as Ye}from"./GameTestsSeedData.f43a8f4a.js";import{_ as Ze}from"./plugin-vue_export-helper.21dcd24c.js";const Ie={key:0,class:"exercise-container"},xe={class:"exercise-header"},qe={class:"header-bottom"},et={class:"task-counter"},tt={key:0,class:"audio-player-sticky-container"},st={controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},ot=["src"],lt={class:"task-content"},nt={key:0,class:"useful-words-container"},rt={class:"useful-words"},at={class:"useful-words-content"},ct={class:"english-word"},ut={class:"translation"},it={key:0,class:"comma"},dt={class:"task-title"},pt={key:1,class:"task-image-container"},vt=["src","alt"],ft={key:2,class:"true-false-container"},ht={class:"true-false-table"},_t={class:"radio-label"},mt=["name","onUpdate:modelValue"],gt={class:"radio-label"},yt=["name","onUpdate:modelValue"],bt={key:3,class:"multiple-choice-container"},wt={class:"question-text margin-bottom"},At={key:0,class:"question-image-container"},kt=["src","alt"],Ct={class:"options-container"},Dt=["name","value","onClick"],St={class:"option-text"},Tt={key:1,class:"explain-container"},Et={key:0,class:"explanation-content"},$t=["onClick"],Ft={key:4,class:"student-input-container"},zt={class:"question-text"},Ot=["onUpdate:modelValue","onKeyup","onInput","data-task","data-question"],Ut=["onUpdate:modelValue","onInput","data-task","data-question"],Mt={key:0,class:"answer-feedback"},Qt={key:0,class:"correct-answer"},Nt={key:1,class:"correct-answer"},Gt={key:2,class:"almost-answer"},Pt={key:3,class:"incorrect-answer"},Ht={key:5,class:"drop-down-text-container"},Rt=["onUpdate:modelValue"],Lt=["value"],Wt={key:0,class:"answer-feedback"},Bt={key:0,class:"correct-answer"},Kt={key:1,class:"incorrect-answer"},jt={key:6,class:"grid-table-container"},Vt={class:"grid-table"},Xt=["onUpdate:modelValue","placeholder"],Jt={key:0,class:"grid-table-feedback"},Yt={key:0,class:"correct-feedback"},Zt={key:1,class:"almost-feedback"},It={key:7,class:"discussion-task-container"},xt={class:"question-controls"},qt=["onClick"],es={class:"question-text"},ts={class:"translation-section"},ss=["onClick"],os={key:1,class:"translation-text"},ls={key:1,class:"translation-text collapsed-translation"},ns={class:"task-footer"},rs={class:"task-controls"},as=["onClick"],cs={key:1,class:"seed-control"},us={class:"seed-display"},is=["onClick"],ds=["onClick","data-task-type"],ps=["onClick"],vs={key:0,class:"text-script-content"},fs={class:"task-navigation"},hs=["disabled"],_s=["disabled"],ms={class:"stats-modal-content"},gs={class:"stats-summary"},ys={class:"stat-item"},bs={class:"stat-value"},ws={class:"stat-item"},As={class:"stat-item"},ks={class:"stat-value"},Cs={class:"stat-item"},Ds={class:"stat-value"},Ss={class:"stat-item"},Ts={class:"stat-value correct"},Es={class:"stat-item"},$s={class:"stat-value incorrect"},Fs={class:"stat-item"},zs={class:"stat-value"},Os={class:"stat-item highlight"},Us={class:"stat-value grade"},Ms={key:0,class:"stats-questions"},Qs={class:"questions-grid"},Ns={class:"question-number"},Gs={class:"question-breakdown"},Ps={class:"correct"},Hs={class:"incorrect"},Rs={__name:"GameTestsSeed",setup(Ls){const me=je(),E=y(null),v=y([]),k=y([]),L=y(null),F=y([]),ee=y(""),_=y([]),U=y([]),$=y(0),M=y([]),G=y([]),P=y([]),W=y(!1),K=y([]),j=y([]),Q=y(""),H=y(""),V=y(!1),ge=y(null),ye=async()=>{if(!w.value||!E.value)return;const e="vismyfriend",t=E.value.mainDescription,l=w.value.finalScore,s=w.value.finalGrade,o=`\u043F\u0440\u0438\u0432\u0435\u0442 \u0412\u0438\u043D\u0441\u0435\u043D\u0442, \u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u043B \u0437\u0430\u0434\u0430\u043D\u0438\u0435 "${t}" \u0438 \u043C\u043E\u0439 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 ${l}% (${s})`;try{await navigator.clipboard.writeText(o),alert(`\u2705 \u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E!

\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044E \u0443\u0447\u0438\u0442\u0435\u043B\u044E...

\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F:
"${o}"`);const n=`https://t.me/${e}?text=${encodeURIComponent(o)}`;window.open(n,"_blank")}catch(n){console.error("Failed to copy:",n),alert("\u274C \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C, \u0441\u043A\u0430\u0436\u0438\u0442\u0435 \u043E\u0431 \u044D\u0442\u043E \u0412\u0438\u043D\u0441\u0435\u043D\u0442\u0443");const i=`https://t.me/${e}?text=${encodeURIComponent(o)}`;window.open(i,"_blank")}},z=y([]),be=e=>{const t=_.value[e];if(!t||t.taskID!=="multiple_choice")return null;let l=0,s=0,o=0,n=0,i=0,u=[];return t.questions.forEach((d,f)=>{var pe,ve;const h=((pe=z.value[e])==null?void 0:pe[f])||[],g=(ve=v.value[e])==null?void 0:ve[f],D=Object.keys(d.options).length;n+=D,g||i++;const T=h.length;l+=T;let R=0,I=0;h.forEach(fe=>{(Array.isArray(d.correctAnswer)?d.correctAnswer.includes(fe):fe===d.correctAnswer)?R++:I++}),s+=R,o+=I,u.push({questionNumber:f+1,questionText:d.text,clicks:T,correctClicks:R,wrongClicks:I,finalAnswer:g,isFinalCorrect:g&&(Array.isArray(d.correctAnswer)?d.correctAnswer.includes(g):g===d.correctAnswer),optionsCount:D,isSkipped:!g})}),{totalQuestions:t.questions.length,totalOptions:n,totalClicks:l,correctClicks:s,wrongClicks:o,skippedQuestions:i,accuracy:l>0?Math.round(s/l*100):0,finalScore:F.value[e]||0,finalGrade:Y(F.value[e]||0).letter,questionsStats:u}},X=y(!1),w=y(null),we=e=>{w.value=be(e),X.value=!0},J=()=>{X.value=!1,w.value=null},Ae=()=>Math.random().toString(36).slice(2,8),te=(e,t)=>{const l=[...e];let s=0;for(let o=0;o<t.length;o++)s=(s<<5)-s+t.charCodeAt(o),s|=0;for(let o=l.length-1;o>0;o--){const n=(s%(o+1)+o)%(o+1),i=Math.abs(n);[l[o],l[i]]=[l[i],l[o]]}return l},se=(e,t)=>e.map(l=>{if(l.taskID!=="multiple_choice")return{...l};const o=te([...l.questions],t+"questions").map(n=>{const i=te(Object.entries(n.options),t+"options"+n.text),u={},d={};i.forEach(([h,g],D)=>{const T=String.fromCharCode(65+D);u[T]=g,d[h]=T});let f;return Array.isArray(n.correctAnswer)?f=n.correctAnswer.map(h=>d[h]):f=d[n.correctAnswer],{...n,options:u,correctAnswer:f}});return{...l,questions:o}}),oe=async()=>{H.value.trim()&&(Q.value=H.value.trim()),V.value=!1,E.value&&(_.value=se(E.value.tasks,Q.value),le())},ke=()=>{navigator.clipboard.writeText(Q.value)},le=()=>{v.value=_.value.map(e=>e.taskID==="grid_table"?Le(e):e.taskID==="drop_down_text"?e.questions.map(t=>{if(t&&t.text){const l=(t.text.match(/\(/g)||[]).length;return Array(l).fill("")}return[]}):e.taskID==="discussion_task"?[]:Array(e.questions.length).fill(null)),z.value=_.value.map(e=>e.taskID==="multiple_choice"?Array(e.questions.length).fill().map(()=>[]):null),k.value=_.value.map(()=>!1),F.value=_.value.map(()=>null),U.value=_.value.map(e=>e&&e.questions?Array(e.questions.length).fill(!1):[]),K.value=_.value.map(()=>[]),M.value=_.value.map(e=>e&&e.taskID==="discussion_task"&&e.questions?Array(e.questions.length).fill(!1):null),G.value=_.value.map(e=>e&&e.taskID==="discussion_task"&&e.questions?Array(e.questions.length).fill(!1):null),P.value=_.value.map(e=>e&&e.taskID==="discussion_task"&&e.questions?Array(e.questions.length).fill(!1):null),$.value=0,q(()=>{var e;((e=_.value[0])==null?void 0:e.taskID)==="multiple_choice"&&ie(0)})},Ce=()=>{$.value<_.value.length-1&&($.value++,window.scrollTo({top:0,behavior:"smooth"}))},De=()=>{$.value>0&&($.value--,window.scrollTo({top:0,behavior:"smooth"}))},Se=e=>{if(!_.value)return;const t=_.value[e];t.taskID==="discussion_task"&&(W.value?(t.questions=[...t.originalQuestions],W.value=!1):(t.originalQuestions||(t.originalQuestions=[...t.questions]),t.questions=[...t.questions].sort(()=>Math.random()-.5),W.value=!0),M.value[e]=Array(t.questions.length).fill(!1),G.value[e]=Array(t.questions.length).fill(!1),P.value[e]=Array(t.questions.length).fill(!1))},C=e=>!e||typeof e!="string"?"":e.toLowerCase().replace(/\s+/g," ").trim().replace(/[.,!?;:…–—]+$/g,"").replace(/[.,!?;:…–—]/g," ").replace(/\s+/g," ").replace(/[`'‘’´]/g,"'").replace(/(\b(?:he|she|it))'?s not\b/g,"$1 is not").replace(/(\b(?:he|she|it)) isn'?t\b/g,"$1 is not").replace(/(\b(?:you|we|they|i))'?re not\b/g,"$1 are not").replace(/(\b(?:you|we|they|i)) aren'?t\b/g,"$1 are not").replace(/\bi'?m not\b/g,"i am not").replace(/\bdo not\b/g,"don't").replace(/\bdoes not\b/g,"doesn't").replace(/\bdid not\b/g,"didn't").replace(/\bwill not\b/g,"won't").replace(/\bcan not\b/g,"can't").replace(/\bmust not\b/g,"mustn't").replace(/\bshould not\b/g,"should't").replace(/\bwould not\b/g,"wouldn't").replace(/\b(?:dont|doesnt|didnt|wont|cant|hadnt|hasnt|mustnt|shouldnt|wouldnt)\b/g,t=>({dont:"don't",doesnt:"doesn't",didnt:"didn't",wont:"won't",cant:"can't",hasnt:"hasn't",hadnt:"hadn't",mustnt:"mustn't",shouldnt:"shouldn't",wouldnt:"wouldn't"})[t]).replace(/\b(?:i am|im)\b/g,"i'm").replace(/\b(?:you are|youre)\b/g,"you're").replace(/\b(?:we are|were)\b/g,"we're").replace(/\b(?:they are|theyre)\b/g,"they're").replace(/\b(?:she is|shes)\b/g,"she's").replace(/\b(?:he is|hes)\b/g,"he's").replace(/\b(?:it is|its)\b/g,"it's").replace(/(\b[a-z]+)'ll\b/gi,"$1 will").replace(/(\b(?:i|you|he|she|we|they|it))'?d\b/g,"$1 would").replace(/\brecieve\b/g,"receive").replace(/\bdefinately\b/g,"definitely").replace(/\bpractice\b/g,"practise").replace(/\s+/g," ").trim(),Te=(e,t)=>{const l=t+1;l<_.value[e].questions.length&&q(()=>{const s=j.value.find(o=>Number(o.dataset.task)===e&&Number(o.dataset.question)===l);if(s&&(s.focus(),s.tagName==="TEXTAREA")){const o=s.value.length;s.setSelectionRange(o,o)}})},ne=(e,t,l)=>{const s=l.target,o=s.value,n={"?":`+ \xA0\xA0\xA0 
- \xA0\xA0\xA0\xA0 
? \xA0\xA0\xA0\xA0 
o? \xA0 `,"+":`+ 
- 
? 
! `,"!":`! 
? 
- 
+ `,"*":`1. 
2. 
3. 
4. `," ":`+ \xA0\xA0\xA0 
- \xA0\xA0\xA0\xA0 
? \xA0\xA0\xA0\xA0 
o? \xA0 `};for(const[i,u]of Object.entries(n))if(o===i){v.value[e][t]=u,q(()=>{s.tagName==="TEXTAREA"&&s._resizeHandler&&s._resizeHandler();const d=u.indexOf(`
`);s.setSelectionRange(d,d),s.focus()});break}},re=(e,t,l,s)=>{if(!k.value[e]||_.value[e].taskID!=="student_input")return"";if(l==="anyIsOk")return"correct";const o=C(v.value[e][t]),n=C(l);return o===n?"correct":s!=null&&s.some(i=>C(i)===o)?"almost":"incorrect"},ae=(e,t,l,s)=>{if(!k.value[e])return"";if(_.value[e].taskID==="student_input"){if(l==="anyIsOk")return"student-input-any-ok";const o=C(v.value[e][t]),n=C(l);return o===n?"student-input-correct":s&&s.some(i=>C(i)===o)?"student-input-almost-correct":"student-input-incorrect"}return v.value[e][t]===l?"student-input-correct":"student-input-incorrect"},Ee=e=>e.split(/(_{1,4})/),$e={mounted:e=>{const t=document.createElement("div");t.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      visibility: hidden;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      font-family: ${getComputedStyle(e).fontFamily};
      font-size: ${getComputedStyle(e).fontSize};
      font-weight: ${getComputedStyle(e).fontWeight};
      line-height: ${getComputedStyle(e).lineHeight};
      padding: ${getComputedStyle(e).padding};
      width: ${e.offsetWidth}px;
      border: ${getComputedStyle(e).border};
      box-sizing: border-box;
    `,document.body.appendChild(t);const l=()=>{e.value?t.textContent=e.value+" ":t.textContent=e.placeholder||"";const s=t.offsetHeight+2;e.style.height="auto",e.style.height=s+"px"};e.addEventListener("input",l),e._resizeHandler=l,e._measureEl=t,setTimeout(l,0)},updated:e=>{e._resizeHandler&&setTimeout(e._resizeHandler,0)},unmounted:e=>{e._resizeHandler&&e.removeEventListener("input",e._resizeHandler),e._measureEl&&document.body.removeChild(e._measureEl)}},Y=e=>e===100?{letter:"A+",class:"grade-Aplus"}:e>=85?{letter:"A",class:"grade-A"}:e>=75?{letter:"B+",class:"grade-Bplus"}:e>=60?{letter:"B-",class:"grade-Bminus"}:e>=40?{letter:"C",class:"grade-C"}:e>=20?{letter:"D",class:"grade-D"}:e>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},Fe=e=>{L.value=L.value===e?null:e},ze=(e,t)=>{U.value[e]||(U.value[e]=[]),U.value[e][t]=!U.value[e][t]},Oe=(e,t)=>{!M.value[e]||(M.value[e][t]=!M.value[e][t],G.value[e][t]=M.value[e][t])},Ue=(e,t)=>{!P.value[e]||(P.value[e][t]=!P.value[e][t])},Me=()=>{document.addEventListener("contextmenu",e=>{if(e.target.classList.contains("audio-player"))return e.preventDefault(),!1}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="s"&&e.preventDefault()})},ce=e=>e?e.split(",").map(t=>{const[l,s]=t.split("-").map(o=>o.trim());return{english:l,russian:s}}):[],Qe=e=>{const t=_.value[e];if(t.taskID==="discussion_task")return;k.value[e]=!0;let l=0;if(t.taskID==="grid_table")l=We(e);else{let s=0,o=0;t.questions.forEach((n,i)=>{if(t.taskID==="student_input"){if(n.correctAnswer==="anyIsOk")s++;else{const u=C(v.value[e][i]),d=C(n.correctAnswer);(u===d||n.almostCorrectAnswers&&n.almostCorrectAnswers.some(f=>C(f)===u))&&s++}o++}else if(t.taskID==="drop_down_text"){const d=Z(n.text).flat().filter(h=>h.type==="dropdown");d.every(h=>v.value[e][i][h.index]&&v.value[e][i][h.index]!=="")&&d.every(g=>{const D=v.value[e][i][g.index];return g.correctOptions.includes(D)})&&s++,o++}else if(t.taskID==="multiple_choice"){const u=v.value[e][i];Array.isArray(n.correctAnswer)?n.correctAnswer.includes(u)&&s++:u===n.correctAnswer&&s++,o++}else v.value[e][i]===n.correctAnswer&&s++,o++}),l=o>0?Math.round(s/o*100):0}F.value[e]=l},ue=(e,t,l,s)=>{if(!k.value[e])return"";const o=v.value[e][t];return(Array.isArray(s)?s.includes(l):l===s)?o===l?"correct-selected":"correct-not-selected":o===l?"incorrect-selected":""},Ne=(e,t,l,s)=>{var d;const o=v.value[e][t],n=((d=z.value[e])==null?void 0:d[t])||[],i=Array.isArray(s)?s.includes(l):l===s,u=o===l;if(i&&n.includes(l))return"option-correct-selected";if(!i){if(u)return"option-incorrect-selected";if(n.includes(l))return"option-wrong-history"}return""},Ge=(e,t,l)=>{const s=v.value[e][t];return s?(Array.isArray(l)?l.includes(s):s===l)?"explain-correct":"explain-incorrect":""},Pe=e=>{const t=_.value[e];if(!t||t.taskID!=="multiple_choice")return 0;let l=0,s=t.questions.length;return t.questions.forEach((o,n)=>{var u;const i=(u=v.value[e])==null?void 0:u[n];i&&(Array.isArray(o.correctAnswer)?o.correctAnswer.includes(i)&&l++:i===o.correctAnswer&&l++)}),s>0?Math.round(l/s*100):0},ie=e=>{k.value[e]=!0;const t=Pe(e);F.value[e]=t},He=(e,t,l,s)=>{var i,u;s.preventDefault(),console.log("Selected:",l),console.log("History before:",(i=z.value[e])==null?void 0:i[t]),console.log("Final answer before:",v.value[e][t]);const o=v.value[e][t];z.value[e][t]||(z.value[e][t]=[]);const n=z.value[e][t];o===null?(n.push(l),v.value[e][t]=l):o!==l?(n.includes(o)||n.push(o),n.includes(l)||n.push(l),v.value[e][t]=l):console.log("Same answer selected, ignoring"),console.log("History after:",(u=z.value[e])==null?void 0:u[t]),console.log("Final answer after:",v.value[e][t]),ie(e)},Z=e=>{if(!e||typeof e!="string")return[];const t=e.split(`
`).filter(o=>o.trim()!=="");let l=0;const s=[];for(const o of t){const n=[];let i=0,u;const d=/\(([^)]+)\)/g;for(;(u=d.exec(o))!==null;){u.index>i&&n.push({type:"text",text:o.substring(i,u.index)});const h=u[1].split(",").map(g=>{const D=g.trim(),T=D.endsWith("*");return{value:T?D.replace(/\*$/,""):D,isCorrect:T}});n.push({type:"dropdown",options:h,index:l++,correctOptions:h.filter(g=>g.isCorrect).map(g=>g.value)}),i=u.index+u[0].length}i<o.length&&n.push({type:"text",text:o.substring(i)}),n.length>0&&s.push(n)}return s},de=(e,t,l)=>{if(!k.value[e])return"";const o=Z(l).flat().filter(u=>u.type==="dropdown");return o.every(u=>v.value[e][t][u.index]&&v.value[e][t][u.index]!=="")?o.every(u=>{const d=v.value[e][t][u.index];return u.correctOptions.includes(d)})?"correct":"incorrect":""},Re=(e,t,l,s)=>{if(!k.value[e])return"";const o=v.value[e][t][l];return o===""?"":s.includes(o)?"drop-down-correct":"drop-down-incorrect"},Le=e=>e.tableData.rows.map(t=>{const l={cells:[]};return t.cells.forEach((s,o)=>{l.cells.push(t.editable[o]?"":s)}),l}),We=e=>{const t=_.value[e],l=[];let s=0;return t.tableData.rows.forEach((n,i)=>{const u={allCorrect:!0,hasAlmost:!1,hasErrors:!1,isCorrectForScoring:!0,incorrect:{}};if(!n.correctAnswers){l.push(u),u.isCorrectForScoring&&s++;return}n.editable.forEach((d,f)=>{var T;if(!d||n.correctAnswers.cells[f]==="anyIsOk")return;const h=C(v.value[e][i].cells[f]),g=C(n.correctAnswers.cells[f]),D=(T=n.correctAnswers.almostCorrect)==null?void 0:T[f];if(h!==g){if(D&&D.some(R=>C(R)===h)){u.hasAlmost=!0,u.allCorrect=!1;return}u.allCorrect=!1,u.isCorrectForScoring=!1,u.hasErrors=!0,u.incorrect[f]={correct:n.correctAnswers.cells[f],userAnswer:v.value[e][i].cells[f]}}}),u.isCorrectForScoring&&s++,l.push(u)}),K.value[e]=l,Math.round(s/t.tableData.rows.length*100)},Be=(e,t,l,s)=>{var u;if(!k.value[e]||!s)return"";if(s.cells[l]==="anyIsOk")return"grid-input-correct";const o=C(v.value[e][t].cells[l]),n=C(s.cells[l]),i=(u=s.almostCorrect)==null?void 0:u[l];return o===n?"grid-input-correct":i&&i.some(d=>C(d)===o)?"grid-input-almost-correct":"grid-input-incorrect"};Ve(()=>{ee.value=me.params.missionName,E.value=Ye[ee.value]||null,Q.value=Ae(),H.value=Q.value,E.value&&E.value.tasks&&(_.value=se(E.value.tasks,Q.value),_.value.forEach(e=>{e&&e.taskID==="discussion_task"&&e.questions&&(e.originalQuestions=[...e.questions])}),le()),Me()});const Ke=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(e,t)=>E.value?(a(),c("div",Ie,[r("div",xe,[r("h2",null,p(E.value.mainDescription),1),r("div",qe,[t[3]||(t[3]=r("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1)),r("div",et,p($.value+1)+"/"+p(_.value.length),1)])]),(a(!0),c(m,null,A(_.value,(l,s)=>(a(),c("div",{key:s,class:"task-container",style:Xe({backgroundColor:Ke[s%7],display:s===$.value?"block":"none"})},[l.audio?(a(),c("div",tt,[r("audio",st,[r("source",{src:l.audio,type:"audio/mp3"},null,8,ot),t[4]||(t[4]=O(" Your browser does not support the audio element. "))])])):b("",!0),r("div",lt,[l!=null&&l.usefulWords?(a(),c("div",nt,[r("div",rt,[t[6]||(t[6]=r("span",{class:"useful-words-title"},"Useful words:",-1)),r("div",at,[(a(!0),c(m,null,A(ce(l.usefulWords),(o,n)=>(a(),c("div",{key:n,class:"word-pair"},[r("span",ct,p(o.english),1),t[5]||(t[5]=r("span",{class:"separator"},"-",-1)),r("span",ut,p(o.russian),1),n<ce(l.usefulWords).length-1?(a(),c("span",it,",")):b("",!0)]))),128))])])])):b("",!0),r("h3",dt,p(l.taskDescription),1),l.taskPicture?(a(),c("div",pt,[r("img",{src:l.taskPicture,alt:"Image for task "+(s+1),class:"task-image"},null,8,vt)])):b("",!0),l.taskID==="true_false"?(a(),c("div",ft,[r("table",ht,[t[7]||(t[7]=r("thead",null,[r("tr",null,[r("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),r("th",{class:"true-header"},"True"),r("th",{class:"false-header"},"False")])],-1)),r("tbody",null,[(a(!0),c(m,null,A(l.questions,(o,n)=>(a(),c("tr",{key:n},[r("td",null,p(o.text),1),r("td",null,[r("label",_t,[N(r("input",{type:"radio",name:"task"+s+"q"+n,value:"true","onUpdate:modelValue":i=>v.value[s][n]=i},null,8,mt),[[he,v.value[s][n]]]),r("span",{class:S(["radio-custom",ue(s,n,"true",o.correctAnswer)])},null,2)])]),r("td",null,[r("label",gt,[N(r("input",{type:"radio",name:"task"+s+"q"+n,value:"false","onUpdate:modelValue":i=>v.value[s][n]=i},null,8,yt),[[he,v.value[s][n]]]),r("span",{class:S(["radio-custom",ue(s,n,"false",o.correctAnswer)])},null,2)])])]))),128))])])])):l.taskID==="multiple_choice"?(a(),c("div",bt,[(a(!0),c(m,null,A(l.questions,(o,n)=>{var i,u;return a(),c("div",{key:n,class:"question-container"},[r("p",wt,p(n+1)+") "+p(o.text),1),o.questionPicture?(a(),c("div",At,[r("img",{src:o.questionPicture,alt:"Image for question "+(n+1),class:"question-image"},null,8,kt)])):b("",!0),r("div",Ct,[(a(!0),c(m,null,A(o.options,(d,f)=>(a(),c("label",{key:f,class:S(["option-label",Ne(s,n,f,o.correctAnswer)])},[r("input",{type:"radio",name:"task"+s+"q"+n,value:f,class:"option-input",onClick:h=>He(s,n,f,h)},null,8,Dt),r("span",St,p(f)+" : "+p(d),1)],2))),128))]),v.value[s][n]?(a(),c("div",Tt,[(i=U.value[s])!=null&&i[n]?(a(),c("div",Et,[r("p",null,p(o.explanation),1)])):b("",!0),r("button",{class:S(["explain-button",Ge(s,n,o.correctAnswer)]),onClick:d=>ze(s,n)},p((u=U.value[s])!=null&&u[n]?"Well, okay... ":"Explain it to me"),11,$t)])):b("",!0)])}),128))])):l.taskID==="student_input"?(a(),c("div",Ft,[(a(!0),c(m,null,A(l.questions,(o,n)=>(a(),c("div",{key:n,class:"question-container"},[r("p",zt,[(a(!0),c(m,null,A(Ee(o.text),(i,u)=>(a(),c(m,null,[i.startsWith("_")?(a(),c(m,{key:0},[i.length<=3?N((a(),c("input",{key:0,type:"text",placeholder:". . .",class:S(["student-input",[ae(s,n,o.correctAnswer,o.almostCorrectAnswers),{"input-small":i.length===1,"input-medium":i.length===2,"input-large":i.length===3}]]),"onUpdate:modelValue":d=>v.value[s][n]=d,onKeyup:_e(d=>Te(s,n),["enter"]),onInput:d=>ne(s,n,d),disabled:!1,"data-task":s,"data-question":n,ref_for:!0,ref_key:"inputFields",ref:j},null,42,Ot)),[[B,v.value[s][n]]]):N((a(),c("textarea",{key:1,class:S(["student-input student-input-textarea",[ae(s,n,o.correctAnswer,o.almostCorrectAnswers),"input-full"]]),"onUpdate:modelValue":d=>v.value[s][n]=d,onInput:d=>ne(s,n,d),disabled:!1,"data-task":s,"data-question":n,ref_for:!0,ref_key:"inputFields",ref:j,rows:"1",placeholder:". . ."},null,42,Ut)),[[B,v.value[s][n]],[$e]])],64)):(a(),c(m,{key:1},[O(p(i),1)],64))],64))),256))]),k.value[s]?(a(),c("div",Mt,[o.correctAnswer==="anyIsOk"?(a(),c("span",Qt,"\u2713 \u041F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442\u0441\u044F \u043B\u044E\u0431\u043E\u0439 \u043E\u0442\u0432\u0435\u0442, \u0435\u0441\u043B\u0438 \u0445\u043E\u0442\u0438\u0442\u0435 make sure - \u043E\u0442\u043F\u0440\u0430\u0432\u044C\u0442\u0435 \u0441\u043A\u0440\u0438\u043D\u0448\u043E\u0442 \u0412\u0438\u043D\u0441\u0435\u043D\u0442\u0438\u043A\u0443!")):re(s,n,o.correctAnswer,o.almostCorrectAnswers)==="correct"?(a(),c("span",Nt,"\u2713 \u0412\u0435\u0440\u043D\u043E!")):re(s,n,o.correctAnswer,o.almostCorrectAnswers)==="almost"?(a(),c("span",Gt,"\u26A0 \u0412\u0440\u043E\u0434\u0435 \u0442\u043E\u0436\u0435 \u043D\u043E\u0440\u043C \u043E\u0442\u0432\u0435\u0442, \u043D\u043E \u0441\u0442\u043E\u0438\u0442 \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C!")):(a(),c("span",Pt,[t[8]||(t[8]=O(" \u2717 \u0437\u0434\u0435\u0441\u044C \u0432\u0435\u0440\u043D\u043E \u0431\u0443\u0434\u0435\u0442: ")),r("strong",null,p(o.correctAnswer),1)]))])):b("",!0)]))),128))])):l.taskID==="drop_down_text"?(a(),c("div",Ht,[(a(!0),c(m,null,A(l.questions,(o,n)=>(a(),c("div",{key:n,class:"question-container"},[(a(!0),c(m,null,A(Z(o.text),(i,u)=>(a(),c("div",{key:u,class:"paragraph"},[r("p",null,[(a(!0),c(m,null,A(i,(d,f)=>(a(),c(m,{key:f},[d.type==="dropdown"?N((a(),c("select",{key:0,class:S(["drop-down-select",Re(s,n,d.index,d.correctOptions)]),"onUpdate:modelValue":h=>v.value[s][n][d.index]=h},[t[9]||(t[9]=r("option",{value:"",disabled:"",selected:""},"? ? ?",-1)),(a(!0),c(m,null,A(d.options,(h,g)=>(a(),c("option",{key:g,value:h.value},p(h.value),9,Lt))),128))],10,Rt)),[[Je,v.value[s][n][d.index]]]):(a(),c(m,{key:1},[O(p(d.text),1)],64))],64))),128))])]))),128)),k.value[s]&&de(s,n,o.text)!==""?(a(),c("div",Wt,[de(s,n,o.text)==="correct"?(a(),c("span",Bt,"\u2713 \u0412\u0435\u0440\u043D\u043E!")):(a(),c("span",Kt," \u2717 \u041D\u0435\u0432\u0435\u0440\u043D\u043E. \u0413\u0434\u0435-\u0442\u043E \u043D\u0443\u0436\u043D\u043E \u0438\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C! "))])):b("",!0)]))),128))])):l.taskID==="grid_table"?(a(),c("div",jt,[r("table",Vt,[r("thead",null,[r("tr",null,[(a(!0),c(m,null,A(l.tableData.headers,(o,n)=>(a(),c("th",{key:n},p(o),1))),128))])]),r("tbody",null,[(a(!0),c(m,null,A(l.tableData.rows,(o,n)=>(a(),c("tr",{key:n},[(a(!0),c(m,null,A(o.cells,(i,u)=>{var d;return a(),c("td",{key:u},[o.editable[u]?N((a(),c("input",{key:0,type:"text",class:S(["grid-table-input",Be(s,n,u,o.correctAnswers)]),"onUpdate:modelValue":f=>v.value[s][n].cells[u]=f,placeholder:((d=o.correctAnswers)==null?void 0:d.cells[u])==="anyIsOk"?"Any answer":""},null,10,Xt)),[[B,v.value[s][n].cells[u]]]):(a(),c(m,{key:1},[O(p(i),1)],64))])}),128))]))),128))])]),k.value[s]?(a(),c("div",Jt,[(a(!0),c(m,null,A(K.value[s],(o,n)=>(a(),c("div",{key:n,class:"feedback-item"},[O(" \u0421\u0442\u0440\u043E\u043A\u0430 "+p(n+1)+": ",1),o.allCorrect?(a(),c("span",Yt,"\u2713 \u0412\u0441\u0435 \u0432\u0435\u0440\u043D\u043E!")):o.hasAlmost&&!o.hasErrors?(a(),c("span",Zt,"\u26A0 \u0422\u0430\u043A \u0442\u043E\u0436\u0435 \u0441\u043E\u0439\u0434\u0451\u0442...")):o.hasErrors?(a(!0),c(m,{key:2},A(o.incorrect,(i,u)=>(a(),c("span",{key:u,class:"incorrect-feedback"},' \u2717 \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C "'+p(i.correct)+'" ',1))),128)):b("",!0)]))),128))])):b("",!0)])):l.taskID==="discussion_task"?(a(),c("div",It,[(a(!0),c(m,null,A(l.questions,(o,n)=>{var i,u,d,f,h;return a(),c("div",{key:n,class:"discussion-question"},[r("div",xt,[r("button",{class:S(["discussion-checkbox",{checked:(i=M.value[s])==null?void 0:i[n]}]),onClick:x(g=>Oe(s,n),["stop"])},null,10,qt)]),r("div",{class:S(["question-content",{collapsed:(u=G.value[s])==null?void 0:u[n]}])},[r("div",es,p(o.text),1),r("div",ts,[(d=G.value[s])!=null&&d[n]?b("",!0):(a(),c("div",{key:0,class:"translation-toggle",onClick:x(g=>Ue(s,n),["stop"])},[(f=P.value[s])!=null&&f[n]?(a(),c("span",os,p(o.translation),1)):(a(),c(m,{key:0},[O("\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0432\u043E\u0434")],64))],8,ss)),(h=G.value[s])!=null&&h[n]?(a(),c("div",ls,p(o.translation),1)):b("",!0)])],2)])}),128))])):b("",!0),r("div",ns,[r("div",rs,[l.textScript?(a(),c("button",{key:0,class:"toggle-script-btn",onClick:o=>Fe(s)},p(L.value===s?"\u0421\u043A\u0440\u044B\u0442\u044C \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438"),9,as)):b("",!0),l.taskID==="multiple_choice"?(a(),c("div",cs,[r("div",us,[t[10]||(t[10]=O(" \u041D\u043E\u043C\u0435\u0440 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430: ")),V.value?N((a(),c("input",{key:1,"onUpdate:modelValue":t[1]||(t[1]=o=>H.value=o),onKeyup:_e(oe,["enter"]),onBlur:oe,class:"seed-input",ref_for:!0,ref_key:"seedInput",ref:ge},null,544)),[[B,H.value]]):(a(),c("span",{key:0,class:"seed-value",onClick:t[0]||(t[0]=o=>V.value=!0)},p(Q.value),1))]),r("button",{class:"seed-copy-btn",onClick:ke,title:"Copy seed to clipboard"}," \u{1F4CB} ")])):b("",!0),r("div",{class:S(["score-display",[{"score-visible":k.value[s]},k.value[s]?Y(F.value[s]).class:""]])},p(k.value[s]?`${F.value[s]}% (${Y(F.value[s]).letter})`:""),3),l.taskID==="multiple_choice"?(a(),c("button",{key:2,class:"stats-button",onClick:o=>we(s),title:"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0443\u044E \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443"}," \u{1F4CA} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 ",8,is)):b("",!0),l.taskID!=="discussion_task"&&l.taskID!=="multiple_choice"?(a(),c("button",{key:3,class:"check-button",onClick:o=>Qe(s),"data-task-type":l.taskID}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C ",8,ds)):l.taskID==="discussion_task"?(a(),c("button",{key:4,class:"check-button",onClick:o=>Se(s)},p(W.value?"Unshuffle":"Shuffle"),9,ps)):b("",!0)]),L.value===s?(a(),c("div",vs,[r("p",null,p(l.textScript),1)])):b("",!0),r("div",fs,[r("button",{class:"nav-button prev-button",onClick:De,disabled:$.value===0}," \u2190 ",8,hs),r("button",{class:"nav-button next-button",onClick:Ce,disabled:$.value===_.value.length-1}," \u2192 ",8,_s)])])])],4))),128)),X.value&&w.value?(a(),c("div",{key:0,class:"stats-modal-overlay",onClick:J},[r("div",{class:"stats-modal",onClick:t[2]||(t[2]=x(()=>{},["stop"]))},[r("div",{class:"stats-modal-header"},[t[11]||(t[11]=r("h3",null,"\u{1F4CA} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0442\u0435\u0441\u0442\u0430",-1)),r("button",{class:"close-button",onClick:J},"\u2715")]),r("div",ms,[r("div",gs,[r("div",ys,[t[12]||(t[12]=r("span",{class:"stat-label"},"\u0412\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u0431\u044B\u043B\u043E:",-1)),r("span",bs,p(w.value.totalQuestions),1)]),r("div",ws,[t[13]||(t[13]=r("span",{class:"stat-label"},"\u0412\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043D\u043E:",-1)),r("span",{class:S(["stat-value",{warning:w.value.skippedQuestions>0}])},p(w.value.skippedQuestions),3)]),r("div",As,[t[14]||(t[14]=r("span",{class:"stat-label"},"\u041E\u043F\u044B\u0442\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E:",-1)),r("span",ks,p(w.value.totalClicks),1)]),r("div",Cs,[t[15]||(t[15]=r("span",{class:"stat-label"},"\u0420\u0430\u0441\u0441\u043C\u043E\u0442\u0440\u0435\u043D\u043E \u043E\u0442\u0432\u0435\u0442\u043E\u0432:",-1)),r("span",Ds,p(w.value.totalOptions),1)]),r("div",Ss,[t[16]||(t[16]=r("span",{class:"stat-label"},"\u0414\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u0439:",-1)),r("span",Ts,p(w.value.correctClicks),1)]),r("div",Es,[t[17]||(t[17]=r("span",{class:"stat-label"},"\u041A\u043E\u0441\u044F\u043A\u043E\u0432:",-1)),r("span",$s,p(w.value.wrongClicks),1)]),r("div",Fs,[t[18]||(t[18]=r("span",{class:"stat-label"},"\u0422\u043E\u0447\u043D\u043E\u0441\u0442\u044C:",-1)),r("span",zs,p(w.value.accuracy)+"%",1)]),r("div",Os,[t[19]||(t[19]=r("span",{class:"stat-label"},"\u0424\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442:",-1)),r("span",Us,p(w.value.finalScore)+"% ("+p(w.value.finalGrade)+")",1)])]),w.value.questionsStats.length>0?(a(),c("div",Ms,[t[20]||(t[20]=r("h4",null,"\u0414\u0435\u0442\u0430\u043B\u0438 \u043F\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u0430\u043C:",-1)),r("div",Qs,[(a(!0),c(m,null,A(w.value.questionsStats,l=>(a(),c("div",{key:l.questionNumber,class:S(["question-stat-card",{"final-correct":l.isFinalCorrect,skipped:l.isSkipped}])},[r("div",Ns,p(l.questionNumber)+") "+p(l.questionText),1),r("div",Gs,[r("span",Ps,"\u2713 "+p(l.correctClicks),1),r("span",Hs,"\u2717 "+p(l.wrongClicks),1)])],2))),128))])])):b("",!0)]),r("div",{class:"stats-modal-footer"},[r("div",{class:"footer-buttons"},[r("button",{class:"send-button",onClick:ye}," \u{1F4E4} \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0443\u0447\u0438\u0442\u0435\u043B\u044E "),r("button",{class:"close-button",onClick:J}," \u0417\u0430\u043A\u0440\u044B\u0442\u044C ")])])])])):b("",!0)])):b("",!0)}};var Vs=Ze(Rs,[["__scopeId","data-v-1d80da43"]]);export{Vs as default};
