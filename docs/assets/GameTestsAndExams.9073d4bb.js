import{u as q,r as u,o as ee,b as r,c,e as l,t as i,z as j,j as S,m as te,B as se,F as D,q as T,l as m,s as le,E as U,n as A}from"./index.4116d148.js";import{T as oe}from"./TestsAndExamsData.c28a5743.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";const ne={key:0,class:"exercise-container"},re={class:"exercise-header"},ce={class:"seed-control"},ue={class:"seed-display"},ie={class:"task-title"},de={key:0,class:"task-image-container"},ve=["src","alt"],pe={key:1,controls:"",class:"audio-player",controlsList:"nodownload",oncontextmenu:"return false;"},fe=["src"],me={key:2,class:"true-false-container"},_e={class:"true-false-table"},he={class:"radio-label"},ye=["name","onUpdate:modelValue"],ge={class:"radio-label"},be=["name","onUpdate:modelValue"],ke={key:3,class:"multiple-choice-container"},Ce={class:"question-text"},we={class:"options-container"},Ae=["name","value","onUpdate:modelValue"],Ee={class:"option-text"},Se={key:0,class:"explain-container"},De={key:0,class:"explanation-content"},Te=["onClick"],Be={class:"check-script-wrapper"},Me=["onClick"],Ue={key:0,class:"script-toggle-wrapper"},Ke=["onClick"],Le={key:4,class:"text-script-content"},Ve={__name:"GameTestsAndExams",setup($e){const z=q(),_=u(null),d=u([]),p=u([]),E=u(null),b=u([]),K=u(""),f=u([]),h=u([]),y=u(""),k=u(""),B=u(!1),O=u(null);u(!0),u(!0);const P=()=>Math.random().toString(36).slice(2,8),L=(e,n)=>{const s=[...e];let t=0;for(let o=0;o<n.length;o++)t=(t<<5)-t+n.charCodeAt(o),t|=0;for(let o=s.length-1;o>0;o--){const a=(t%(o+1)+o)%(o+1),v=Math.abs(a);[s[o],s[v]]=[s[v],s[o]]}return s},V=(e,n)=>e.map(s=>{if(s.taskID!=="multiple_choice")return{...s};const o=L([...s.questions],n+"questions").map(a=>{a.options[a.correctAnswer];const v=L(Object.entries(a.options),n+"options"+a.text),C={};let w="A";return v.forEach(([g,M],x)=>{const N=String.fromCharCode(65+x);C[N]=M,g===a.correctAnswer&&(w=N)}),{...a,options:C,correctAnswer:w}});return{...s,questions:o}}),$=async()=>{k.value.trim()&&(y.value=k.value.trim()),B.value=!1,_.value&&(f.value=V(_.value.tasks,y.value),F())},Q=()=>{navigator.clipboard.writeText(y.value)},F=()=>{d.value=f.value.map(e=>Array(e.questions.length).fill(null)),p.value=f.value.map(()=>!1),b.value=f.value.map(()=>null),h.value=f.value.map(e=>Array(e.questions.length).fill(!1))};ee(()=>{K.value=z.params.missionName,_.value=oe[K.value]||null,y.value=P(),k.value=y.value,_.value&&(f.value=V(_.value.tasks,y.value),F()),J()});const W=(e,n)=>{h.value[e]||(h.value[e]=[]),h.value[e][n]=!h.value[e][n]},Y=(e,n,s)=>p.value[e]?d.value[e][n]===s?"explain-correct":"explain-incorrect":"",R=e=>e===100?{letter:"A+",class:"grade-Aplus"}:e>=85?{letter:"A",class:"grade-A"}:e>=75?{letter:"B+",class:"grade-Bplus"}:e>=60?{letter:"B-",class:"grade-Bminus"}:e>=40?{letter:"C",class:"grade-C"}:e>=20?{letter:"D",class:"grade-D"}:e>=10?{letter:"E",class:"grade-E"}:{letter:"F",class:"grade-F"},H=e=>{E.value=E.value===e?null:e},J=()=>{document.addEventListener("contextmenu",e=>{if(e.target.classList.contains("audio-player"))return e.preventDefault(),!1}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="s"&&e.preventDefault()})},X=e=>{p.value[e]=!0;const n=f.value[e];let s=0;n.questions.forEach((o,a)=>{d.value[e][a]===o.correctAnswer&&s++});const t=Math.round(s/n.questions.length*100);b.value[e]=t},G=(e,n,s,t)=>{if(!p.value[e])return"";const o=d.value[e][n];return s===t?o===s?"correct-selected":"correct-not-selected":o===s?"incorrect-selected":""},Z=(e,n,s,t)=>{if(!p.value[e])return"";const o=d.value[e][n];return s===t?o===s?"option-correct-selected":"option-correct-not-selected":o===s?"option-incorrect-selected":""},I=["#cff0ff","#e0c0ff","#ffc0cb","#ffd700","#98fb98","#ffa07a","#ff6347"];return(e,n)=>_.value?(r(),c("div",ne,[l("div",re,[l("h2",null,i(_.value.mainDescription),1),n[3]||(n[3]=l("p",{class:"main-description"},"Special tasks for S.P.E.C.i.A.L. agents",-1)),l("div",ce,[l("div",ue,[n[2]||(n[2]=j(" \u041D\u043E\u043C\u0435\u0440 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430: ")),B.value?S((r(),c("input",{key:1,"onUpdate:modelValue":n[1]||(n[1]=s=>k.value=s),onKeyup:se($,["enter"]),onBlur:$,class:"seed-input",ref_key:"seedInput",ref:O},null,544)),[[te,k.value]]):(r(),c("span",{key:0,class:"seed-value",onClick:n[0]||(n[0]=s=>B.value=!0)},i(y.value),1))]),l("button",{class:"seed-copy-btn",onClick:Q,title:"Copy seed to clipboard"}," \u{1F4CB} ")])]),(r(!0),c(D,null,T(f.value,(s,t)=>(r(),c("div",{key:t,class:"task-container",style:le({backgroundColor:I[t%7]})},[l("h3",ie,i(s.taskDescription),1),s.taskPicture?(r(),c("div",de,[l("img",{src:s.taskPicture,alt:"Image for task "+(t+1),class:"task-image"},null,8,ve)])):m("",!0),s.audio?(r(),c("audio",pe,[l("source",{src:s.audio,type:"audio/mp3"},null,8,fe),n[4]||(n[4]=j(" Your browser does not support the audio element. "))])):m("",!0),s.taskID==="true_false"?(r(),c("div",me,[l("table",_e,[n[5]||(n[5]=l("thead",null,[l("tr",null,[l("th",null,"\u043F\u0440\u0430\u0432\u0434\u0430 / \u0422\u0420\u0423 / \u0438\u043B\u0438 / \u0444\u041E\u043B\u0441 / \u043B\u043E\u0436\u044C :"),l("th",{class:"true-header"},"True"),l("th",{class:"false-header"},"False")])],-1)),l("tbody",null,[(r(!0),c(D,null,T(s.questions,(o,a)=>(r(),c("tr",{key:a},[l("td",null,i(o.text),1),l("td",null,[l("label",he,[S(l("input",{type:"radio",name:"task"+t+"q"+a,value:"true","onUpdate:modelValue":v=>d.value[t][a]=v},null,8,ye),[[U,d.value[t][a]]]),l("span",{class:A(["radio-custom",G(t,a,"true",o.correctAnswer)])},null,2)])]),l("td",null,[l("label",ge,[S(l("input",{type:"radio",name:"task"+t+"q"+a,value:"false","onUpdate:modelValue":v=>d.value[t][a]=v},null,8,be),[[U,d.value[t][a]]]),l("span",{class:A(["radio-custom",G(t,a,"false",o.correctAnswer)])},null,2)])])]))),128))])])])):s.taskID==="multiple_choice"?(r(),c("div",ke,[(r(!0),c(D,null,T(s.questions,(o,a)=>{var v,C;return r(),c("div",{key:a,class:"question-container"},[l("p",Ce,i(a+1)+") "+i(o.text),1),l("div",we,[(r(!0),c(D,null,T(o.options,(w,g)=>(r(),c("label",{key:g,class:A(["option-label",[Z(t,a,g,o.correctAnswer),d.value[t][a]===g&&!p.value[t]?"option-selected":""]])},[S(l("input",{type:"radio",name:"task"+t+"q"+a,value:g,"onUpdate:modelValue":M=>d.value[t][a]=M,class:"option-input"},null,8,Ae),[[U,d.value[t][a]]]),l("span",Ee,i(g)+" : "+i(w),1)],2))),128))]),p.value[t]?(r(),c("div",Se,[(v=h.value[t])!=null&&v[a]?(r(),c("div",De,[l("p",null,i(o.explanation),1)])):m("",!0),l("button",{class:A(["explain-button",Y(t,a,o.correctAnswer)]),onClick:w=>W(t,a)},i((C=h.value[t])!=null&&C[a]?"Well, okay... ":"Explain it to me"),11,Te)])):m("",!0)])}),128))])):m("",!0),l("div",Be,[l("button",{class:"check-button",onClick:o=>X(t)}," \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C - check ",8,Me),l("div",{class:A(["score-display",[{"score-visible":p.value[t]},p.value[t]?R(b.value[t]).class:""]])},i(p.value[t]?`${b.value[t]}% (${R(b.value[t]).letter})`:""),3),s.textScript?(r(),c("div",Ue,[l("button",{class:"toggle-script-btn",onClick:o=>H(t)},i(E.value===t?"\u0421\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0441\u0442":"Explain it to me"),9,Ke)])):m("",!0)]),E.value===t?(r(),c("div",Le,[l("p",null,i(s.textScript),1)])):m("",!0)],4))),128))])):m("",!0)}};var Ne=ae(Ve,[["__scopeId","data-v-b7076118"]]);export{Ne as default};
